function V_(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const TO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",SO=V_(TO);function i0(t){return!!t||t===""}function rf(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=mt(r)?AO(r):rf(r);if(s)for(const i in s)e[i]=s[i]}return e}else{if(mt(t))return t;if(Ye(t))return t}}const CO=/;(?![^(]*\))/g,kO=/:(.+)/;function AO(t){const e={};return t.split(CO).forEach(n=>{if(n){const r=n.split(kO);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function sf(t){let e="";if(mt(t))e=t;else if(ce(t))for(let n=0;n<t.length;n++){const r=sf(t[n]);r&&(e+=r+" ")}else if(Ye(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function eee(t){if(!t)return null;let{class:e,style:n}=t;return e&&!mt(e)&&(t.class=sf(e)),n&&(t.style=rf(n)),t}const tee=t=>mt(t)?t:t==null?"":ce(t)||Ye(t)&&(t.toString===l0||!fe(t.toString))?JSON.stringify(t,o0,2):String(t),o0=(t,e)=>e&&e.__v_isRef?o0(t,e.value):oa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:a0(e)?{[`Set(${e.size})`]:[...e.values()]}:Ye(e)&&!ce(e)&&!u0(e)?String(e):e,Ke={},ia=[],_r=()=>{},RO=()=>!1,xO=/^on[^a-z]/,fu=t=>xO.test(t),j_=t=>t.startsWith("onUpdate:"),Xt=Object.assign,q_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},NO=Object.prototype.hasOwnProperty,Ie=(t,e)=>NO.call(t,e),ce=Array.isArray,oa=t=>of(t)==="[object Map]",a0=t=>of(t)==="[object Set]",fe=t=>typeof t=="function",mt=t=>typeof t=="string",H_=t=>typeof t=="symbol",Ye=t=>t!==null&&typeof t=="object",c0=t=>Ye(t)&&fe(t.then)&&fe(t.catch),l0=Object.prototype.toString,of=t=>l0.call(t),PO=t=>of(t).slice(8,-1),u0=t=>of(t)==="[object Object]",K_=t=>mt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Yc=V_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),af=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},DO=/-(\w)/g,qr=af(t=>t.replace(DO,(e,n)=>n?n.toUpperCase():"")),OO=/\B([A-Z])/g,Ya=af(t=>t.replace(OO,"-$1").toLowerCase()),cf=af(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hp=af(t=>t?`on${cf(t)}`:""),yl=(t,e)=>!Object.is(t,e),Xc=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Wh=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},W_=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _E;const MO=()=>_E||(_E=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Sr;class LO{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Sr&&(this.parent=Sr,this.index=(Sr.scopes||(Sr.scopes=[])).push(this)-1)}run(e){if(this.active){const n=Sr;try{return Sr=this,e()}finally{Sr=n}}}on(){Sr=this}off(){Sr=this.parent}stop(e){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function FO(t,e=Sr){e&&e.active&&e.effects.push(t)}const z_=t=>{const e=new Set(t);return e.w=0,e.n=0,e},h0=t=>(t.w&ti)>0,d0=t=>(t.n&ti)>0,UO=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ti},BO=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];h0(s)&&!d0(s)?s.delete(t):e[n++]=s,s.w&=~ti,s.n&=~ti}e.length=n}},nm=new WeakMap;let Vc=0,ti=1;const rm=30;let pr;const Yi=Symbol(""),sm=Symbol("");class G_{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,FO(this,r)}run(){if(!this.active)return this.fn();let e=pr,n=zs;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=pr,pr=this,zs=!0,ti=1<<++Vc,Vc<=rm?UO(this):yE(this),this.fn()}finally{Vc<=rm&&BO(this),ti=1<<--Vc,pr=this.parent,zs=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){pr===this?this.deferStop=!0:this.active&&(yE(this),this.onStop&&this.onStop(),this.active=!1)}}function yE(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let zs=!0;const f0=[];function Xa(){f0.push(zs),zs=!1}function Ja(){const t=f0.pop();zs=t===void 0?!0:t}function zn(t,e,n){if(zs&&pr){let r=nm.get(t);r||nm.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=z_()),p0(s)}}function p0(t,e){let n=!1;Vc<=rm?d0(t)||(t.n|=ti,n=!h0(t)):n=!t.has(pr),n&&(t.add(pr),pr.deps.push(t))}function gs(t,e,n,r,s,i){const o=nm.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ce(t))o.forEach((c,l)=>{(l==="length"||l>=r)&&a.push(c)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ce(t)?K_(n)&&a.push(o.get("length")):(a.push(o.get(Yi)),oa(t)&&a.push(o.get(sm)));break;case"delete":ce(t)||(a.push(o.get(Yi)),oa(t)&&a.push(o.get(sm)));break;case"set":oa(t)&&a.push(o.get(Yi));break}if(a.length===1)a[0]&&im(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);im(z_(c))}}function im(t,e){const n=ce(t)?t:[...t];for(const r of n)r.computed&&vE(r);for(const r of n)r.computed||vE(r)}function vE(t,e){(t!==pr||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const $O=V_("__proto__,__v_isRef,__isVue"),g0=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(H_)),VO=Q_(),jO=Q_(!1,!0),qO=Q_(!0),wE=HO();function HO(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ne(this);for(let i=0,o=this.length;i<o;i++)zn(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Ne)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Xa();const r=Ne(this)[e].apply(this,n);return Ja(),r}}),t}function Q_(t=!1,e=!1){return function(r,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?o1:w0:e?v0:y0).get(r))return r;const o=ce(r);if(!t&&o&&Ie(wE,s))return Reflect.get(wE,s,i);const a=Reflect.get(r,s,i);return(H_(s)?g0.has(s):$O(s))||(t||zn(r,"get",s),e)?a:It(a)?o&&K_(s)?a:a.value:Ye(a)?t?E0(a):En(a):a}}const KO=m0(),WO=m0(!0);function m0(t=!1){return function(n,r,s,i){let o=n[r];if(Ia(o)&&It(o)&&!It(s))return!1;if(!t&&(!zh(s)&&!Ia(s)&&(o=Ne(o),s=Ne(s)),!ce(n)&&It(o)&&!It(s)))return o.value=s,!0;const a=ce(n)&&K_(r)?Number(r)<n.length:Ie(n,r),c=Reflect.set(n,r,s,i);return n===Ne(i)&&(a?yl(s,o)&&gs(n,"set",r,s):gs(n,"add",r,s)),c}}function zO(t,e){const n=Ie(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&gs(t,"delete",e,void 0),r}function GO(t,e){const n=Reflect.has(t,e);return(!H_(e)||!g0.has(e))&&zn(t,"has",e),n}function QO(t){return zn(t,"iterate",ce(t)?"length":Yi),Reflect.ownKeys(t)}const _0={get:VO,set:KO,deleteProperty:zO,has:GO,ownKeys:QO},YO={get:qO,set(t,e){return!0},deleteProperty(t,e){return!0}},XO=Xt({},_0,{get:jO,set:WO}),Y_=t=>t,lf=t=>Reflect.getPrototypeOf(t);function th(t,e,n=!1,r=!1){t=t.__v_raw;const s=Ne(t),i=Ne(e);n||(e!==i&&zn(s,"get",e),zn(s,"get",i));const{has:o}=lf(s),a=r?Y_:n?ey:vl;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function nh(t,e=!1){const n=this.__v_raw,r=Ne(n),s=Ne(t);return e||(t!==s&&zn(r,"has",t),zn(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function rh(t,e=!1){return t=t.__v_raw,!e&&zn(Ne(t),"iterate",Yi),Reflect.get(t,"size",t)}function EE(t){t=Ne(t);const e=Ne(this);return lf(e).has.call(e,t)||(e.add(t),gs(e,"add",t,t)),this}function bE(t,e){e=Ne(e);const n=Ne(this),{has:r,get:s}=lf(n);let i=r.call(n,t);i||(t=Ne(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?yl(e,o)&&gs(n,"set",t,e):gs(n,"add",t,e),this}function IE(t){const e=Ne(this),{has:n,get:r}=lf(e);let s=n.call(e,t);s||(t=Ne(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&gs(e,"delete",t,void 0),i}function TE(){const t=Ne(this),e=t.size!==0,n=t.clear();return e&&gs(t,"clear",void 0,void 0),n}function sh(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Ne(o),c=e?Y_:t?ey:vl;return!t&&zn(a,"iterate",Yi),o.forEach((l,u)=>r.call(s,c(l),c(u),i))}}function ih(t,e,n){return function(...r){const s=this.__v_raw,i=Ne(s),o=oa(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...r),u=n?Y_:e?ey:vl;return!e&&zn(i,"iterate",c?sm:Yi),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Rs(t){return function(...e){return t==="delete"?!1:this}}function JO(){const t={get(i){return th(this,i)},get size(){return rh(this)},has:nh,add:EE,set:bE,delete:IE,clear:TE,forEach:sh(!1,!1)},e={get(i){return th(this,i,!1,!0)},get size(){return rh(this)},has:nh,add:EE,set:bE,delete:IE,clear:TE,forEach:sh(!1,!0)},n={get(i){return th(this,i,!0)},get size(){return rh(this,!0)},has(i){return nh.call(this,i,!0)},add:Rs("add"),set:Rs("set"),delete:Rs("delete"),clear:Rs("clear"),forEach:sh(!0,!1)},r={get(i){return th(this,i,!0,!0)},get size(){return rh(this,!0)},has(i){return nh.call(this,i,!0)},add:Rs("add"),set:Rs("set"),delete:Rs("delete"),clear:Rs("clear"),forEach:sh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ih(i,!1,!1),n[i]=ih(i,!0,!1),e[i]=ih(i,!1,!0),r[i]=ih(i,!0,!0)}),[t,n,e,r]}const[ZO,e1,t1,n1]=JO();function X_(t,e){const n=e?t?n1:t1:t?e1:ZO;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ie(n,s)&&s in r?n:r,s,i)}const r1={get:X_(!1,!1)},s1={get:X_(!1,!0)},i1={get:X_(!0,!1)},y0=new WeakMap,v0=new WeakMap,w0=new WeakMap,o1=new WeakMap;function a1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function c1(t){return t.__v_skip||!Object.isExtensible(t)?0:a1(PO(t))}function En(t){return Ia(t)?t:J_(t,!1,_0,r1,y0)}function l1(t){return J_(t,!1,XO,s1,v0)}function E0(t){return J_(t,!0,YO,i1,w0)}function J_(t,e,n,r,s){if(!Ye(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=c1(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function aa(t){return Ia(t)?aa(t.__v_raw):!!(t&&t.__v_isReactive)}function Ia(t){return!!(t&&t.__v_isReadonly)}function zh(t){return!!(t&&t.__v_isShallow)}function b0(t){return aa(t)||Ia(t)}function Ne(t){const e=t&&t.__v_raw;return e?Ne(e):t}function Z_(t){return Wh(t,"__v_skip",!0),t}const vl=t=>Ye(t)?En(t):t,ey=t=>Ye(t)?E0(t):t;function I0(t){zs&&pr&&(t=Ne(t),p0(t.dep||(t.dep=z_())))}function T0(t,e){t=Ne(t),t.dep&&im(t.dep)}function It(t){return!!(t&&t.__v_isRef===!0)}function xe(t){return S0(t,!1)}function Gh(t){return S0(t,!0)}function S0(t,e){return It(t)?t:new u1(t,e)}class u1{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ne(e),this._value=n?e:vl(e)}get value(){return I0(this),this._value}set value(e){const n=this.__v_isShallow||zh(e)||Ia(e);e=n?e:Ne(e),yl(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:vl(e),T0(this))}}function mn(t){return It(t)?t.value:t}const h1={get:(t,e,n)=>mn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return It(s)&&!It(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function C0(t){return aa(t)?t:new Proxy(t,h1)}class d1{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function k0(t,e,n){const r=t[e];return It(r)?r:new d1(t,e,n)}var A0;class f1{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[A0]=!1,this._dirty=!0,this.effect=new G_(e,()=>{this._dirty||(this._dirty=!0,T0(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Ne(this);return I0(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}A0="__v_isReadonly";function p1(t,e,n=!1){let r,s;const i=fe(t);return i?(r=t,s=_r):(r=t.get,s=t.set),new f1(r,s,i||!s,n)}function Gs(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){Za(i,e,n)}return s}function ar(t,e,n,r){if(fe(t)){const i=Gs(t,e,n,r);return i&&c0(i)&&i.catch(o=>{Za(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(ar(t[i],e,n,r));return s}function Za(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){Gs(c,null,10,[t,o,a]);return}}g1(t,n,s,r)}function g1(t,e,n,r=!0){console.error(t)}let wl=!1,om=!1;const rn=[];let kr=0;const ca=[];let ns=null,Li=0;const R0=Promise.resolve();let ty=null;function uf(t){const e=ty||R0;return t?e.then(this?t.bind(this):t):e}function m1(t){let e=kr+1,n=rn.length;for(;e<n;){const r=e+n>>>1;El(rn[r])<t?e=r+1:n=r}return e}function hf(t){(!rn.length||!rn.includes(t,wl&&t.allowRecurse?kr+1:kr))&&(t.id==null?rn.push(t):rn.splice(m1(t.id),0,t),x0())}function x0(){!wl&&!om&&(om=!0,ty=R0.then(P0))}function _1(t){const e=rn.indexOf(t);e>kr&&rn.splice(e,1)}function N0(t){ce(t)?ca.push(...t):(!ns||!ns.includes(t,t.allowRecurse?Li+1:Li))&&ca.push(t),x0()}function SE(t,e=wl?kr+1:0){for(;e<rn.length;e++){const n=rn[e];n&&n.pre&&(rn.splice(e,1),e--,n())}}function Qh(t){if(ca.length){const e=[...new Set(ca)];if(ca.length=0,ns){ns.push(...e);return}for(ns=e,ns.sort((n,r)=>El(n)-El(r)),Li=0;Li<ns.length;Li++)ns[Li]();ns=null,Li=0}}const El=t=>t.id==null?1/0:t.id,y1=(t,e)=>{const n=El(t)-El(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function P0(t){om=!1,wl=!0,rn.sort(y1);const e=_r;try{for(kr=0;kr<rn.length;kr++){const n=rn[kr];n&&n.active!==!1&&Gs(n,null,14)}}finally{kr=0,rn.length=0,Qh(),wl=!1,ty=null,(rn.length||ca.length)&&P0()}}function v1(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ke;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||Ke;d&&(s=n.map(f=>f.trim())),h&&(s=n.map(W_))}let a,c=r[a=Hp(e)]||r[a=Hp(qr(e))];!c&&i&&(c=r[a=Hp(Ya(e))]),c&&ar(c,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ar(l,t,6,s)}}function D0(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!fe(t)){const c=l=>{const u=D0(l,e,!0);u&&(a=!0,Xt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Ye(t)&&r.set(t,null),null):(ce(i)?i.forEach(c=>o[c]=null):Xt(o,i),Ye(t)&&r.set(t,o),o)}function df(t,e){return!t||!fu(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ie(t,e[0].toLowerCase()+e.slice(1))||Ie(t,Ya(e))||Ie(t,e))}let _n=null,ff=null;function Yh(t){const e=_n;return _n=t,ff=t&&t.type.__scopeId||null,e}function nee(t){ff=t}function ree(){ff=null}function ny(t,e=_n,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&FE(-1);const i=Yh(e),o=t(...s);return Yh(i),r._d&&FE(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Kp(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:_}=t;let v,y;const g=Yh(t);try{if(n.shapeFlag&4){const I=s||r;v=er(u.call(I,I,h,i,f,d,p)),y=c}else{const I=e;v=er(I.length>1?I(i,{attrs:c,slots:a,emit:l}):I(i,null)),y=e.props?c:E1(c)}}catch(I){Zc.length=0,Za(I,t,1),v=rt(bn)}let w=v;if(y&&_!==!1){const I=Object.keys(y),{shapeFlag:k}=w;I.length&&k&7&&(o&&I.some(j_)&&(y=b1(y,o)),w=ms(w,y))}return n.dirs&&(w=ms(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),v=w,Yh(g),v}function w1(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(Sa(r)){if(r.type!==bn||r.children==="v-if"){if(e)return;e=r}}else return}return e}const E1=t=>{let e;for(const n in t)(n==="class"||n==="style"||fu(n))&&((e||(e={}))[n]=t[n]);return e},b1=(t,e)=>{const n={};for(const r in t)(!j_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function I1(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?CE(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!df(l,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?CE(r,o,l):!0:!!o;return!1}function CE(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!df(n,i))return!0}return!1}function ry({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const O0=t=>t.__isSuspense,T1={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,c,l){t==null?S1(e,n,r,s,i,o,a,c,l):C1(t,e,n,r,s,o,a,c,l)},hydrate:k1,create:sy,normalize:A1},M0=T1;function bl(t,e){const n=t.props&&t.props[e];fe(n)&&n()}function S1(t,e,n,r,s,i,o,a,c){const{p:l,o:{createElement:u}}=c,h=u("div"),d=t.suspense=sy(t,s,r,e,h,n,i,o,a,c);l(null,d.pendingBranch=t.ssContent,h,null,r,d,i,o),d.deps>0?(bl(t,"onPending"),bl(t,"onFallback"),l(null,t.ssFallback,e,n,r,null,i,o),la(d,t.ssFallback)):d.resolve()}function C1(t,e,n,r,s,i,o,a,{p:c,um:l,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:_,isInFallback:v,isHydrating:y}=h;if(_)h.pendingBranch=d,Ar(d,_)?(c(_,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0?h.resolve():v&&(c(p,f,n,r,s,null,i,o,a),la(h,f))):(h.pendingId++,y?(h.isHydrating=!1,h.activeBranch=_):l(_,s,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),v?(c(null,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0?h.resolve():(c(p,f,n,r,s,null,i,o,a),la(h,f))):p&&Ar(d,p)?(c(p,d,n,r,s,h,i,o,a),h.resolve(!0)):(c(null,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0&&h.resolve()));else if(p&&Ar(d,p))c(p,d,n,r,s,h,i,o,a),la(h,d);else if(bl(e,"onPending"),h.pendingBranch=d,h.pendingId++,c(null,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0)h.resolve();else{const{timeout:g,pendingId:w}=h;g>0?setTimeout(()=>{h.pendingId===w&&h.fallback(f)},g):g===0&&h.fallback(f)}}function sy(t,e,n,r,s,i,o,a,c,l,u=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:_,remove:v}}=l,y=W_(t.props&&t.props.timeout),g={vnode:t,parent:e,parentComponent:n,isSVG:o,container:r,hiddenContainer:s,anchor:i,deps:0,pendingId:0,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:u,isUnmounted:!1,effects:[],resolve(w=!1){const{vnode:I,activeBranch:k,pendingBranch:x,pendingId:$,effects:A,parentComponent:K,container:Q}=g;if(g.isHydrating)g.isHydrating=!1;else if(!w){const le=k&&x.transition&&x.transition.mode==="out-in";le&&(k.transition.afterLeave=()=>{$===g.pendingId&&d(x,Q,G,0)});let{anchor:G}=g;k&&(G=p(k),f(k,K,g,!0)),le||d(x,Q,G,0)}la(g,x),g.pendingBranch=null,g.isInFallback=!1;let X=g.parent,W=!1;for(;X;){if(X.pendingBranch){X.effects.push(...A),W=!0;break}X=X.parent}W||N0(A),g.effects=[],bl(I,"onResolve")},fallback(w){if(!g.pendingBranch)return;const{vnode:I,activeBranch:k,parentComponent:x,container:$,isSVG:A}=g;bl(I,"onFallback");const K=p(k),Q=()=>{!g.isInFallback||(h(null,w,$,K,x,null,A,a,c),la(g,w))},X=w.transition&&w.transition.mode==="out-in";X&&(k.transition.afterLeave=Q),g.isInFallback=!0,f(k,x,null,!0),X||Q()},move(w,I,k){g.activeBranch&&d(g.activeBranch,w,I,k),g.container=w},next(){return g.activeBranch&&p(g.activeBranch)},registerDep(w,I){const k=!!g.pendingBranch;k&&g.deps++;const x=w.vnode.el;w.asyncDep.catch($=>{Za($,w,0)}).then($=>{if(w.isUnmounted||g.isUnmounted||g.pendingId!==w.suspenseId)return;w.asyncResolved=!0;const{vnode:A}=w;fm(w,$,!1),x&&(A.el=x);const K=!x&&w.subTree.el;I(w,A,_(x||w.subTree.el),x?null:p(w.subTree),g,o,c),K&&v(K),ry(w,A.el),k&&--g.deps===0&&g.resolve()})},unmount(w,I){g.isUnmounted=!0,g.activeBranch&&f(g.activeBranch,n,w,I),g.pendingBranch&&f(g.pendingBranch,n,w,I)}};return g}function k1(t,e,n,r,s,i,o,a,c){const l=e.suspense=sy(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),u=c(t,l.pendingBranch=e.ssContent,n,l,i,o);return l.deps===0&&l.resolve(),u}function A1(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=kE(r?n.default:n),t.ssFallback=r?kE(n.fallback):rt(bn)}function kE(t){let e;if(fe(t)){const n=Ta&&t._c;n&&(t._d=!1,Zi()),t=t(),n&&(t._d=!0,e=nr,tC())}return ce(t)&&(t=w1(t)),t=er(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function L0(t,e){e&&e.pendingBranch?ce(t)?e.effects.push(...t):e.effects.push(t):N0(t)}function la(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t,s=n.el=e.el;r&&r.subTree===n&&(r.vnode.el=s,ry(r,s))}function fn(t,e){if(wt){let n=wt.provides;const r=wt.parent&&wt.parent.provides;r===n&&(n=wt.provides=Object.create(r)),n[t]=e}}function nt(t,e,n=!1){const r=wt||_n;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&fe(e)?e.call(r.proxy):e}}function am(t,e){return iy(t,null,e)}const AE={};function Xi(t,e,n){return iy(t,e,n)}function iy(t,e,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=Ke){const a=wt;let c,l=!1,u=!1;if(It(t)?(c=()=>t.value,l=zh(t)):aa(t)?(c=()=>t,r=!0):ce(t)?(u=!0,l=t.some(y=>aa(y)||zh(y)),c=()=>t.map(y=>{if(It(y))return y.value;if(aa(y))return ta(y);if(fe(y))return Gs(y,a,2)})):fe(t)?e?c=()=>Gs(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),ar(t,a,3,[d])}:c=_r,e&&r){const y=c;c=()=>ta(y())}let h,d=y=>{h=v.onStop=()=>{Gs(y,a,4)}};if(ka)return d=_r,e?n&&ar(e,a,3,[c(),u?[]:void 0,d]):c(),_r;let f=u?[]:AE;const p=()=>{if(!!v.active)if(e){const y=v.run();(r||l||(u?y.some((g,w)=>yl(g,f[w])):yl(y,f)))&&(h&&h(),ar(e,a,3,[y,f===AE?void 0:f,d]),f=y)}else v.run()};p.allowRecurse=!!e;let _;s==="sync"?_=p:s==="post"?_=()=>Ht(p,a&&a.suspense):(p.pre=!0,a&&(p.id=a.uid),_=()=>hf(p));const v=new G_(c,_);return e?n?p():f=v.run():s==="post"?Ht(v.run.bind(v),a&&a.suspense):v.run(),()=>{v.stop(),a&&a.scope&&q_(a.scope.effects,v)}}function R1(t,e,n){const r=this.proxy,s=mt(t)?t.includes(".")?F0(r,t):()=>r[t]:t.bind(r,r);let i;fe(e)?i=e:(i=e.handler,n=e);const o=wt;Ca(this);const a=iy(s,i.bind(r),n);return o?Ca(o):eo(),a}function F0(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function ta(t,e){if(!Ye(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),It(t))ta(t.value,e);else if(ce(t))for(let n=0;n<t.length;n++)ta(t[n],e);else if(a0(t)||oa(t))t.forEach(n=>{ta(n,e)});else if(u0(t))for(const n in t)ta(t[n],e);return t}function x1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return gu(()=>{t.isMounted=!0}),mu(()=>{t.isUnmounting=!0}),t}const Zn=[Function,Array],N1={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zn,onEnter:Zn,onAfterEnter:Zn,onEnterCancelled:Zn,onBeforeLeave:Zn,onLeave:Zn,onAfterLeave:Zn,onLeaveCancelled:Zn,onBeforeAppear:Zn,onAppear:Zn,onAfterAppear:Zn,onAppearCancelled:Zn},setup(t,{slots:e}){const n=ec(),r=x1();let s;return()=>{const i=e.default&&$0(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const _ of i)if(_.type!==bn){o=_;break}}const a=Ne(t),{mode:c}=a;if(r.isLeaving)return Wp(o);const l=RE(o);if(!l)return Wp(o);const u=cm(l,a,r,n);Xh(l,u);const h=n.subTree,d=h&&RE(h);let f=!1;const{getTransitionKey:p}=l.type;if(p){const _=p();s===void 0?s=_:_!==s&&(s=_,f=!0)}if(d&&d.type!==bn&&(!Ar(l,d)||f)){const _=cm(d,a,r,n);if(Xh(d,_),c==="out-in")return r.isLeaving=!0,_.afterLeave=()=>{r.isLeaving=!1,n.update()},Wp(o);c==="in-out"&&l.type!==bn&&(_.delayLeave=(v,y,g)=>{const w=B0(r,d);w[String(d.key)]=d,v._leaveCb=()=>{y(),v._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=g})}return o}}},U0=N1;function B0(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function cm(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:_,onAppear:v,onAfterAppear:y,onAppearCancelled:g}=e,w=String(t.key),I=B0(n,t),k=(A,K)=>{A&&ar(A,r,9,K)},x=(A,K)=>{const Q=K[1];k(A,K),ce(A)?A.every(X=>X.length<=1)&&Q():A.length<=1&&Q()},$={mode:i,persisted:o,beforeEnter(A){let K=a;if(!n.isMounted)if(s)K=_||a;else return;A._leaveCb&&A._leaveCb(!0);const Q=I[w];Q&&Ar(t,Q)&&Q.el._leaveCb&&Q.el._leaveCb(),k(K,[A])},enter(A){let K=c,Q=l,X=u;if(!n.isMounted)if(s)K=v||c,Q=y||l,X=g||u;else return;let W=!1;const le=A._enterCb=G=>{W||(W=!0,G?k(X,[A]):k(Q,[A]),$.delayedLeave&&$.delayedLeave(),A._enterCb=void 0)};K?x(K,[A,le]):le()},leave(A,K){const Q=String(t.key);if(A._enterCb&&A._enterCb(!0),n.isUnmounting)return K();k(h,[A]);let X=!1;const W=A._leaveCb=le=>{X||(X=!0,K(),le?k(p,[A]):k(f,[A]),A._leaveCb=void 0,I[Q]===t&&delete I[Q])};I[Q]=t,d?x(d,[A,W]):W()},clone(A){return cm(A,e,n,r)}};return $}function Wp(t){if(pu(t))return t=ms(t),t.children=null,t}function RE(t){return pu(t)?t.children?t.children[0]:void 0:t}function Xh(t,e){t.shapeFlag&6&&t.component?Xh(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function $0(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Nn?(o.patchFlag&128&&s++,r=r.concat($0(o.children,e,a))):(e||o.type!==bn)&&r.push(a!=null?ms(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function yt(t){return fe(t)?{setup:t,name:t.name}:t}const Ji=t=>!!t.type.__asyncLoader;function P1(t){fe(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,timeout:i,suspensible:o=!0,onError:a}=t;let c=null,l,u=0;const h=()=>(u++,c=null,d()),d=()=>{let f;return c||(f=c=e().catch(p=>{if(p=p instanceof Error?p:new Error(String(p)),a)return new Promise((_,v)=>{a(p,()=>_(h()),()=>v(p),u+1)});throw p}).then(p=>f!==c&&c?c:(p&&(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),l=p,p)))};return yt({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return l},setup(){const f=wt;if(l)return()=>zp(l,f);const p=g=>{c=null,Za(g,f,13,!r)};if(o&&f.suspense||ka)return d().then(g=>()=>zp(g,f)).catch(g=>(p(g),()=>r?rt(r,{error:g}):null));const _=xe(!1),v=xe(),y=xe(!!s);return s&&setTimeout(()=>{y.value=!1},s),i!=null&&setTimeout(()=>{if(!_.value&&!v.value){const g=new Error(`Async component timed out after ${i}ms.`);p(g),v.value=g}},i),d().then(()=>{_.value=!0,f.parent&&pu(f.parent.vnode)&&hf(f.parent.update)}).catch(g=>{p(g),v.value=g}),()=>{if(_.value&&l)return zp(l,f);if(v.value&&r)return rt(r,{error:v.value});if(n&&!y.value)return rt(n)}}})}function zp(t,{vnode:{ref:e,props:n,children:r,shapeFlag:s},parent:i}){const o=rt(t,n,r);return o.ref=e,o}const pu=t=>t.type.__isKeepAlive,D1={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=ec(),r=n.ctx;if(!r.renderer)return()=>{const g=e.default&&e.default();return g&&g.length===1?g[0]:g};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:h}}}=r,d=h("div");r.activate=(g,w,I,k,x)=>{const $=g.component;l(g,w,I,0,a),c($.vnode,g,w,I,$,a,k,g.slotScopeIds,x),Ht(()=>{$.isDeactivated=!1,$.a&&Xc($.a);const A=g.props&&g.props.onVnodeMounted;A&&An(A,$.parent,g)},a)},r.deactivate=g=>{const w=g.component;l(g,d,null,1,a),Ht(()=>{w.da&&Xc(w.da);const I=g.props&&g.props.onVnodeUnmounted;I&&An(I,w.parent,g),w.isDeactivated=!0},a)};function f(g){Gp(g),u(g,n,a,!0)}function p(g){s.forEach((w,I)=>{const k=pm(w.type);k&&(!g||!g(k))&&_(I)})}function _(g){const w=s.get(g);!o||w.type!==o.type?f(w):o&&Gp(o),s.delete(g),i.delete(g)}Xi(()=>[t.include,t.exclude],([g,w])=>{g&&p(I=>jc(g,I)),w&&p(I=>!jc(w,I))},{flush:"post",deep:!0});let v=null;const y=()=>{v!=null&&s.set(v,Qp(n.subTree))};return gu(y),j0(y),mu(()=>{s.forEach(g=>{const{subTree:w,suspense:I}=n,k=Qp(w);if(g.type===k.type){Gp(k);const x=k.component.da;x&&Ht(x,I);return}f(g)})}),()=>{if(v=null,!e.default)return null;const g=e.default(),w=g[0];if(g.length>1)return o=null,g;if(!Sa(w)||!(w.shapeFlag&4)&&!(w.shapeFlag&128))return o=null,w;let I=Qp(w);const k=I.type,x=pm(Ji(I)?I.type.__asyncResolved||{}:k),{include:$,exclude:A,max:K}=t;if($&&(!x||!jc($,x))||A&&x&&jc(A,x))return o=I,w;const Q=I.key==null?k:I.key,X=s.get(Q);return I.el&&(I=ms(I),w.shapeFlag&128&&(w.ssContent=I)),v=Q,X?(I.el=X.el,I.component=X.component,I.transition&&Xh(I,I.transition),I.shapeFlag|=512,i.delete(Q),i.add(Q)):(i.add(Q),K&&i.size>parseInt(K,10)&&_(i.values().next().value)),I.shapeFlag|=256,o=I,O0(w.type)?w:I}}},O1=D1;function jc(t,e){return ce(t)?t.some(n=>jc(n,e)):mt(t)?t.split(",").includes(e):t.test?t.test(e):!1}function M1(t,e){V0(t,"a",e)}function L1(t,e){V0(t,"da",e)}function V0(t,e,n=wt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(pf(e,r,n),n){let s=n.parent;for(;s&&s.parent;)pu(s.parent.vnode)&&F1(r,e,n,s),s=s.parent}}function F1(t,e,n,r){const s=pf(e,t,r,!0);oy(()=>{q_(r[e],s)},n)}function Gp(t){let e=t.shapeFlag;e&256&&(e-=256),e&512&&(e-=512),t.shapeFlag=e}function Qp(t){return t.shapeFlag&128?t.ssContent:t}function pf(t,e,n=wt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Xa(),Ca(n);const a=ar(e,n,t,o);return eo(),Ja(),a});return r?s.unshift(i):s.push(i),i}}const Es=t=>(e,n=wt)=>(!ka||t==="sp")&&pf(t,e,n),U1=Es("bm"),gu=Es("m"),B1=Es("bu"),j0=Es("u"),mu=Es("bum"),oy=Es("um"),$1=Es("sp"),V1=Es("rtg"),j1=Es("rtc");function q0(t,e=wt){pf("ec",t,e)}function Cr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Xa(),ar(c,n,8,[t.el,a,t,e]),Ja())}}const H0="components";function ay(t,e){return H1(H0,t,!0,e)||t}const q1=Symbol();function H1(t,e,n=!0,r=!1){const s=_n||wt;if(s){const i=s.type;if(t===H0){const a=pm(i,!1);if(a&&(a===e||a===qr(e)||a===cf(qr(e))))return i}const o=xE(s[t]||i[t],e)||xE(s.appContext[t],e);return!o&&r?i:o}}function xE(t,e){return t&&(t[e]||t[qr(e)]||t[cf(qr(e))])}function see(t,e,n,r){let s;const i=n&&n[r];if(ce(t)||mt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(Ye(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=e(t[l],l,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function iee(t,e,n={},r,s){if(_n.isCE||_n.parent&&Ji(_n.parent)&&_n.parent.isCE)return rt("slot",e==="default"?null:{name:e},r&&r());let i=t[e];i&&i._c&&(i._d=!1),Zi();const o=i&&K0(i(n)),a=ua(Nn,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function K0(t){return t.some(e=>Sa(e)?!(e.type===bn||e.type===Nn&&!K0(e.children)):!0)?t:null}const lm=t=>t?oC(t)?hy(t)||t.proxy:lm(t.parent):null,Jh=Xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>lm(t.parent),$root:t=>lm(t.root),$emit:t=>t.emit,$options:t=>cy(t),$forceUpdate:t=>t.f||(t.f=()=>hf(t.update)),$nextTick:t=>t.n||(t.n=uf.bind(t.proxy)),$watch:t=>R1.bind(t)}),K1={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(r!==Ke&&Ie(r,e))return o[e]=1,r[e];if(s!==Ke&&Ie(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&Ie(l,e))return o[e]=3,i[e];if(n!==Ke&&Ie(n,e))return o[e]=4,n[e];um&&(o[e]=0)}}const u=Jh[e];let h,d;if(u)return e==="$attrs"&&zn(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ke&&Ie(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Ie(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return s!==Ke&&Ie(s,e)?(s[e]=n,!0):r!==Ke&&Ie(r,e)?(r[e]=n,!0):Ie(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Ke&&Ie(t,o)||e!==Ke&&Ie(e,o)||(a=i[0])&&Ie(a,o)||Ie(r,o)||Ie(Jh,o)||Ie(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ie(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let um=!0;function W1(t){const e=cy(t),n=t.proxy,r=t.ctx;um=!1,e.beforeCreate&&NE(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:_,deactivated:v,beforeDestroy:y,beforeUnmount:g,destroyed:w,unmounted:I,render:k,renderTracked:x,renderTriggered:$,errorCaptured:A,serverPrefetch:K,expose:Q,inheritAttrs:X,components:W,directives:le,filters:G}=e;if(l&&z1(l,r,null,t.appContext.config.unwrapInjectedRef),o)for(const Le in o){const Pe=o[Le];fe(Pe)&&(r[Le]=Pe.bind(n))}if(s){const Le=s.call(n,n);Ye(Le)&&(t.data=En(Le))}if(um=!0,i)for(const Le in i){const Pe=i[Le],tn=fe(Pe)?Pe.bind(n,n):fe(Pe.get)?Pe.get.bind(n,n):_r,Zr=!fe(Pe)&&fe(Pe.set)?Pe.set.bind(n):_r,Jn=at({get:tn,set:Zr});Object.defineProperty(r,Le,{enumerable:!0,configurable:!0,get:()=>Jn.value,set:$n=>Jn.value=$n})}if(a)for(const Le in a)W0(a[Le],r,n,Le);if(c){const Le=fe(c)?c.call(n):c;Reflect.ownKeys(Le).forEach(Pe=>{fn(Pe,Le[Pe])})}u&&NE(u,t,"c");function Ee(Le,Pe){ce(Pe)?Pe.forEach(tn=>Le(tn.bind(n))):Pe&&Le(Pe.bind(n))}if(Ee(U1,h),Ee(gu,d),Ee(B1,f),Ee(j0,p),Ee(M1,_),Ee(L1,v),Ee(q0,A),Ee(j1,x),Ee(V1,$),Ee(mu,g),Ee(oy,I),Ee($1,K),ce(Q))if(Q.length){const Le=t.exposed||(t.exposed={});Q.forEach(Pe=>{Object.defineProperty(Le,Pe,{get:()=>n[Pe],set:tn=>n[Pe]=tn})})}else t.exposed||(t.exposed={});k&&t.render===_r&&(t.render=k),X!=null&&(t.inheritAttrs=X),W&&(t.components=W),le&&(t.directives=le)}function z1(t,e,n=_r,r=!1){ce(t)&&(t=hm(t));for(const s in t){const i=t[s];let o;Ye(i)?"default"in i?o=nt(i.from||s,i.default,!0):o=nt(i.from||s):o=nt(i),It(o)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function NE(t,e,n){ar(ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function W0(t,e,n,r){const s=r.includes(".")?F0(n,r):()=>n[r];if(mt(t)){const i=e[t];fe(i)&&Xi(s,i)}else if(fe(t))Xi(s,t.bind(n));else if(Ye(t))if(ce(t))t.forEach(i=>W0(i,e,n,r));else{const i=fe(t.handler)?t.handler.bind(n):e[t.handler];fe(i)&&Xi(s,i,t)}}function cy(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(l=>Zh(c,l,o,!0)),Zh(c,e,o)),Ye(e)&&i.set(e,c),c}function Zh(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Zh(t,i,n,!0),s&&s.forEach(o=>Zh(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=G1[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const G1={data:PE,props:Ni,emits:Ni,methods:Ni,computed:Ni,beforeCreate:hn,created:hn,beforeMount:hn,mounted:hn,beforeUpdate:hn,updated:hn,beforeDestroy:hn,beforeUnmount:hn,destroyed:hn,unmounted:hn,activated:hn,deactivated:hn,errorCaptured:hn,serverPrefetch:hn,components:Ni,directives:Ni,watch:Y1,provide:PE,inject:Q1};function PE(t,e){return e?t?function(){return Xt(fe(t)?t.call(this,this):t,fe(e)?e.call(this,this):e)}:e:t}function Q1(t,e){return Ni(hm(t),hm(e))}function hm(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function hn(t,e){return t?[...new Set([].concat(t,e))]:e}function Ni(t,e){return t?Xt(Xt(Object.create(null),t),e):e}function Y1(t,e){if(!t)return e;if(!e)return t;const n=Xt(Object.create(null),t);for(const r in e)n[r]=hn(t[r],e[r]);return n}function X1(t,e,n,r=!1){const s={},i={};Wh(i,gf,1),t.propsDefaults=Object.create(null),z0(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:l1(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function J1(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ne(s),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(df(t.emitsOptions,d))continue;const f=e[d];if(c)if(Ie(i,d))f!==i[d]&&(i[d]=f,l=!0);else{const p=qr(d);s[p]=dm(c,a,p,f,t,!1)}else f!==i[d]&&(i[d]=f,l=!0)}}}else{z0(t,e,s,i)&&(l=!0);let u;for(const h in a)(!e||!Ie(e,h)&&((u=Ya(h))===h||!Ie(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=dm(c,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!Ie(e,h)&&!0)&&(delete i[h],l=!0)}l&&gs(t,"set","$attrs")}function z0(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Yc(c))continue;const l=e[c];let u;s&&Ie(s,u=qr(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:df(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Ne(n),l=a||Ke;for(let u=0;u<i.length;u++){const h=i[u];n[h]=dm(s,c,h,l[h],t,!Ie(l,h))}}return o}function dm(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ie(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&fe(c)){const{propsDefaults:l}=s;n in l?r=l[n]:(Ca(s),r=l[n]=c.call(null,e),eo())}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Ya(n))&&(r=!0))}return r}function G0(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!fe(t)){const u=h=>{c=!0;const[d,f]=G0(h,e,!0);Xt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return Ye(t)&&r.set(t,ia),ia;if(ce(i))for(let u=0;u<i.length;u++){const h=qr(i[u]);DE(h)&&(o[h]=Ke)}else if(i)for(const u in i){const h=qr(u);if(DE(h)){const d=i[u],f=o[h]=ce(d)||fe(d)?{type:d}:d;if(f){const p=LE(Boolean,f.type),_=LE(String,f.type);f[0]=p>-1,f[1]=_<0||p<_,(p>-1||Ie(f,"default"))&&a.push(h)}}}const l=[o,a];return Ye(t)&&r.set(t,l),l}function DE(t){return t[0]!=="$"}function OE(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function ME(t,e){return OE(t)===OE(e)}function LE(t,e){return ce(e)?e.findIndex(n=>ME(n,t)):fe(e)&&ME(e,t)?0:-1}const Q0=t=>t[0]==="_"||t==="$stable",ly=t=>ce(t)?t.map(er):[er(t)],Z1=(t,e,n)=>{if(e._n)return e;const r=ny((...s)=>ly(e(...s)),n);return r._c=!1,r},Y0=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Q0(s))continue;const i=t[s];if(fe(i))e[s]=Z1(s,i,r);else if(i!=null){const o=ly(i);e[s]=()=>o}}},X0=(t,e)=>{const n=ly(e);t.slots.default=()=>n},eM=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ne(e),Wh(e,"_",n)):Y0(e,t.slots={})}else t.slots={},e&&X0(t,e);Wh(t.slots,gf,1)},tM=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ke;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(Xt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Y0(e,s)),o=e}else e&&(X0(t,e),o={default:1});if(i)for(const a in s)!Q0(a)&&!(a in o)&&delete s[a]};function J0(){return{app:null,config:{isNativeTag:RO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nM=0;function rM(t,e){return function(r,s=null){fe(r)||(r=Object.assign({},r)),s!=null&&!Ye(s)&&(s=null);const i=J0(),o=new Set;let a=!1;const c=i.app={_uid:nM++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:wM,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&fe(l.install)?(o.add(l),l.install(c,...u)):fe(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const d=rt(r,s);return d.appContext=i,u&&e?e(d,l):t(d,l,h),a=!0,c._container=l,l.__vue_app__=c,hy(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c}};return c}}function ed(t,e,n,r,s=!1){if(ce(t)){t.forEach((d,f)=>ed(d,e&&(ce(e)?e[f]:e),n,r,s));return}if(Ji(r)&&!s)return;const i=r.shapeFlag&4?hy(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===Ke?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(mt(l)?(u[l]=null,Ie(h,l)&&(h[l]=null)):It(l)&&(l.value=null)),fe(c))Gs(c,a,12,[o,u]);else{const d=mt(c),f=It(c);if(d||f){const p=()=>{if(t.f){const _=d?u[c]:c.value;s?ce(_)&&q_(_,i):ce(_)?_.includes(i)||_.push(i):d?(u[c]=[i],Ie(h,c)&&(h[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else d?(u[c]=o,Ie(h,c)&&(h[c]=o)):f&&(c.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Ht(p,n)):p()}}}let xs=!1;const oh=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",ah=t=>t.nodeType===8;function sM(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:l}}=t,u=(y,g)=>{if(!g.hasChildNodes()){n(null,y,g),Qh(),g._vnode=y;return}xs=!1,h(g.firstChild,y,null,null,null),Qh(),g._vnode=y,xs&&console.error("Hydration completed but contains mismatches.")},h=(y,g,w,I,k,x=!1)=>{const $=ah(y)&&y.data==="[",A=()=>_(y,g,w,I,k,$),{type:K,ref:Q,shapeFlag:X,patchFlag:W}=g,le=y.nodeType;g.el=y,W===-2&&(x=!1,g.dynamicChildren=null);let G=null;switch(K){case Il:le!==3?g.children===""?(c(g.el=s(""),o(y),y),G=y):G=A():(y.data!==g.children&&(xs=!0,y.data=g.children),G=i(y));break;case bn:le!==8||$?G=A():G=i(y);break;case Jc:if(le!==1&&le!==3)G=A();else{G=y;const dt=!g.children.length;for(let Ee=0;Ee<g.staticCount;Ee++)dt&&(g.children+=G.nodeType===1?G.outerHTML:G.data),Ee===g.staticCount-1&&(g.anchor=G),G=i(G);return G}break;case Nn:$?G=p(y,g,w,I,k,x):G=A();break;default:if(X&1)le!==1||g.type.toLowerCase()!==y.tagName.toLowerCase()?G=A():G=d(y,g,w,I,k,x);else if(X&6){g.slotScopeIds=k;const dt=o(y);if(e(g,dt,null,w,I,oh(dt),x),G=$?v(y):i(y),G&&ah(G)&&G.data==="teleport end"&&(G=i(G)),Ji(g)){let Ee;$?(Ee=rt(Nn),Ee.anchor=G?G.previousSibling:dt.lastChild):Ee=y.nodeType===3?iC(""):rt("div"),Ee.el=y,g.component.subTree=Ee}}else X&64?le!==8?G=A():G=g.type.hydrate(y,g,w,I,k,x,t,f):X&128&&(G=g.type.hydrate(y,g,w,I,oh(o(y)),k,x,t,h))}return Q!=null&&ed(Q,null,I,g),G},d=(y,g,w,I,k,x)=>{x=x||!!g.dynamicChildren;const{type:$,props:A,patchFlag:K,shapeFlag:Q,dirs:X}=g,W=$==="input"&&X||$==="option";if(W||K!==-1){if(X&&Cr(g,null,w,"created"),A)if(W||!x||K&48)for(const G in A)(W&&G.endsWith("value")||fu(G)&&!Yc(G))&&r(y,G,null,A[G],!1,void 0,w);else A.onClick&&r(y,"onClick",null,A.onClick,!1,void 0,w);let le;if((le=A&&A.onVnodeBeforeMount)&&An(le,w,g),X&&Cr(g,null,w,"beforeMount"),((le=A&&A.onVnodeMounted)||X)&&L0(()=>{le&&An(le,w,g),X&&Cr(g,null,w,"mounted")},I),Q&16&&!(A&&(A.innerHTML||A.textContent))){let G=f(y.firstChild,g,y,w,I,k,x);for(;G;){xs=!0;const dt=G;G=G.nextSibling,a(dt)}}else Q&8&&y.textContent!==g.children&&(xs=!0,y.textContent=g.children)}return y.nextSibling},f=(y,g,w,I,k,x,$)=>{$=$||!!g.dynamicChildren;const A=g.children,K=A.length;for(let Q=0;Q<K;Q++){const X=$?A[Q]:A[Q]=er(A[Q]);if(y)y=h(y,X,I,k,x,$);else{if(X.type===Il&&!X.children)continue;xs=!0,n(null,X,w,null,I,k,oh(w),x)}}return y},p=(y,g,w,I,k,x)=>{const{slotScopeIds:$}=g;$&&(k=k?k.concat($):$);const A=o(y),K=f(i(y),g,A,w,I,k,x);return K&&ah(K)&&K.data==="]"?i(g.anchor=K):(xs=!0,c(g.anchor=l("]"),A,K),K)},_=(y,g,w,I,k,x)=>{if(xs=!0,g.el=null,x){const K=v(y);for(;;){const Q=i(y);if(Q&&Q!==K)a(Q);else break}}const $=i(y),A=o(y);return a(y),n(null,g,A,$,w,I,oh(A),k),$},v=y=>{let g=0;for(;y;)if(y=i(y),y&&ah(y)&&(y.data==="["&&g++,y.data==="]")){if(g===0)return i(y);g--}return y};return[u,h]}const Ht=L0;function iM(t){return Z0(t)}function oM(t){return Z0(t,sM)}function Z0(t,e){const n=MO();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=_r,cloneNode:p,insertStaticContent:_}=t,v=(m,E,S,N=null,b=null,P=null,j=!1,L=null,V=!!E.dynamicChildren)=>{if(m===E)return;m&&!Ar(m,E)&&(N=ee(m),Ct(m,b,P,!0),m=null),E.patchFlag===-2&&(V=!1,E.dynamicChildren=null);const{type:M,ref:ne,shapeFlag:Z}=E;switch(M){case Il:y(m,E,S,N);break;case bn:g(m,E,S,N);break;case Jc:m==null&&w(E,S,N,j);break;case Nn:le(m,E,S,N,b,P,j,L,V);break;default:Z&1?x(m,E,S,N,b,P,j,L,V):Z&6?G(m,E,S,N,b,P,j,L,V):(Z&64||Z&128)&&M.process(m,E,S,N,b,P,j,L,V,Oe)}ne!=null&&b&&ed(ne,m&&m.ref,P,E||m,!E)},y=(m,E,S,N)=>{if(m==null)r(E.el=a(E.children),S,N);else{const b=E.el=m.el;E.children!==m.children&&l(b,E.children)}},g=(m,E,S,N)=>{m==null?r(E.el=c(E.children||""),S,N):E.el=m.el},w=(m,E,S,N)=>{[m.el,m.anchor]=_(m.children,E,S,N,m.el,m.anchor)},I=({el:m,anchor:E},S,N)=>{let b;for(;m&&m!==E;)b=d(m),r(m,S,N),m=b;r(E,S,N)},k=({el:m,anchor:E})=>{let S;for(;m&&m!==E;)S=d(m),s(m),m=S;s(E)},x=(m,E,S,N,b,P,j,L,V)=>{j=j||E.type==="svg",m==null?$(E,S,N,b,P,j,L,V):Q(m,E,b,P,j,L,V)},$=(m,E,S,N,b,P,j,L)=>{let V,M;const{type:ne,props:Z,shapeFlag:re,transition:de,patchFlag:Se,dirs:Ue}=m;if(m.el&&p!==void 0&&Se===-1)V=m.el=p(m.el);else{if(V=m.el=o(m.type,P,Z&&Z.is,Z),re&8?u(V,m.children):re&16&&K(m.children,V,null,N,b,P&&ne!=="foreignObject",j,L),Ue&&Cr(m,null,N,"created"),Z){for(const Ge in Z)Ge!=="value"&&!Yc(Ge)&&i(V,Ge,null,Z[Ge],P,m.children,N,b,q);"value"in Z&&i(V,"value",null,Z.value),(M=Z.onVnodeBeforeMount)&&An(M,N,m)}A(V,m,m.scopeId,j,N)}Ue&&Cr(m,null,N,"beforeMount");const Be=(!b||b&&!b.pendingBranch)&&de&&!de.persisted;Be&&de.beforeEnter(V),r(V,E,S),((M=Z&&Z.onVnodeMounted)||Be||Ue)&&Ht(()=>{M&&An(M,N,m),Be&&de.enter(V),Ue&&Cr(m,null,N,"mounted")},b)},A=(m,E,S,N,b)=>{if(S&&f(m,S),N)for(let P=0;P<N.length;P++)f(m,N[P]);if(b){let P=b.subTree;if(E===P){const j=b.vnode;A(m,j,j.scopeId,j.slotScopeIds,b.parent)}}},K=(m,E,S,N,b,P,j,L,V=0)=>{for(let M=V;M<m.length;M++){const ne=m[M]=L?Fs(m[M]):er(m[M]);v(null,ne,E,S,N,b,P,j,L)}},Q=(m,E,S,N,b,P,j)=>{const L=E.el=m.el;let{patchFlag:V,dynamicChildren:M,dirs:ne}=E;V|=m.patchFlag&16;const Z=m.props||Ke,re=E.props||Ke;let de;S&&Ci(S,!1),(de=re.onVnodeBeforeUpdate)&&An(de,S,E,m),ne&&Cr(E,m,S,"beforeUpdate"),S&&Ci(S,!0);const Se=b&&E.type!=="foreignObject";if(M?X(m.dynamicChildren,M,L,S,N,Se,P):j||tn(m,E,L,null,S,N,Se,P,!1),V>0){if(V&16)W(L,E,Z,re,S,N,b);else if(V&2&&Z.class!==re.class&&i(L,"class",null,re.class,b),V&4&&i(L,"style",Z.style,re.style,b),V&8){const Ue=E.dynamicProps;for(let Be=0;Be<Ue.length;Be++){const Ge=Ue[Be],hr=Z[Ge],Ho=re[Ge];(Ho!==hr||Ge==="value")&&i(L,Ge,hr,Ho,b,m.children,S,N,q)}}V&1&&m.children!==E.children&&u(L,E.children)}else!j&&M==null&&W(L,E,Z,re,S,N,b);((de=re.onVnodeUpdated)||ne)&&Ht(()=>{de&&An(de,S,E,m),ne&&Cr(E,m,S,"updated")},N)},X=(m,E,S,N,b,P,j)=>{for(let L=0;L<E.length;L++){const V=m[L],M=E[L],ne=V.el&&(V.type===Nn||!Ar(V,M)||V.shapeFlag&70)?h(V.el):S;v(V,M,ne,null,N,b,P,j,!0)}},W=(m,E,S,N,b,P,j)=>{if(S!==N){for(const L in N){if(Yc(L))continue;const V=N[L],M=S[L];V!==M&&L!=="value"&&i(m,L,M,V,j,E.children,b,P,q)}if(S!==Ke)for(const L in S)!Yc(L)&&!(L in N)&&i(m,L,S[L],null,j,E.children,b,P,q);"value"in N&&i(m,"value",S.value,N.value)}},le=(m,E,S,N,b,P,j,L,V)=>{const M=E.el=m?m.el:a(""),ne=E.anchor=m?m.anchor:a("");let{patchFlag:Z,dynamicChildren:re,slotScopeIds:de}=E;de&&(L=L?L.concat(de):de),m==null?(r(M,S,N),r(ne,S,N),K(E.children,S,ne,b,P,j,L,V)):Z>0&&Z&64&&re&&m.dynamicChildren?(X(m.dynamicChildren,re,S,b,P,j,L),(E.key!=null||b&&E===b.subTree)&&eC(m,E,!0)):tn(m,E,S,ne,b,P,j,L,V)},G=(m,E,S,N,b,P,j,L,V)=>{E.slotScopeIds=L,m==null?E.shapeFlag&512?b.ctx.activate(E,S,N,j,V):dt(E,S,N,b,P,j,V):Ee(m,E,V)},dt=(m,E,S,N,b,P,j)=>{const L=m.component=pM(m,N,b);if(pu(m)&&(L.ctx.renderer=Oe),gM(L),L.asyncDep){if(b&&b.registerDep(L,Le),!m.el){const V=L.subTree=rt(bn);g(null,V,E,S)}return}Le(L,m,E,S,b,P,j)},Ee=(m,E,S)=>{const N=E.component=m.component;if(I1(m,E,S))if(N.asyncDep&&!N.asyncResolved){Pe(N,E,S);return}else N.next=E,_1(N.update),N.update();else E.el=m.el,N.vnode=E},Le=(m,E,S,N,b,P,j)=>{const L=()=>{if(m.isMounted){let{next:ne,bu:Z,u:re,parent:de,vnode:Se}=m,Ue=ne,Be;Ci(m,!1),ne?(ne.el=Se.el,Pe(m,ne,j)):ne=Se,Z&&Xc(Z),(Be=ne.props&&ne.props.onVnodeBeforeUpdate)&&An(Be,de,ne,Se),Ci(m,!0);const Ge=Kp(m),hr=m.subTree;m.subTree=Ge,v(hr,Ge,h(hr.el),ee(hr),m,b,P),ne.el=Ge.el,Ue===null&&ry(m,Ge.el),re&&Ht(re,b),(Be=ne.props&&ne.props.onVnodeUpdated)&&Ht(()=>An(Be,de,ne,Se),b)}else{let ne;const{el:Z,props:re}=E,{bm:de,m:Se,parent:Ue}=m,Be=Ji(E);if(Ci(m,!1),de&&Xc(de),!Be&&(ne=re&&re.onVnodeBeforeMount)&&An(ne,Ue,E),Ci(m,!0),Z&&ue){const Ge=()=>{m.subTree=Kp(m),ue(Z,m.subTree,m,b,null)};Be?E.type.__asyncLoader().then(()=>!m.isUnmounted&&Ge()):Ge()}else{const Ge=m.subTree=Kp(m);v(null,Ge,S,N,m,b,P),E.el=Ge.el}if(Se&&Ht(Se,b),!Be&&(ne=re&&re.onVnodeMounted)){const Ge=E;Ht(()=>An(ne,Ue,Ge),b)}(E.shapeFlag&256||Ue&&Ji(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&m.a&&Ht(m.a,b),m.isMounted=!0,E=S=N=null}},V=m.effect=new G_(L,()=>hf(M),m.scope),M=m.update=()=>V.run();M.id=m.uid,Ci(m,!0),M()},Pe=(m,E,S)=>{E.component=m;const N=m.vnode.props;m.vnode=E,m.next=null,J1(m,E.props,N,S),tM(m,E.children,S),Xa(),SE(),Ja()},tn=(m,E,S,N,b,P,j,L,V=!1)=>{const M=m&&m.children,ne=m?m.shapeFlag:0,Z=E.children,{patchFlag:re,shapeFlag:de}=E;if(re>0){if(re&128){Jn(M,Z,S,N,b,P,j,L,V);return}else if(re&256){Zr(M,Z,S,N,b,P,j,L,V);return}}de&8?(ne&16&&q(M,b,P),Z!==M&&u(S,Z)):ne&16?de&16?Jn(M,Z,S,N,b,P,j,L,V):q(M,b,P,!0):(ne&8&&u(S,""),de&16&&K(Z,S,N,b,P,j,L,V))},Zr=(m,E,S,N,b,P,j,L,V)=>{m=m||ia,E=E||ia;const M=m.length,ne=E.length,Z=Math.min(M,ne);let re;for(re=0;re<Z;re++){const de=E[re]=V?Fs(E[re]):er(E[re]);v(m[re],de,S,null,b,P,j,L,V)}M>ne?q(m,b,P,!0,!1,Z):K(E,S,N,b,P,j,L,V,Z)},Jn=(m,E,S,N,b,P,j,L,V)=>{let M=0;const ne=E.length;let Z=m.length-1,re=ne-1;for(;M<=Z&&M<=re;){const de=m[M],Se=E[M]=V?Fs(E[M]):er(E[M]);if(Ar(de,Se))v(de,Se,S,null,b,P,j,L,V);else break;M++}for(;M<=Z&&M<=re;){const de=m[Z],Se=E[re]=V?Fs(E[re]):er(E[re]);if(Ar(de,Se))v(de,Se,S,null,b,P,j,L,V);else break;Z--,re--}if(M>Z){if(M<=re){const de=re+1,Se=de<ne?E[de].el:N;for(;M<=re;)v(null,E[M]=V?Fs(E[M]):er(E[M]),S,Se,b,P,j,L,V),M++}}else if(M>re)for(;M<=Z;)Ct(m[M],b,P,!0),M++;else{const de=M,Se=M,Ue=new Map;for(M=Se;M<=re;M++){const Vn=E[M]=V?Fs(E[M]):er(E[M]);Vn.key!=null&&Ue.set(Vn.key,M)}let Be,Ge=0;const hr=re-Se+1;let Ho=!1,pE=0;const Ic=new Array(hr);for(M=0;M<hr;M++)Ic[M]=0;for(M=de;M<=Z;M++){const Vn=m[M];if(Ge>=hr){Ct(Vn,b,P,!0);continue}let Tr;if(Vn.key!=null)Tr=Ue.get(Vn.key);else for(Be=Se;Be<=re;Be++)if(Ic[Be-Se]===0&&Ar(Vn,E[Be])){Tr=Be;break}Tr===void 0?Ct(Vn,b,P,!0):(Ic[Tr-Se]=M+1,Tr>=pE?pE=Tr:Ho=!0,v(Vn,E[Tr],S,null,b,P,j,L,V),Ge++)}const gE=Ho?aM(Ic):ia;for(Be=gE.length-1,M=hr-1;M>=0;M--){const Vn=Se+M,Tr=E[Vn],mE=Vn+1<ne?E[Vn+1].el:N;Ic[M]===0?v(null,Tr,S,mE,b,P,j,L,V):Ho&&(Be<0||M!==gE[Be]?$n(Tr,S,mE,2):Be--)}}},$n=(m,E,S,N,b=null)=>{const{el:P,type:j,transition:L,children:V,shapeFlag:M}=m;if(M&6){$n(m.component.subTree,E,S,N);return}if(M&128){m.suspense.move(E,S,N);return}if(M&64){j.move(m,E,S,Oe);return}if(j===Nn){r(P,E,S);for(let Z=0;Z<V.length;Z++)$n(V[Z],E,S,N);r(m.anchor,E,S);return}if(j===Jc){I(m,E,S);return}if(N!==2&&M&1&&L)if(N===0)L.beforeEnter(P),r(P,E,S),Ht(()=>L.enter(P),b);else{const{leave:Z,delayLeave:re,afterLeave:de}=L,Se=()=>r(P,E,S),Ue=()=>{Z(P,()=>{Se(),de&&de()})};re?re(P,Se,Ue):Ue()}else r(P,E,S)},Ct=(m,E,S,N=!1,b=!1)=>{const{type:P,props:j,ref:L,children:V,dynamicChildren:M,shapeFlag:ne,patchFlag:Z,dirs:re}=m;if(L!=null&&ed(L,null,S,m,!0),ne&256){E.ctx.deactivate(m);return}const de=ne&1&&re,Se=!Ji(m);let Ue;if(Se&&(Ue=j&&j.onVnodeBeforeUnmount)&&An(Ue,E,m),ne&6)J(m.component,S,N);else{if(ne&128){m.suspense.unmount(S,N);return}de&&Cr(m,null,E,"beforeUnmount"),ne&64?m.type.remove(m,E,S,b,Oe,N):M&&(P!==Nn||Z>0&&Z&64)?q(M,E,S,!1,!0):(P===Nn&&Z&384||!b&&ne&16)&&q(V,E,S),N&&Cn(m)}(Se&&(Ue=j&&j.onVnodeUnmounted)||de)&&Ht(()=>{Ue&&An(Ue,E,m),de&&Cr(m,null,E,"unmounted")},S)},Cn=m=>{const{type:E,el:S,anchor:N,transition:b}=m;if(E===Nn){R(S,N);return}if(E===Jc){k(m);return}const P=()=>{s(S),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(m.shapeFlag&1&&b&&!b.persisted){const{leave:j,delayLeave:L}=b,V=()=>j(S,P);L?L(m.el,P,V):V()}else P()},R=(m,E)=>{let S;for(;m!==E;)S=d(m),s(m),m=S;s(E)},J=(m,E,S)=>{const{bum:N,scope:b,update:P,subTree:j,um:L}=m;N&&Xc(N),b.stop(),P&&(P.active=!1,Ct(j,m,E,S)),L&&Ht(L,E),Ht(()=>{m.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},q=(m,E,S,N=!1,b=!1,P=0)=>{for(let j=P;j<m.length;j++)Ct(m[j],E,S,N,b)},ee=m=>m.shapeFlag&6?ee(m.component.subTree):m.shapeFlag&128?m.suspense.next():d(m.anchor||m.el),Re=(m,E,S)=>{m==null?E._vnode&&Ct(E._vnode,null,null,!0):v(E._vnode||null,m,E,null,null,null,S),SE(),Qh(),E._vnode=m},Oe={p:v,um:Ct,m:$n,r:Cn,mt:dt,mc:K,pc:tn,pbc:X,n:ee,o:t};let me,ue;return e&&([me,ue]=e(Oe)),{render:Re,hydrate:me,createApp:rM(Re,me)}}function Ci({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function eC(t,e,n=!1){const r=t.children,s=e.children;if(ce(r)&&ce(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Fs(s[i]),a.el=o.el),n||eC(o,a))}}function aM(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const cM=t=>t.__isTeleport,Nn=Symbol(void 0),Il=Symbol(void 0),bn=Symbol(void 0),Jc=Symbol(void 0),Zc=[];let nr=null;function Zi(t=!1){Zc.push(nr=t?null:[])}function tC(){Zc.pop(),nr=Zc[Zc.length-1]||null}let Ta=1;function FE(t){Ta+=t}function nC(t){return t.dynamicChildren=Ta>0?nr||ia:null,tC(),Ta>0&&nr&&nr.push(t),t}function oee(t,e,n,r,s,i){return nC(sC(t,e,n,r,s,i,!0))}function ua(t,e,n,r,s){return nC(rt(t,e,n,r,s,!0))}function Sa(t){return t?t.__v_isVNode===!0:!1}function Ar(t,e){return t.type===e.type&&t.key===e.key}const gf="__vInternal",rC=({key:t})=>t!=null?t:null,Dh=({ref:t,ref_key:e,ref_for:n})=>t!=null?mt(t)||It(t)||fe(t)?{i:_n,r:t,k:e,f:!!n}:t:null;function sC(t,e=null,n=null,r=0,s=null,i=t===Nn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&rC(e),ref:e&&Dh(e),scopeId:ff,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(uy(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=mt(n)?8:16),Ta>0&&!o&&nr&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&nr.push(c),c}const rt=lM;function lM(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===q1)&&(t=bn),Sa(t)){const a=ms(t,e,!0);return n&&uy(a,n),Ta>0&&!i&&nr&&(a.shapeFlag&6?nr[nr.indexOf(t)]=a:nr.push(a)),a.patchFlag|=-2,a}if(vM(t)&&(t=t.__vccOpts),e){e=uM(e);let{class:a,style:c}=e;a&&!mt(a)&&(e.class=sf(a)),Ye(c)&&(b0(c)&&!ce(c)&&(c=Xt({},c)),e.style=rf(c))}const o=mt(t)?1:O0(t)?128:cM(t)?64:Ye(t)?4:fe(t)?2:0;return sC(t,e,n,r,s,o,i,!0)}function uM(t){return t?b0(t)||gf in t?Xt({},t):t:null}function ms(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?hM(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&rC(a),ref:e&&e.ref?n&&s?ce(s)?s.concat(Dh(e)):[s,Dh(e)]:Dh(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Nn?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ms(t.ssContent),ssFallback:t.ssFallback&&ms(t.ssFallback),el:t.el,anchor:t.anchor}}function iC(t=" ",e=0){return rt(Il,null,t,e)}function aee(t,e){const n=rt(Jc,null,t);return n.staticCount=e,n}function cee(t="",e=!1){return e?(Zi(),ua(bn,null,t)):rt(bn,null,t)}function er(t){return t==null||typeof t=="boolean"?rt(bn):ce(t)?rt(Nn,null,t.slice()):typeof t=="object"?Fs(t):rt(Il,null,String(t))}function Fs(t){return t.el===null||t.memo?t:ms(t)}function uy(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ce(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),uy(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(gf in e)?e._ctx=_n:s===3&&_n&&(_n.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else fe(e)?(e={default:e,_ctx:_n},n=32):(e=String(e),r&64?(n=16,e=[iC(e)]):n=8);t.children=e,t.shapeFlag|=n}function hM(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=sf([e.class,r.class]));else if(s==="style")e.style=rf([e.style,r.style]);else if(fu(s)){const i=e[s],o=r[s];o&&i!==o&&!(ce(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function An(t,e,n,r=null){ar(t,e,7,[n,r])}const dM=J0();let fM=0;function pM(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||dM,i={uid:fM++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new LO(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:G0(r,s),emitsOptions:D0(r,s),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:r.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=v1.bind(null,i),t.ce&&t.ce(i),i}let wt=null;const ec=()=>wt||_n,Ca=t=>{wt=t,t.scope.on()},eo=()=>{wt&&wt.scope.off(),wt=null};function oC(t){return t.vnode.shapeFlag&4}let ka=!1;function gM(t,e=!1){ka=e;const{props:n,children:r}=t.vnode,s=oC(t);X1(t,n,s,e),eM(t,r);const i=s?mM(t,e):void 0;return ka=!1,i}function mM(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Z_(new Proxy(t.ctx,K1));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?yM(t):null;Ca(t),Xa();const i=Gs(r,t,0,[t.props,s]);if(Ja(),eo(),c0(i)){if(i.then(eo,eo),e)return i.then(o=>{fm(t,o,e)}).catch(o=>{Za(o,t,0)});t.asyncDep=i}else fm(t,i,e)}else aC(t,e)}function fm(t,e,n){fe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ye(e)&&(t.setupState=C0(e)),aC(t,n)}let UE;function aC(t,e,n){const r=t.type;if(!t.render){if(!e&&UE&&!r.render){const s=r.template||cy(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=r,l=Xt(Xt({isCustomElement:i,delimiters:a},o),c);r.render=UE(s,l)}}t.render=r.render||_r}Ca(t),Xa(),W1(t),Ja(),eo()}function _M(t){return new Proxy(t.attrs,{get(e,n){return zn(t,"get","$attrs"),e[n]}})}function yM(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=_M(t))},slots:t.slots,emit:t.emit,expose:e}}function hy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(C0(Z_(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Jh)return Jh[n](t)}}))}function pm(t,e=!0){return fe(t)?t.displayName||t.name:t.name||e&&t.__name}function vM(t){return fe(t)&&"__vccOpts"in t}const at=(t,e)=>p1(t,e,ka);function Ve(t,e,n){const r=arguments.length;return r===2?Ye(e)&&!ce(e)?Sa(e)?rt(t,null,[e]):rt(t,e):rt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Sa(n)&&(n=[n]),rt(t,e,n))}const wM="3.2.39",EM="http://www.w3.org/2000/svg",Fi=typeof document<"u"?document:null,BE=Fi&&Fi.createElement("template"),bM={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?Fi.createElementNS(EM,t):Fi.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Fi.createTextNode(t),createComment:t=>Fi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{BE.innerHTML=r?`<svg>${t}</svg>`:t;const a=BE.content;if(r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function IM(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function TM(t,e,n){const r=t.style,s=mt(n);if(n&&!s){for(const i in n)gm(r,i,n[i]);if(e&&!mt(e))for(const i in e)n[i]==null&&gm(r,i,"")}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const $E=/\s*!important$/;function gm(t,e,n){if(ce(n))n.forEach(r=>gm(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=SM(t,e);$E.test(n)?t.setProperty(Ya(r),n.replace($E,""),"important"):t[r]=n}}const VE=["Webkit","Moz","ms"],Yp={};function SM(t,e){const n=Yp[e];if(n)return n;let r=qr(e);if(r!=="filter"&&r in t)return Yp[e]=r;r=cf(r);for(let s=0;s<VE.length;s++){const i=VE[s]+r;if(i in t)return Yp[e]=i}return e}const jE="http://www.w3.org/1999/xlink";function CM(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(jE,e.slice(6,e.length)):t.setAttributeNS(jE,e,n);else{const i=SO(e);n==null||i&&!i0(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function kM(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n==null?"":n;(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=i0(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[cC,AM]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let mm=0;const RM=Promise.resolve(),xM=()=>{mm=0},NM=()=>mm||(RM.then(xM),mm=cC());function PM(t,e,n,r){t.addEventListener(e,n,r)}function DM(t,e,n,r){t.removeEventListener(e,n,r)}function OM(t,e,n,r,s=null){const i=t._vei||(t._vei={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=MM(e);if(r){const l=i[e]=LM(r,s);PM(t,a,l,c)}else o&&(DM(t,a,o,c),i[e]=void 0)}}const qE=/(?:Once|Passive|Capture)$/;function MM(t){let e;if(qE.test(t)){e={};let r;for(;r=t.match(qE);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ya(t.slice(2)),e]}function LM(t,e){const n=r=>{const s=r.timeStamp||cC();(AM||s>=n.attached-1)&&ar(FM(r,n.value),e,5,[r])};return n.value=t,n.attached=NM(),n}function FM(t,e){if(ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const HE=/^on[a-z]/,UM=(t,e,n,r,s=!1,i,o,a,c)=>{e==="class"?IM(t,r,s):e==="style"?TM(t,n,r):fu(e)?j_(e)||OM(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):BM(t,e,r,s))?kM(t,e,r,i,o,a,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),CM(t,e,r,s))};function BM(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&HE.test(e)&&fe(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||HE.test(e)&&mt(n)?!1:e in t}const Ns="transition",Tc="animation",mf=(t,{slots:e})=>Ve(U0,$M(t),e);mf.displayName="Transition";const lC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};mf.props=Xt({},U0.props,lC);const ki=(t,e=[])=>{ce(t)?t.forEach(n=>n(...e)):t&&t(...e)},KE=t=>t?ce(t)?t.some(e=>e.length>1):t.length>1:!1;function $M(t){const e={};for(const W in t)W in lC||(e[W]=t[W]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=VM(s),_=p&&p[0],v=p&&p[1],{onBeforeEnter:y,onEnter:g,onEnterCancelled:w,onLeave:I,onLeaveCancelled:k,onBeforeAppear:x=y,onAppear:$=g,onAppearCancelled:A=w}=e,K=(W,le,G)=>{Ai(W,le?u:a),Ai(W,le?l:o),G&&G()},Q=(W,le)=>{W._isLeaving=!1,Ai(W,h),Ai(W,f),Ai(W,d),le&&le()},X=W=>(le,G)=>{const dt=W?$:g,Ee=()=>K(le,W,G);ki(dt,[le,Ee]),WE(()=>{Ai(le,W?c:i),Ps(le,W?u:a),KE(dt)||zE(le,r,_,Ee)})};return Xt(e,{onBeforeEnter(W){ki(y,[W]),Ps(W,i),Ps(W,o)},onBeforeAppear(W){ki(x,[W]),Ps(W,c),Ps(W,l)},onEnter:X(!1),onAppear:X(!0),onLeave(W,le){W._isLeaving=!0;const G=()=>Q(W,le);Ps(W,h),HM(),Ps(W,d),WE(()=>{!W._isLeaving||(Ai(W,h),Ps(W,f),KE(I)||zE(W,r,v,G))}),ki(I,[W,G])},onEnterCancelled(W){K(W,!1),ki(w,[W])},onAppearCancelled(W){K(W,!0),ki(A,[W])},onLeaveCancelled(W){Q(W),ki(k,[W])}})}function VM(t){if(t==null)return null;if(Ye(t))return[Xp(t.enter),Xp(t.leave)];{const e=Xp(t);return[e,e]}}function Xp(t){return W_(t)}function Ps(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function Ai(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function WE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let jM=0;function zE(t,e,n,r){const s=t._endId=++jM,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=qM(t,e);if(!o)return r();const l=o+"end";let u=0;const h=()=>{t.removeEventListener(l,d),i()},d=f=>{f.target===t&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),t.addEventListener(l,d)}function qM(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),s=r(Ns+"Delay"),i=r(Ns+"Duration"),o=GE(s,i),a=r(Tc+"Delay"),c=r(Tc+"Duration"),l=GE(a,c);let u=null,h=0,d=0;e===Ns?o>0&&(u=Ns,h=o,d=i.length):e===Tc?l>0&&(u=Tc,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?Ns:Tc:null,d=u?u===Ns?i.length:c.length:0);const f=u===Ns&&/\b(transform|all)(,|$)/.test(n[Ns+"Property"]);return{type:u,timeout:h,propCount:d,hasTransform:f}}function GE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>QE(n)+QE(t[r])))}function QE(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function HM(){return document.body.offsetHeight}const KM=["ctrl","shift","alt","meta"],WM={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>KM.some(n=>t[`${n}Key`]&&!e.includes(n))},YE=(t,e)=>(n,...r)=>{for(let s=0;s<e.length;s++){const i=WM[e[s]];if(i&&i(n,e))return}return t(n,...r)},uC=Xt({patchProp:UM},bM);let el,XE=!1;function zM(){return el||(el=iM(uC))}function GM(){return el=XE?el:oM(uC),XE=!0,el}const QM=(...t)=>{const e=zM().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=hC(r);if(!s)return;const i=e._component;!fe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e},YM=(...t)=>{const e=GM().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=hC(r);if(s)return n(s,!0,s instanceof SVGElement)},e};function hC(t){return mt(t)?document.querySelector(t):t}const XM=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,JM=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ZM=/^["{[]|^-?[0-9][0-9.]{0,14}$/;function eL(t,e){if(!(t==="__proto__"||t==="constructor"))return e}function tL(t){if(typeof t!="string")return t;const e=t.toLowerCase();if(e==="true")return!0;if(e==="false")return!1;if(e==="null")return null;if(e==="nan")return NaN;if(e==="infinity")return 1/0;if(e!=="undefined"){if(!ZM.test(t))return t;try{return XM.test(t)||JM.test(t)?JSON.parse(t,eL):JSON.parse(t)}catch{return t}}}const nL=/#/g,rL=/&/g,sL=/=/g,dC=/\+/g,iL=/%5B/gi,oL=/%5D/gi,aL=/%5E/gi,cL=/%60/gi,lL=/%7B/gi,uL=/%7C/gi,hL=/%7D/gi,dL=/%20/gi;function fL(t){return encodeURI(""+t).replace(uL,"|").replace(iL,"[").replace(oL,"]")}function _m(t){return fL(t).replace(dC,"%2B").replace(dL,"+").replace(nL,"%23").replace(rL,"%26").replace(cL,"`").replace(lL,"{").replace(hL,"}").replace(aL,"^")}function Jp(t){return _m(t).replace(sL,"%3D")}function fC(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function pL(t){return fC(t.replace(dC," "))}function gL(t=""){const e={};t[0]==="?"&&(t=t.substr(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=fC(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=pL(r[2]||"");e[s]?Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]:e[s]=i}return e}function mL(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${Jp(t)}=${_m(n)}`).join("&"):`${Jp(t)}=${_m(e)}`:Jp(t)}function _L(t){return Object.keys(t).map(e=>mL(e,t[e])).join("&")}const yL=/^\w+:(\/\/)?/,vL=/^\/\/[^/]+/;function dy(t,e=!1){return yL.test(t)||e&&vL.test(t)}const wL=/\/$|\/\?/;function ym(t="",e=!1){return e?wL.test(t):t.endsWith("/")}function pC(t="",e=!1){if(!e)return(ym(t)?t.slice(0,-1):t)||"/";if(!ym(t,!0))return t||"/";const[n,...r]=t.split("?");return(n.slice(0,-1)||"/")+(r.length?`?${r.join("?")}`:"")}function EL(t="",e=!1){if(!e)return t.endsWith("/")?t:t+"/";if(ym(t,!0))return t||"/";const[n,...r]=t.split("?");return n+"/"+(r.length?`?${r.join("?")}`:"")}function bL(t=""){return t.startsWith("/")}function IL(t=""){return(bL(t)?t.substr(1):t)||"/"}function TL(t,e){if(gC(e))return t;const n=pC(e);return t.startsWith(n)?t:_f(n,t)}function JE(t,e){if(gC(e))return t;const n=pC(e);if(!t.startsWith(n))return t;const r=t.substring(n.length);return r[0]==="/"?r:"/"+r}function SL(t,e){const n=yf(t),r={...gL(n.search),...e};return n.search=_L(r),kL(n)}function gC(t){return!t||t==="/"}function CL(t){return t&&t!=="/"}function _f(t,...e){let n=t||"";for(const r of e.filter(CL))n=n?EL(n)+IL(r):r;return n}function yf(t="",e){if(!dy(t,!0))return e?yf(e+t):ZE(t);const[n="",r,s=""]=(t.replace(/\\/g,"/").match(/([^:/]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[i="",o=""]=(s.match(/([^/?#]*)(.*)?/)||[]).splice(1),{pathname:a,search:c,hash:l}=ZE(o);return{protocol:n,auth:r?r.substr(0,r.length-1):"",host:i,pathname:a,search:c,hash:l}}function ZE(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function kL(t){const e=t.pathname+(t.search?(t.search.startsWith("?")?"":"?")+t.search:"")+t.hash;return t.protocol?t.protocol+"//"+(t.auth?t.auth+"@":"")+t.host+e:e}class AL extends Error{constructor(){super(...arguments),this.name="FetchError"}}function RL(t,e,n){let r="";t&&n&&(r=`${n.status} ${n.statusText} (${t.toString()})`),e&&(r=`${e.message} (${r})`);const s=new AL(r);return Object.defineProperty(s,"request",{get(){return t}}),Object.defineProperty(s,"response",{get(){return n}}),Object.defineProperty(s,"data",{get(){return n&&n._data}}),s}const xL=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function eb(t="GET"){return xL.has(t.toUpperCase())}function NL(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const PL=new Set(["image/svg","application/xml","application/xhtml","application/html"]),DL=/^application\/(?:[\w!#$%&*`\-.^~]*\+)?json(;.+)?$/i;function OL(t=""){if(!t)return"json";const e=t.split(";").shift();return DL.test(e)?"json":PL.has(e)||e.startsWith("text/")?"text":"blob"}const ML=new Set([408,409,425,429,500,502,503,504]);function mC(t){const{fetch:e,Headers:n}=t;function r(o){const a=o.error&&o.error.name==="AbortError"||!1;if(o.options.retry!==!1&&!a){const l=typeof o.options.retry=="number"?o.options.retry:eb(o.options.method)?0:1,u=o.response&&o.response.status||500;if(l>0&&ML.has(u))return s(o.request,{...o.options,retry:l-1})}const c=RL(o.request,o.error,o.response);throw Error.captureStackTrace&&Error.captureStackTrace(c,s),c}const s=async function(a,c={}){const l={request:a,options:{...t.defaults,...c},response:void 0,error:void 0};l.options.onRequest&&await l.options.onRequest(l),typeof l.request=="string"&&(l.options.baseURL&&(l.request=TL(l.request,l.options.baseURL)),(l.options.query||l.options.params)&&(l.request=SL(l.request,{...l.options.params,...l.options.query})),l.options.body&&eb(l.options.method)&&NL(l.options.body)&&(l.options.body=typeof l.options.body=="string"?l.options.body:JSON.stringify(l.options.body),l.options.headers=new n(l.options.headers),l.options.headers.has("content-type")||l.options.headers.set("content-type","application/json"),l.options.headers.has("accept")||l.options.headers.set("accept","application/json"))),l.response=await e(l.request,l.options).catch(async h=>(l.error=h,l.options.onRequestError&&await l.options.onRequestError(l),r(l)));const u=(l.options.parseResponse?"json":l.options.responseType)||OL(l.response.headers.get("content-type")||"");if(u==="json"){const h=await l.response.text(),d=l.options.parseResponse||tL;l.response._data=d(h)}else u==="stream"?l.response._data=l.response.body:l.response._data=await l.response[u]();return l.options.onResponse&&await l.options.onResponse(l),l.response.ok||l.options.onResponseError&&await l.options.onResponseError(l),l.response.ok?l.response:r(l)},i=function(a,c){return s(a,c).then(l=>l._data)};return i.raw=s,i.create=(o={})=>mC({...t,defaults:{...t.defaults,...o}}),i}const _C=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),LL=_C.fetch||(()=>Promise.reject(new Error("[ohmyfetch] global.fetch is not supported!"))),FL=_C.Headers,UL=mC({fetch:LL,Headers:FL}),BL=()=>{var t;return((t=window==null?void 0:window.__NUXT__)==null?void 0:t.config)||{}},td=BL().app,$L=()=>td.baseURL,VL=()=>td.buildAssetsDir,jL=(...t)=>_f(yC(),VL(),...t),yC=(...t)=>{const e=td.cdnURL||td.baseURL;return t.length?_f(e,...t):e};globalThis.__buildAssetsURL=jL;globalThis.__publicAssetsURL=yC;function vm(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?vm(s,e,i):typeof s=="function"&&(e[i]=s)}return e}function qL(t,e){return t.reduce((n,r)=>n.then(()=>r.apply(void 0,e)),Promise.resolve(null))}function HL(t,e){return Promise.all(t.map(n=>n.apply(void 0,e)))}function Zp(t,e){for(const n of t)n(e)}class KL{constructor(){this._hooks={},this._before=null,this._after=null,this._deprecatedMessages=null,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=null)}}hookOnce(e,n){let r,s=(...i)=>(r(),r=null,s=null,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];this._hooks[e]=void 0;for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=vm(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{r.splice(0,r.length).forEach(s=>s())}}removeHooks(e){const n=vm(e);for(const r in n)this.removeHook(r,n[r])}callHook(e,...n){return this.callHookWith(qL,e,...n)}callHookParallel(e,...n){return this.callHookWith(HL,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&Zp(this._before,s);const i=e(this._hooks[n]||[],r);return i instanceof Promise?i.finally(()=>{this._after&&Zp(this._after,s)}):(this._after&&Zp(this._after,s),i)}beforeEach(e){this._before=this._before||[],this._before.push(e)}afterEach(e){this._after=this._after||[],this._after.push(e)}}function WL(){return new KL}function zL(){let t=null,e=!1;const n=r=>{if(t&&t!==r)throw new Error("Context conflict")};return{use:()=>{if(t==null)throw new Error("Context is not available");return t},tryUse:()=>t,set:(r,s)=>{s||n(r),t=r,e=!0},unset:()=>{t=null,e=!1},call:(r,s)=>{n(r),t=r;try{return s()}finally{e||(t=null)}},async callAsync(r,s){t=r;const i=()=>{t=r},o=()=>t===r?i:void 0;wm.add(o);try{const a=s();return e||(t=null),await a}finally{wm.delete(o)}}}}function GL(){const t={};return{get(e){return t[e]||(t[e]=zL()),t[e],t[e]}}}const nd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},tb="__unctx__",QL=nd[tb]||(nd[tb]=GL()),YL=t=>QL.get(t),nb="__unctx_async_handlers__",wm=nd[nb]||(nd[nb]=new Set);function XL(t){const e=[];for(const s of wm){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const vC=YL("nuxt-app"),JL="__nuxt_plugin";function ZL(t){const e={provide:void 0,globalName:"nuxt",payload:En({data:{},state:{},_errors:{},...window.__NUXT__}),isHydrating:!0,_asyncDataPromises:{},_asyncData:{},...t};e.hooks=WL(),e.hook=e.hooks.hook,e.callHook=e.hooks.callHook,e.provide=(s,i)=>{const o="$"+s;ch(e,o,i),ch(e.vueApp.config.globalProperties,o,i)},ch(e.vueApp,"$nuxt",e),ch(e.vueApp.config.globalProperties,"$nuxt",e);const n=En(e.payload.config),r=new Proxy(n,{get(s,i){var o;return i==="public"?s.public:(o=s[i])!=null?o:s.public[i]},set(s,i,o){return i==="public"||i==="app"?!1:(s[i]=o,s.public[i]=o,!0)}});return e.provide("config",r),e}async function eF(t,e){if(typeof e!="function")return;const{provide:n}=await Us(t,e,[t])||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}async function tF(t,e){for(const n of e)await eF(t,n)}function nF(t){return t.map(n=>typeof n!="function"?null:n.length>1?r=>n(r,r.provide):n).filter(Boolean)}function tc(t){return t[JL]=!0,t}function Us(t,e,n){const r=()=>n?e(...n):e();return vC.set(t),r()}function Jt(){const t=vC.tryUse();if(!t){const e=ec();if(!e)throw new Error("nuxt instance unavailable");return e.appContext.app.$nuxt}return t}function rF(){return Jt().$config}function ch(t,e,n){Object.defineProperty(t,e,{get:()=>n})}/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Jo=typeof window<"u";function sF(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Me=Object.assign;function eg(t,e){const n={};for(const r in e){const s=e[r];n[r]=wr(s)?s.map(t):t(s)}return n}const tl=()=>{},wr=Array.isArray,iF=/\/$/,oF=t=>t.replace(iF,"");function tg(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=uF(r!=null?r:e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function aF(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function rb(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function cF(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Aa(e.matched[r],n.matched[s])&&wC(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Aa(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function wC(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!lF(t[n],e[n]))return!1;return!0}function lF(t,e){return wr(t)?sb(t,e):wr(e)?sb(e,t):t===e}function sb(t,e){return wr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function uF(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s=n.length-1,i,o;for(i=0;i<r.length;i++)if(o=r[i],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var Tl;(function(t){t.pop="pop",t.push="push"})(Tl||(Tl={}));var nl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(nl||(nl={}));function hF(t){if(!t)if(Jo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),oF(t)}const dF=/^[^#]+#/;function fF(t,e){return t.replace(dF,"#")+e}function pF(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const vf=()=>({left:window.pageXOffset,top:window.pageYOffset});function gF(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=pF(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function ib(t,e){return(history.state?history.state.position-e:-1)+t}const Em=new Map;function mF(t,e){Em.set(t,e)}function _F(t){const e=Em.get(t);return Em.delete(t),e}let yF=()=>location.protocol+"//"+location.host;function EC(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),rb(c,"")}return rb(n,t)+r+s}function vF(t,e,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const f=EC(t,location),p=n.value,_=e.value;let v=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}v=_?d.position-_.position:0}else r(f);s.forEach(y=>{y(n.value,p,{delta:v,type:Tl.pop,direction:v?v>0?nl.forward:nl.back:nl.unknown})})};function c(){o=n.value}function l(d){s.push(d);const f=()=>{const p=s.indexOf(d);p>-1&&s.splice(p,1)};return i.push(f),f}function u(){const{history:d}=window;!d.state||d.replaceState(Me({},d.state,{scroll:vf()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:c,listen:l,destroy:h}}function ob(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?vf():null}}function wF(t){const{history:e,location:n}=window,r={value:EC(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:yF()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),s.value=l}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(c,l){const u=Me({},e.state,ob(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=Me({},s.value,e.state,{forward:c,scroll:vf()});i(u.current,u,!0);const h=Me({},ob(r.value,c,null),{position:u.position+1},l);i(c,h,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function bC(t){t=hF(t);const e=wF(t),n=vF(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Me({location:"",base:t,go:r,createHref:fF.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function EF(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),bC(t)}function bF(t){return typeof t=="string"||t&&typeof t=="object"}function IC(t){return typeof t=="string"||typeof t=="symbol"}const Ds={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},TC=Symbol("");var ab;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(ab||(ab={}));function Ra(t,e){return Me(new Error,{type:t,[TC]:!0},e)}function es(t,e){return t instanceof Error&&TC in t&&(e==null||!!(t.type&e))}const cb="[^/]+?",IF={sensitive:!1,strict:!1,start:!0,end:!0},TF=/[.+*?^${}()[\]/\\]/g;function SF(t,e){const n=Me({},IF,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let h=0;h<l.length;h++){const d=l[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(TF,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:_,optional:v,regexp:y}=d;i.push({name:p,repeatable:_,optional:v});const g=y||cb;if(g!==cb){f+=10;try{new RegExp(`(${g})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${p}" (${g}): `+I.message)}}let w=_?`((?:${g})(?:/(?:${g}))*)`:`(${g})`;h||(w=v&&l.length<2?`(?:/${w})`:"/"+w),v&&(w+="?"),s+=w,f+=20,v&&(f+=-8),_&&(f+=-20),g===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=i[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function c(l){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:_,optional:v}=f,y=p in l?l[p]:"";if(wr(y)&&!_)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const g=wr(y)?y.join("/"):y;if(!g)if(v)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=g}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function CF(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function kF(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=CF(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(lb(r))return 1;if(lb(s))return-1}return s.length-r.length}function lb(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const AF={type:0,value:""},RF=/[a-zA-Z0-9_]/;function xF(t){if(!t)return[[]];if(t==="/")return[[AF]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${l}": ${f}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function h(){!l||(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:RF.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),s}function NF(t,e,n){const r=SF(xF(t.path),n),s=Me(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function PF(t,e){const n=[],r=new Map;e=db({strict:!1,end:!0,sensitive:!1},e);function s(u){return r.get(u)}function i(u,h,d){const f=!d,p=DF(u);p.aliasOf=d&&d.record;const _=db(e,u),v=[p];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const I of w)v.push(Me({},p,{components:d?d.record.components:p.components,path:I,aliasOf:d?d.record:p}))}let y,g;for(const w of v){const{path:I}=w;if(h&&I[0]!=="/"){const k=h.record.path,x=k[k.length-1]==="/"?"":"/";w.path=h.record.path+(I&&x+I)}if(y=NF(w,h,_),d?d.alias.push(y):(g=g||y,g!==y&&g.alias.push(y),f&&u.name&&!hb(y)&&o(u.name)),p.children){const k=p.children;for(let x=0;x<k.length;x++)i(k[x],y,d&&d.children[x])}d=d||y,c(y)}return g?()=>{o(g)}:tl}function o(u){if(IC(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&kF(u,n[h])>=0&&(u.record.path!==n[h].record.path||!SC(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!hb(u)&&r.set(u.record.name,u)}function l(u,h){let d,f={},p,_;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Ra(1,{location:u});_=d.record.name,f=Me(ub(h.params,d.keys.filter(g=>!g.optional).map(g=>g.name)),u.params&&ub(u.params,d.keys.map(g=>g.name))),p=d.stringify(f)}else if("path"in u)p=u.path,d=n.find(g=>g.re.test(p)),d&&(f=d.parse(p),_=d.record.name);else{if(d=h.name?r.get(h.name):n.find(g=>g.re.test(h.path)),!d)throw Ra(1,{location:u,currentLocation:h});_=d.record.name,f=Me({},h.params,u.params),p=d.stringify(f)}const v=[];let y=d;for(;y;)v.unshift(y.record),y=y.parent;return{name:_,path:p,params:f,matched:v,meta:MF(v)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function ub(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function DF(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:OF(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function OF(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function hb(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function MF(t){return t.reduce((e,n)=>Me(e,n.meta),{})}function db(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function SC(t,e){return e.children.some(n=>n===t||SC(t,n))}const CC=/#/g,LF=/&/g,FF=/\//g,UF=/=/g,BF=/\?/g,kC=/\+/g,$F=/%5B/g,VF=/%5D/g,AC=/%5E/g,jF=/%60/g,RC=/%7B/g,qF=/%7C/g,xC=/%7D/g,HF=/%20/g;function fy(t){return encodeURI(""+t).replace(qF,"|").replace($F,"[").replace(VF,"]")}function KF(t){return fy(t).replace(RC,"{").replace(xC,"}").replace(AC,"^")}function bm(t){return fy(t).replace(kC,"%2B").replace(HF,"+").replace(CC,"%23").replace(LF,"%26").replace(jF,"`").replace(RC,"{").replace(xC,"}").replace(AC,"^")}function WF(t){return bm(t).replace(UF,"%3D")}function zF(t){return fy(t).replace(CC,"%23").replace(BF,"%3F")}function GF(t){return t==null?"":zF(t).replace(FF,"%2F")}function rd(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function QF(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(kC," "),o=i.indexOf("="),a=rd(o<0?i:i.slice(0,o)),c=o<0?null:rd(i.slice(o+1));if(a in e){let l=e[a];wr(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function fb(t){let e="";for(let n in t){const r=t[n];if(n=WF(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(wr(r)?r.map(i=>i&&bm(i)):[r&&bm(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function YF(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=wr(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const XF=Symbol(""),pb=Symbol(""),py=Symbol(""),NC=Symbol(""),Im=Symbol("");function Sc(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function Bs(t,e,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(Ra(4,{from:n,to:e})):h instanceof Error?a(h):bF(h)?a(Ra(2,{from:e,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},l=t.call(r&&r.instances[s],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function ng(t,e,n,r){const s=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(JF(a)){const l=(a.__vccOpts||a)[e];l&&s.push(Bs(l,n,r,i,o))}else{let c=a();s.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=sF(l)?l.default:l;i.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&Bs(d,n,r,i,o)()}))}}return s}function JF(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function gb(t){const e=nt(py),n=nt(NC),r=at(()=>e.resolve(mn(t.to))),s=at(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Aa.bind(null,u));if(d>-1)return d;const f=mb(c[l-2]);return l>1&&mb(u)===f&&h[h.length-1].path!==f?h.findIndex(Aa.bind(null,c[l-2])):d}),i=at(()=>s.value>-1&&nU(n.params,r.value.params)),o=at(()=>s.value>-1&&s.value===n.matched.length-1&&wC(n.params,r.value.params));function a(c={}){return tU(c)?e[mn(t.replace)?"replace":"push"](mn(t.to)).catch(tl):Promise.resolve()}return{route:r,href:at(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const ZF=yt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gb,setup(t,{slots:e}){const n=En(gb(t)),{options:r}=nt(py),s=at(()=>({[_b(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[_b(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Ve("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),eU=ZF;function tU(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function nU(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!wr(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function mb(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const _b=(t,e,n)=>t!=null?t:e!=null?e:n,rU=yt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=nt(Im),s=at(()=>t.route||r.value),i=nt(pb,0),o=at(()=>{let l=mn(i);const{matched:u}=s.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=at(()=>s.value.matched[o.value]);fn(pb,at(()=>o.value+1)),fn(XF,a),fn(Im,s);const c=xe();return Xi(()=>[c.value,a.value,t.name],([l,u,h],[d,f,p])=>{u&&(u.instances[h]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Aa(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(_=>_(l))},{flush:"post"}),()=>{const l=s.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return yb(n.default,{Component:d,route:l});const f=h.props[u],p=f?f===!0?l.params:typeof f=="function"?f(l):f:null,v=Ve(d,Me({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return yb(n.default,{Component:v,route:l})||v}}});function yb(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const PC=rU;function sU(t){const e=PF(t.routes,t),n=t.parseQuery||QF,r=t.stringifyQuery||fb,s=t.history,i=Sc(),o=Sc(),a=Sc(),c=Gh(Ds);let l=Ds;Jo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=eg.bind(null,R=>""+R),h=eg.bind(null,GF),d=eg.bind(null,rd);function f(R,J){let q,ee;return IC(R)?(q=e.getRecordMatcher(R),ee=J):ee=R,e.addRoute(ee,q)}function p(R){const J=e.getRecordMatcher(R);J&&e.removeRoute(J)}function _(){return e.getRoutes().map(R=>R.record)}function v(R){return!!e.getRecordMatcher(R)}function y(R,J){if(J=Me({},J||c.value),typeof R=="string"){const ue=tg(n,R,J.path),m=e.resolve({path:ue.path},J),E=s.createHref(ue.fullPath);return Me(ue,m,{params:d(m.params),hash:rd(ue.hash),redirectedFrom:void 0,href:E})}let q;if("path"in R)q=Me({},R,{path:tg(n,R.path,J.path).path});else{const ue=Me({},R.params);for(const m in ue)ue[m]==null&&delete ue[m];q=Me({},R,{params:h(R.params)}),J.params=h(J.params)}const ee=e.resolve(q,J),Re=R.hash||"";ee.params=u(d(ee.params));const Oe=aF(r,Me({},R,{hash:KF(Re),path:ee.path})),me=s.createHref(Oe);return Me({fullPath:Oe,hash:Re,query:r===fb?YF(R.query):R.query||{}},ee,{redirectedFrom:void 0,href:me})}function g(R){return typeof R=="string"?tg(n,R,c.value.path):Me({},R)}function w(R,J){if(l!==R)return Ra(8,{from:J,to:R})}function I(R){return $(R)}function k(R){return I(Me(g(R),{replace:!0}))}function x(R){const J=R.matched[R.matched.length-1];if(J&&J.redirect){const{redirect:q}=J;let ee=typeof q=="function"?q(R):q;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=g(ee):{path:ee},ee.params={}),Me({query:R.query,hash:R.hash,params:"path"in ee?{}:R.params},ee)}}function $(R,J){const q=l=y(R),ee=c.value,Re=R.state,Oe=R.force,me=R.replace===!0,ue=x(q);if(ue)return $(Me(g(ue),{state:typeof ue=="object"?Me({},Re,ue.state):Re,force:Oe,replace:me}),J||q);const m=q;m.redirectedFrom=J;let E;return!Oe&&cF(r,ee,q)&&(E=Ra(16,{to:m,from:ee}),Zr(ee,ee,!0,!1)),(E?Promise.resolve(E):K(m,ee)).catch(S=>es(S)?es(S,2)?S:tn(S):Le(S,m,ee)).then(S=>{if(S){if(es(S,2))return $(Me({replace:me},g(S.to),{state:typeof S.to=="object"?Me({},Re,S.to.state):Re,force:Oe}),J||m)}else S=X(m,ee,!0,me,Re);return Q(m,ee,S),S})}function A(R,J){const q=w(R,J);return q?Promise.reject(q):Promise.resolve()}function K(R,J){let q;const[ee,Re,Oe]=iU(R,J);q=ng(ee.reverse(),"beforeRouteLeave",R,J);for(const ue of ee)ue.leaveGuards.forEach(m=>{q.push(Bs(m,R,J))});const me=A.bind(null,R,J);return q.push(me),Ko(q).then(()=>{q=[];for(const ue of i.list())q.push(Bs(ue,R,J));return q.push(me),Ko(q)}).then(()=>{q=ng(Re,"beforeRouteUpdate",R,J);for(const ue of Re)ue.updateGuards.forEach(m=>{q.push(Bs(m,R,J))});return q.push(me),Ko(q)}).then(()=>{q=[];for(const ue of R.matched)if(ue.beforeEnter&&!J.matched.includes(ue))if(wr(ue.beforeEnter))for(const m of ue.beforeEnter)q.push(Bs(m,R,J));else q.push(Bs(ue.beforeEnter,R,J));return q.push(me),Ko(q)}).then(()=>(R.matched.forEach(ue=>ue.enterCallbacks={}),q=ng(Oe,"beforeRouteEnter",R,J),q.push(me),Ko(q))).then(()=>{q=[];for(const ue of o.list())q.push(Bs(ue,R,J));return q.push(me),Ko(q)}).catch(ue=>es(ue,8)?ue:Promise.reject(ue))}function Q(R,J,q){for(const ee of a.list())ee(R,J,q)}function X(R,J,q,ee,Re){const Oe=w(R,J);if(Oe)return Oe;const me=J===Ds,ue=Jo?history.state:{};q&&(ee||me?s.replace(R.fullPath,Me({scroll:me&&ue&&ue.scroll},Re)):s.push(R.fullPath,Re)),c.value=R,Zr(R,J,q,me),tn()}let W;function le(){W||(W=s.listen((R,J,q)=>{if(!Cn.listening)return;const ee=y(R),Re=x(ee);if(Re){$(Me(Re,{replace:!0}),ee).catch(tl);return}l=ee;const Oe=c.value;Jo&&mF(ib(Oe.fullPath,q.delta),vf()),K(ee,Oe).catch(me=>es(me,12)?me:es(me,2)?($(me.to,ee).then(ue=>{es(ue,20)&&!q.delta&&q.type===Tl.pop&&s.go(-1,!1)}).catch(tl),Promise.reject()):(q.delta&&s.go(-q.delta,!1),Le(me,ee,Oe))).then(me=>{me=me||X(ee,Oe,!1),me&&(q.delta&&!es(me,8)?s.go(-q.delta,!1):q.type===Tl.pop&&es(me,20)&&s.go(-1,!1)),Q(ee,Oe,me)}).catch(tl)}))}let G=Sc(),dt=Sc(),Ee;function Le(R,J,q){tn(R);const ee=dt.list();return ee.length?ee.forEach(Re=>Re(R,J,q)):console.error(R),Promise.reject(R)}function Pe(){return Ee&&c.value!==Ds?Promise.resolve():new Promise((R,J)=>{G.add([R,J])})}function tn(R){return Ee||(Ee=!R,le(),G.list().forEach(([J,q])=>R?q(R):J()),G.reset()),R}function Zr(R,J,q,ee){const{scrollBehavior:Re}=t;if(!Jo||!Re)return Promise.resolve();const Oe=!q&&_F(ib(R.fullPath,0))||(ee||!q)&&history.state&&history.state.scroll||null;return uf().then(()=>Re(R,J,Oe)).then(me=>me&&gF(me)).catch(me=>Le(me,R,J))}const Jn=R=>s.go(R);let $n;const Ct=new Set,Cn={currentRoute:c,listening:!0,addRoute:f,removeRoute:p,hasRoute:v,getRoutes:_,resolve:y,options:t,push:I,replace:k,go:Jn,back:()=>Jn(-1),forward:()=>Jn(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:dt.add,isReady:Pe,install(R){const J=this;R.component("RouterLink",eU),R.component("RouterView",PC),R.config.globalProperties.$router=J,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>mn(c)}),Jo&&!$n&&c.value===Ds&&($n=!0,I(s.location).catch(Re=>{}));const q={};for(const Re in Ds)q[Re]=at(()=>c.value[Re]);R.provide(py,J),R.provide(NC,En(q)),R.provide(Im,c);const ee=R.unmount;Ct.add(R),R.unmount=function(){Ct.delete(R),Ct.size<1&&(l=Ds,W&&W(),W=null,c.value=Ds,$n=!1,Ee=!1),ee()}}};return Cn}function Ko(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function iU(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>Aa(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Aa(l,c))||s.push(c))}return[n,r,s]}function DC(...t){const e=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(e);const[n,r]=t;if(!n||typeof n!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+n);if(r!==void 0&&typeof r!="function")throw new Error("[nuxt] [useState] init must be a function: "+r);const s="$s"+n,i=Jt(),o=k0(i.payload.state,s);if(o.value===void 0&&r){const a=r();if(It(a))return i.payload.state[s]=a,a;o.value=a}return o}class Tm extends Error{constructor(){super(...arguments),this.statusCode=500,this.fatal=!1,this.unhandled=!1,this.statusMessage="Internal Server Error"}}Tm.__h3_error__=!0;function Sm(t){var n;if(typeof t=="string")return new Tm(t);if(oU(t))return t;const e=new Tm((n=t.message)!=null?n:t.statusMessage,t.cause?{cause:t.cause}:void 0);if("stack"in t)try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}return t.statusCode&&(e.statusCode=t.statusCode),t.statusMessage&&(e.statusMessage=t.statusMessage),t.data&&(e.data=t.data),t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function oU(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.__h3_error__)===!0}const wf=()=>k0(Jt().payload,"error"),qc=t=>{const e=lU(t);try{Jt().callHook("app:error",e);const r=wf();r.value=r.value||e}catch{throw e}return e},aU=async(t={})=>{const e=Jt(),n=wf();e.callHook("app:error:cleared",t),t.redirect&&await e.$router.replace(t.redirect),n.value=null},cU=t=>!!(t&&typeof t=="object"&&"__nuxt_error"in t),lU=t=>{const e=Sm(t);return e.__nuxt_error=!0,e},Ef=()=>{var t;return(t=Jt())==null?void 0:t.$router},OC=()=>ec()?nt("_route",Jt()._route):Jt()._route,uU=()=>{try{if(Jt()._processingMiddleware)return!0}catch{return!0}return!1},hU=(t,e)=>{t||(t="/");const n=typeof t=="string"?t:t.path||"/",r=dy(n,!0);if(r&&!(e!=null&&e.external))throw new Error("Navigating to external URL is not allowed by default. Use `nagivateTo (url, { external: true })`.");if(r&&yf(n).protocol==="script:")throw new Error("Cannot navigate to an URL with script protocol.");if(!r&&uU())return t;const s=Ef();return r?(e!=null&&e.replace?location.replace(n):location.href=n,Promise.resolve()):e!=null&&e.replace?s.replace(t):s.push(t)},dU="modulepreload",fU=function(t,e){return new URL(t,e).href},vb={},$s=function(e,n,r){return!n||n.length===0?e():Promise.all(n.map(s=>{if(s=fU(s,r),s in vb)return;vb[s]=!0;const i=s.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${o}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":dU,i||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),i)return new Promise((c,l)=>{a.addEventListener("load",c),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function wb(t,e={}){const n=pU(t,e),r=Jt(),s=r._payloadCache=r._payloadCache||{};return s[n]?s[n]:(s[t]=gU(n).then(i=>i||(delete s[t],null)),s[t])}function pU(t,e={}){const n=yf(t);if(n.search)throw new Error("Payload URL cannot contain search params: "+t);const r=e.hash||(e.fresh?Date.now():"");return _f(n.pathname,r?`_payload.${r}.js`:"_payload.js")}async function gU(t){const e=await $s(()=>import(t),[],import.meta.url).catch(n=>{console.warn("[nuxt] Cannot load payload ",t,n)});return(e==null?void 0:e.default)||null}function mU(){return!!Jt().payload.prerenderedAt}const _U=(...t)=>t.find(e=>e!==void 0),yU="noopener noreferrer",vU=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),wU=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)});function EU(t){const e=t.componentName||"NuxtLink";return yt({name:e,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},setup(n,{slots:r}){const s=Ef(),i=at(()=>n.to||n.href||""),o=at(()=>n.external||n.target&&n.target!=="_self"?!0:typeof i.value=="object"?!1:i.value===""||dy(i.value,!0)),a=xe(!1),c=xe(null);if(n.prefetch!==!1&&n.noPrefetch!==!0&&typeof i.value=="string"&&!IU()){const u=Jt(),h=bU();let d,f=null;gu(()=>{d=vU(()=>{var p;(p=c==null?void 0:c.value)!=null&&p.tagName&&(f=h.observe(c.value,async()=>{f==null||f(),f=null,await Promise.all([u.hooks.callHook("link:prefetch",i.value).catch(()=>{}),TU(i.value,s).catch(()=>{})]),a.value=!0}))})}),mu(()=>{d&&wU(d),f==null||f(),f=null})}return()=>{var f,p,_;if(!o.value)return Ve(ay("RouterLink"),{ref:v=>{c.value=v==null?void 0:v.$el},to:i.value,...a.value&&!n.custom?{class:n.prefetchedClass||t.prefetchedClass}:{},activeClass:n.activeClass||t.activeClass,exactActiveClass:n.exactActiveClass||t.exactActiveClass,replace:n.replace,ariaCurrentValue:n.ariaCurrentValue,custom:n.custom},r.default);const l=typeof i.value=="object"?(p=(f=s.resolve(i.value))==null?void 0:f.href)!=null?p:null:i.value||null,u=n.target||null,h=n.noRel?null:_U(n.rel,t.externalRelAttribute,l?yU:"")||null,d=()=>hU(l,{replace:n.replace});return n.custom?r.default?r.default({href:l,navigate:d,route:s.resolve(l),rel:h,target:u,isActive:!1,isExactActive:!1}):null:Ve("a",{href:l,rel:h,target:u},(_=r.default)==null?void 0:_.call(r))}}})}const lee=EU({componentName:"NuxtLink"});function bU(){const t=Jt();if(t._observer)return t._observer;let e=null;const n=new Map,r=(i,o)=>(e||(e=new IntersectionObserver(a=>{for(const c of a){const l=n.get(c.target);(c.isIntersecting||c.intersectionRatio>0)&&l&&l()}})),n.set(i,o),e.observe(i),()=>{n.delete(i),e.unobserve(i),n.size===0&&(e.disconnect(),e=null)});return t._observer={observe:r}}function IU(){const t=navigator.connection;return!!(t&&(t.saveData||/2g/.test(t.effectiveType)))}async function TU(t,e=Ef()){if(e._nuxtLinkPreloaded||(e._nuxtLinkPreloaded=new Set),e._nuxtLinkPreloaded.has(t))return;e._nuxtLinkPreloaded.add(t);const n=e.resolve(t).matched.map(s=>{var i;return(i=s.components)==null?void 0:i.default}).filter(s=>typeof s=="function"),r=[];for(const s of n){const i=Promise.resolve(s()).catch(()=>{});r.push(i)}await Promise.all(r)}function rg(t){return t!==null&&typeof t=="object"}function Cm(t,e,n=".",r){if(!rg(e))return Cm(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=o.concat(s[i]):rg(o)&&rg(s[i])?s[i]=Cm(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function MC(t){return(...e)=>e.reduce((n,r)=>Cm(n,r,"",t),{})}const SU=MC(),CU=MC((t,e,n,r)=>{if(typeof t[e]<"u"&&typeof n=="function")return t[e]=n(t[e]),!0}),kU={};CU(kU);function gy(t){const e=fe(t)?at(t):t;Jt()._useHead(e)}const sg={},AU=tc(t=>{for(const e in sg)t.vueApp.component(e,sg[e]),t.vueApp.component("Lazy"+e,sg[e])});var RU="usehead",Eb="head:count",ig="data-head-attrs",LC="data-meta-body",xU=(t,e,n)=>{const r=n.createElement(t);for(const s of Object.keys(e))if(s==="body"&&e.body===!0)r.setAttribute(LC,"true");else{let i=e[s];if(s==="renderPriority"||s==="key"||i===!1)continue;s==="children"?r.textContent=i:r.setAttribute(s,i)}return r};function bb(t,e){if(t instanceof HTMLElement&&e instanceof HTMLElement){const n=e.getAttribute("nonce");if(n&&!t.getAttribute("nonce")){const r=e.cloneNode(!0);return r.setAttribute("nonce",""),r.nonce=n,n===t.nonce&&t.isEqualNode(r)}}return t.isEqualNode(e)}var NU=t=>{if(!["meta","base","script","link"].includes(t.tag))return!1;const{props:e,tag:n}=t;if(n==="base")return!0;if(n==="link"&&e.rel==="canonical")return{propValue:"canonical"};if(e.charset)return{propKey:"charset"};const r=["key","id","name","property","http-equiv"];for(const s of r){let i;if(typeof e.getAttribute=="function"&&e.hasAttribute(s)?i=e.getAttribute(s):i=e[s],i!==void 0)return{propValue:s}}return!1},PU=["title","meta","link","base","style","script","noscript","htmlAttrs","bodyAttrs"],DU=(t,e)=>t==null?"":typeof t=="string"?t.replace("%s",e!=null?e:""):t(mn(e)),OU=t=>{const e=[],n=Object.keys(t);for(const r of n)if(t[r]!=null)switch(r){case"title":e.push({tag:r,props:{children:t[r]}});break;case"titleTemplate":break;case"base":e.push({tag:r,props:{key:"default",...t[r]}});break;default:if(PU.includes(r)){const s=t[r];Array.isArray(s)?s.forEach(i=>{e.push({tag:r,props:mn(i)})}):s&&e.push({tag:r,props:s})}break}return e},Ib=(t,e)=>{const n=t.getAttribute(ig);if(n)for(const s of n.split(","))s in e||t.removeAttribute(s);const r=[];for(const s in e){const i=e[s];i!=null&&(i===!1?t.removeAttribute(s):t.setAttribute(s,i),r.push(s))}r.length?t.setAttribute(ig,r.join(",")):t.removeAttribute(ig)},MU=(t=window.document,e,n)=>{var r,s;const i=t.head,o=t.body;let a=i.querySelector(`meta[name="${Eb}"]`),c=o.querySelectorAll(`[${LC}]`);const l=a?Number(a.getAttribute("content")):0,u=[],h=[];if(c)for(let f=0;f<c.length;f++)c[f]&&((r=c[f].tagName)==null?void 0:r.toLowerCase())===e&&h.push(c[f]);if(a)for(let f=0,p=a.previousElementSibling;f<l;f++,p=(p==null?void 0:p.previousElementSibling)||null)((s=p==null?void 0:p.tagName)==null?void 0:s.toLowerCase())===e&&u.push(p);else a=t.createElement("meta"),a.setAttribute("name",Eb),a.setAttribute("content","0"),i.append(a);let d=n.map(f=>{var p;return{element:xU(f.tag,f.props,t),body:(p=f.props.body)!=null?p:!1}});d=d.filter(f=>{for(let p=0;p<u.length;p++){const _=u[p];if(bb(_,f.element))return u.splice(p,1),!1}for(let p=0;p<h.length;p++){const _=h[p];if(bb(_,f.element))return h.splice(p,1),!1}return!0}),h.forEach(f=>{var p;return(p=f.parentNode)==null?void 0:p.removeChild(f)}),u.forEach(f=>{var p;return(p=f.parentNode)==null?void 0:p.removeChild(f)}),d.forEach(f=>{f.body===!0?o.insertAdjacentElement("beforeend",f.element):i.insertBefore(f.element,a)}),a.setAttribute("content",""+(l-u.length+d.filter(f=>!f.body).length))},LU=t=>{let e=[],n=new Set;t&&e.push(Gh(t));const r={install(s){s.config.globalProperties.$head=r,s.provide(RU,r)},get headTags(){const s=[],i=e.map(o=>mn(o).titleTemplate).reverse().find(o=>o!=null);return e.forEach(o=>{OU(mn(o)).forEach(c=>{const l=NU(c);if(l){let u=-1;for(let h=0;h<s.length;h++){const d=s[h];if(d.tag===c.tag&&((l===!0||l.propValue&&mn(d.props[l.propValue])===mn(c.props[l.propValue])||l.propKey&&d.props[l.propKey]&&c.props[l.propKey])&&(u=h),u!==-1))break}u!==-1&&s.splice(u,1)}i&&c.tag==="title"&&(c.props.children=DU(i,c.props.children)),s.push(c)})}),s},addHeadObjs(s){e.push(s)},removeHeadObjs(s){e=e.filter(i=>i!==s)},updateDOM(s=window.document){let i,o={},a={};const c={};for(const u of r.headTags.sort(FU)){if(u.tag==="title"){i=u.props.children;continue}if(u.tag==="htmlAttrs"){Object.assign(o,u.props);continue}if(u.tag==="bodyAttrs"){Object.assign(a,u.props);continue}c[u.tag]=c[u.tag]||[],c[u.tag].push(u)}i!==void 0&&(s.title=i),Ib(s.documentElement,o),Ib(s.body,a);const l=new Set([...Object.keys(c),...n]);for(const u of l)MU(s,u,c[u]||[]);n.clear(),Object.keys(c).forEach(u=>n.add(u))}};return r},FU=(t,e)=>{const n=r=>{if(r.props.renderPriority)return r.props.renderPriority;switch(r.tag){case"base":return-1;case"meta":return r.props.charset?-2:r.props["http-equiv"]==="content-security-policy"?0:10;default:return 10}};return n(t)-n(e)};const UU=tc(t=>{const e=LU();t.vueApp.use(e);let n=!1;t.hooks.hookOnce("app:mounted",()=>{am(()=>{e.updateDOM()}),n=!0}),t._useHead=r=>{const s=xe(r),i=at(()=>{const a={meta:[]};return s.value.charset&&a.meta.push({key:"charset",charset:s.value.charset}),s.value.viewport&&a.meta.push({name:"viewport",content:s.value.viewport}),SU(a,s.value)});e.addHeadObjs(i),n&&am(()=>{e.updateDOM()}),ec()&&mu(()=>{e.removeHeadObjs(i),e.updateDOM()})}}),BU=t=>Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0)),bs=(t,e)=>(n,r)=>(gy(()=>t({...BU(n),...r.attrs},r)),()=>{var s,i;return e?(i=(s=r.slots).default)==null?void 0:i.call(s):null}),mi={accesskey:String,autocapitalize:String,autofocus:{type:Boolean,default:void 0},class:String,contenteditable:{type:Boolean,default:void 0},contextmenu:String,dir:String,draggable:{type:Boolean,default:void 0},enterkeyhint:String,exportparts:String,hidden:{type:Boolean,default:void 0},id:String,inputmode:String,is:String,itemid:String,itemprop:String,itemref:String,itemscope:String,itemtype:String,lang:String,nonce:String,part:String,slot:String,spellcheck:{type:Boolean,default:void 0},style:String,tabindex:String,title:String,translate:String},$U=yt({name:"Script",inheritAttrs:!1,props:{...mi,async:Boolean,crossorigin:{type:[Boolean,String],default:void 0},defer:Boolean,fetchpriority:String,integrity:String,nomodule:Boolean,nonce:String,referrerpolicy:String,src:String,type:String,charset:String,language:String},setup:bs(t=>({script:[t]}))}),VU=yt({name:"NoScript",inheritAttrs:!1,props:{...mi,title:String},setup:bs((t,{slots:e})=>{var s;const n={...t},r=(((s=e.default)==null?void 0:s.call(e))||[]).filter(({children:i})=>i).map(({children:i})=>i).join("");return r&&(n.children=r),{noscript:[n]}})}),jU=yt({name:"Link",inheritAttrs:!1,props:{...mi,as:String,crossorigin:String,disabled:Boolean,fetchpriority:String,href:String,hreflang:String,imagesizes:String,imagesrcset:String,integrity:String,media:String,prefetch:{type:Boolean,default:void 0},referrerpolicy:String,rel:String,sizes:String,title:String,type:String,methods:String,target:String},setup:bs(t=>({link:[t]}))}),qU=yt({name:"Base",inheritAttrs:!1,props:{...mi,href:String,target:String},setup:bs(t=>({base:t}))}),HU=yt({name:"Title",inheritAttrs:!1,setup:bs((t,{slots:e})=>{var r,s,i;return{title:((i=(s=(r=e.default)==null?void 0:r.call(e))==null?void 0:s[0])==null?void 0:i.children)||null}})}),KU=yt({name:"Meta",inheritAttrs:!1,props:{...mi,charset:String,content:String,httpEquiv:String,name:String},setup:bs(t=>{const e={...t};return e.httpEquiv&&(e["http-equiv"]=e.httpEquiv,delete e.httpEquiv),{meta:[e]}})}),WU=yt({name:"Style",inheritAttrs:!1,props:{...mi,type:String,media:String,nonce:String,title:String,scoped:{type:Boolean,default:void 0}},setup:bs((t,{slots:e})=>{var s,i,o;const n={...t},r=(o=(i=(s=e.default)==null?void 0:s.call(e))==null?void 0:i[0])==null?void 0:o.children;return r&&(n.children=r),{style:[n]}})}),zU=yt({name:"Head",inheritAttrs:!1,setup:(t,e)=>()=>{var n,r;return(r=(n=e.slots).default)==null?void 0:r.call(n)}}),GU=yt({name:"Html",inheritAttrs:!1,props:{...mi,manifest:String,version:String,xmlns:String},setup:bs(t=>({htmlAttrs:t}),!0)}),QU=yt({name:"Body",inheritAttrs:!1,props:mi,setup:bs(t=>({bodyAttrs:t}),!0)}),Tb=Object.freeze(Object.defineProperty({__proto__:null,Script:$U,NoScript:VU,Link:jU,Base:qU,Title:HU,Meta:KU,Style:WU,Head:zU,Html:GU,Body:QU},Symbol.toStringTag,{value:"Module"})),YU={meta:[],link:[{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"}],style:[],script:[],noscript:[],charset:"utf-8",viewport:"width=device-width, initial-scale=1"},XU={name:"layout",mode:"out-in"},JU={name:"page",mode:"out-in"},ZU=!1,eB={created(){const t=ec();if(!t)return;const e=t.type;if(!e||!("head"in e))return;const n=Jt(),r=typeof e.head=="function"?at(()=>e.head(n)):e.head;gy(r)}},tB=tc(t=>{gy(Z_({title:"",...YU})),t.vueApp.mixin(eB);for(const e in Tb)t.vueApp.component(e,Tb[e])}),nB=(t,e)=>e.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,n=>{var r;return((r=t.params[n.slice(1)])==null?void 0:r.toString())||""}),rB=(t,e)=>{var s;const n=e.route.matched.find(i=>{var o;return((o=i.components)==null?void 0:o.default)===e.Component.type}),r=(s=t!=null?t:n==null?void 0:n.meta.key)!=null?s:n&&nB(e.route,n);return typeof r=="function"?r(e.route):r},sB=(t,e)=>({default:()=>t?Ve(O1,t===!0?{}:t,e):e}),iB=yt({setup(t,{slots:e}){return()=>{var n;return(n=e.default)==null?void 0:n.call(e)}}}),km=(t,e,n)=>({default:()=>e?Ve(t,e===!0?{}:e,n):Ve(iB,{},n)}),Sb=Symbol("isNested"),og=yt({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e}){const n=Jt(),r=nt(Sb,!1);return fn(Sb,!0),()=>Ve(PC,{name:t.name,route:t.route,...e},{default:s=>{var a,c,l,u;if(!s.Component)return;const i=rB(t.pageKey,s),o=(c=(a=t.transition)!=null?a:s.route.meta.pageTransition)!=null?c:JU;return km(mf,o,sB((u=(l=t.keepalive)!=null?l:s.route.meta.keepalive)!=null?u:ZU,r&&n.isHydrating?Ve(Cb,{key:i,routeProps:s,pageKey:i,hasTransition:!!o}):Ve(M0,{onPending:()=>n.callHook("page:start",s.Component),onResolve:()=>n.callHook("page:finish",s.Component)},{default:()=>Ve(Cb,{key:i,routeProps:s,pageKey:i,hasTransition:!!o})}))).default()}})}}),Cb=yt({props:["routeProps","pageKey","hasTransition"],setup(t){const e=t.pageKey,n=t.routeProps.route,r={};for(const s in t.routeProps.route)r[s]=at(()=>e===t.pageKey?t.routeProps.route[s]:n[s]);return fn("_route",En(r)),()=>Ve(t.routeProps.Component)}}),lh=void 0,uh=void 0,oB=()=>DC("firebaseUser",()=>({}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(t,e){if(!t)throw nc(e)},nc=function(t){return new Error("Firebase Database ("+FC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aB=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},bf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||h==null)throw Error();const d=i<<2|a>>4;if(r.push(d),l!==64){const f=a<<4&240|l>>2;if(r.push(f),h!==64){const p=l<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},BC=function(t){const e=UC(t);return bf.encodeByteArray(e,!0)},sd=function(t){return BC(t).replace(/\./g,"")},Am=function(t){try{return bf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(t){return Sl(void 0,t)}function Sl(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!lB(n)||(t[n]=Sl(t[n],e[n]));return t}function lB(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[sd(JSON.stringify(n)),sd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function yy(){try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function uB(){return typeof self=="object"&&self.self===self}function If(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Tf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $C(){const t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VC(){return FC.NODE_ADMIN===!0}function hB(){return!yy()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fn(){return typeof indexedDB=="object"}function _u(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function Sf(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}function dB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB="FirebaseError";class st extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fB,Object.setPrototypeOf(this,st.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sn.prototype.create)}}class Sn{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?pB(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new st(s,a,r)}}function pB(t,e){return t.replace(gB,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gB=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){return JSON.parse(t)}function bt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Cl(Am(i[0])||""),n=Cl(Am(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},mB=function(t){const e=vy(t).claims;return typeof e=="object"&&e.hasOwnProperty("iat")?e.iat:null},_B=function(t){const e=vy(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},yB=function(t){const e=vy(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ao(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function id(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function od(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Rm(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(kb(i)&&kb(o)){if(!Rm(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function na(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Hc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let h=0;h<80;h++){h<40?h<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):h<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const d=(s<<5|s>>>27)+l+c+u+r[h]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function jC(t,e){const n=new wB(t,e);return n.subscribe.bind(n)}class wB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");EB(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ag),s.error===void 0&&(s.error=ag),s.complete===void 0&&(s.complete=ag);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ag(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe=function(t,e,n,r){let s;if(r<e?s="at least "+e:r>n&&(s=n===0?"none":"no more than "+n),s){const i=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+s+".";throw new Error(i)}};function Ln(t,e){return`${t} failed: ${e} argument `}function Rt(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Ln(t,e)+"must be a valid function.")}function Ab(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(Ln(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,B(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Cf=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=1e3,SB=2,CB=4*60*60*1e3,kB=.5;function ad(t,e=TB,n=SB){const r=e*Math.pow(n,t),s=Math.round(kB*r*(Math.random()-.5)*2);return Math.min(CB,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t){return t&&t._delegate?t._delegate:t}class ke{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Et;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RB(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AB(t){return t===Pi?void 0:t}function RB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=[];var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const KC={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},xB=_e.INFO,NB={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},PB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=NB[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xr{constructor(e){this.name=e,this._logLevel=xB,this._logHandler=PB,this._userLogHandler=null,wy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}function DB(t){wy.forEach(e=>{e.setLogLevel(t)})}function OB(t,e){for(const n of wy){let r=null;e&&e.level&&(r=KC[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r!=null?r:s.logLevel)&&t({level:_e[i].toLowerCase(),message:a,args:o,type:s.name})}}}const MB=(t,e)=>e.some(n=>t instanceof n);let Rb,xb;function LB(){return Rb||(Rb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FB(){return xb||(xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WC=new WeakMap,xm=new WeakMap,zC=new WeakMap,cg=new WeakMap,Ey=new WeakMap;function UB(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(us(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&WC.set(n,t)}).catch(()=>{}),Ey.set(e,t),e}function BB(t){if(xm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});xm.set(t,e)}let Nm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $B(t){Nm=t(Nm)}function VB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lg(this),e,...n);return zC.set(r,e.sort?e.sort():[e]),us(r)}:FB().includes(t)?function(...e){return t.apply(lg(this),e),us(WC.get(this))}:function(...e){return us(t.apply(lg(this),e))}}function jB(t){return typeof t=="function"?VB(t):(t instanceof IDBTransaction&&BB(t),MB(t,LB())?new Proxy(t,Nm):t)}function us(t){if(t instanceof IDBRequest)return UB(t);if(cg.has(t))return cg.get(t);const e=jB(t);return e!==t&&(cg.set(t,e),Ey.set(e,t)),e}const lg=t=>Ey.get(t);function rc(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=us(o);return r&&o.addEventListener("upgradeneeded",c=>{r(us(o.result),c.oldVersion,c.newVersion,us(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}function ha(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),us(n).then(()=>{})}const qB=["get","getKey","getAll","getAllKeys","count"],HB=["put","add","delete","clear"],ug=new Map;function Nb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=HB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qB.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return ug.set(e,i),i}$B(t=>({...t,get:(e,n,r)=>Nb(e,n)||t.get(e,n,r),has:(e,n)=>!!Nb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",Pb="0.7.33";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new Xr("@firebase/app"),zB="@firebase/app-compat",GB="@firebase/analytics-compat",QB="@firebase/analytics",YB="@firebase/app-check-compat",XB="@firebase/app-check",JB="@firebase/auth",ZB="@firebase/auth-compat",e$="@firebase/database",t$="@firebase/database-compat",n$="@firebase/functions",r$="@firebase/functions-compat",s$="@firebase/installations",i$="@firebase/installations-compat",o$="@firebase/messaging",a$="@firebase/messaging-compat",c$="@firebase/performance",l$="@firebase/performance-compat",u$="@firebase/remote-config",h$="@firebase/remote-config-compat",d$="@firebase/storage",f$="@firebase/storage-compat",p$="@firebase/firestore",g$="@firebase/firestore-compat",m$="firebase",_$="9.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="[DEFAULT]",y$={[Pm]:"fire-core",[zB]:"fire-core-compat",[QB]:"fire-analytics",[GB]:"fire-analytics-compat",[XB]:"fire-app-check",[YB]:"fire-app-check-compat",[JB]:"fire-auth",[ZB]:"fire-auth-compat",[e$]:"fire-rtdb",[t$]:"fire-rtdb-compat",[n$]:"fire-fn",[r$]:"fire-fn-compat",[s$]:"fire-iid",[i$]:"fire-iid-compat",[o$]:"fire-fcm",[a$]:"fire-fcm-compat",[c$]:"fire-perf",[l$]:"fire-perf-compat",[u$]:"fire-rc",[h$]:"fire-rc-compat",[d$]:"fire-gcs",[f$]:"fire-gcs-compat",[p$]:"fire-fst",[g$]:"fire-fst-compat","fire-js":"fire-js",[m$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new Map,kl=new Map;function cd(t,e){try{t.container.addComponent(e)}catch(n){co.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function GC(t,e){t.container.addOrOverwriteComponent(e)}function ct(t){const e=t.name;if(kl.has(e))return co.debug(`There were multiple attempts to register component ${e}.`),!1;kl.set(e,t);for(const n of ni.values())cd(n,t);return!0}function Do(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function v$(t,e,n=lo){Do(t,e).clearInstance(n)}function w$(){kl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ri=new Sn("app","Firebase",E$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ke("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=_$;function QC(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:lo,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw ri.create("bad-app-name",{appName:String(r)});const s=ni.get(r);if(s){if(Rm(t,s.options)&&Rm(n,s.config))return s;throw ri.create("duplicate-app",{appName:r})}const i=new HC(r);for(const a of kl.values())i.addComponent(a);const o=new b$(t,n,i);return ni.set(r,o),o}function YC(t=lo){const e=ni.get(t);if(!e)throw ri.create("no-app",{appName:t});return e}function I$(){return Array.from(ni.values())}async function XC(t){const e=t.name;ni.has(e)&&(ni.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function qe(t,e,n){var r;let s=(r=y$[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),co.warn(a.join(" "));return}ct(new ke(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function JC(t,e){if(t!==null&&typeof t!="function")throw ri.create("invalid-log-argument");OB(t,e)}function ZC(t){DB(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$="firebase-heartbeat-database",S$=1,Al="firebase-heartbeat-store";let hg=null;function ek(){return hg||(hg=rc(T$,S$,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Al)}}}).catch(t=>{throw ri.create("idb-open",{originalErrorMessage:t.message})})),hg}async function C$(t){var e;try{return(await ek()).transaction(Al).objectStore(Al).get(tk(t))}catch(n){if(n instanceof st)co.warn(n.message);else{const r=ri.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});co.warn(r.message)}}}async function Db(t,e){var n;try{const s=(await ek()).transaction(Al,"readwrite");return await s.objectStore(Al).put(e,tk(t)),s.done}catch(r){if(r instanceof st)co.warn(r.message);else{const s=ri.create("idb-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message});co.warn(s.message)}}}function tk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$=1024,A$=30*24*60*60*1e3;class R${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ob();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=A$}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ob(),{heartbeatsToSend:n,unsentEntries:r}=x$(this._heartbeatsCache.heartbeats),s=sd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ob(){return new Date().toISOString().substring(0,10)}function x$(t,e=k$){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Mb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Mb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fn()?_u().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await C$(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Db(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Db(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Mb(t){return sd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P$(t){ct(new ke("platform-logger",e=>new KB(e),"PRIVATE")),ct(new ke("heartbeat",e=>new R$(e),"PRIVATE")),qe(Pm,Pb,t),qe(Pm,Pb,"esm2017"),qe("fire-js","")}P$("");const D$=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:Jr,_DEFAULT_ENTRY_NAME:lo,_addComponent:cd,_addOrOverwriteComponent:GC,_apps:ni,_clearComponents:w$,_components:kl,_getProvider:Do,_registerComponent:ct,_removeServiceInstance:v$,deleteApp:XC,getApp:YC,getApps:I$,initializeApp:QC,onLog:JC,registerVersion:qe,setLogLevel:ZC,FirebaseError:st},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,n){this._delegate=e,this.firebase=n,cd(e,new ke("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),XC(this._delegate)))}_getService(e,n=lo){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=lo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){cd(this._delegate,e)}_addOrOverwriteComponent(e){GC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},Lb=new Sn("app-compat","Firebase",M$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:qe,setLogLevel:ZC,onLog:JC,apps:null,SDK_VERSION:Jr,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:D$}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function s(l){if(l=l||lo,!Gn(e,l))throw Lb.create("no-app",{appName:l});return e[l]}s.App=t;function i(l,u={}){const h=QC(l,u);if(Gn(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const u=l.name,h=u.replace("-compat","");if(ct(l)&&l.type==="PUBLIC"){const d=(f=s())=>{if(typeof f[h]!="function")throw Lb.create("invalid-app-argument",{appName:u});return f[h]()};l.serviceProps!==void 0&&Sl(d,l.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,u).apply(this,l.multipleInstances?f:[])}}return l.type==="PUBLIC"?n[h]:null}function c(l,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(){const t=L$(O$);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:nk,extendNamespace:e,createSubscribe:jC,ErrorFactory:Sn,deepExtend:Sl});function e(n){Sl(t,n)}return t}const F$=nk();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=new Xr("@firebase/app-compat"),U$="@firebase/app-compat",B$="0.1.34";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(t){qe(U$,B$,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(uB()&&self.firebase!==void 0){Fb.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Fb.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const je=F$;$$();const rk="@firebase/installations",by="0.5.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=1e4,ik=`w:${by}`,ok="FIS_v2",V$="https://firebaseinstallations.googleapis.com/v1",j$=60*60*1e3,q$="installations",H$="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},uo=new Sn(q$,H$,K$);function ak(t){return t instanceof st&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck({projectId:t}){return`${V$}/projects/${t}/installations`}function lk(t){return{token:t.token,requestStatus:2,expiresIn:z$(t.expiresIn),creationTime:Date.now()}}async function uk(t,e){const r=(await e.json()).error;return uo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function hk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function W$(t,{refreshToken:e}){const n=hk(t);return n.append("Authorization",G$(e)),n}async function dk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function z$(t){return Number(t.replace("s","000"))}function G$(t){return`${ok} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q$({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=ck(t),s=hk(t),i=e.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&s.append("x-firebase-client",l)}const o={fid:n,authVersion:ok,appId:t.appId,sdkVersion:ik},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await dk(()=>fetch(r,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:lk(l.authToken)}}else throw await uk("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$=/^[cdef][\w-]{21}$/,Dm="";function J$(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Z$(t);return X$.test(n)?n:Dm}catch{return Dm}}function Z$(t){return Y$(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new Map;function gk(t,e){const n=kf(t);mk(n,e),eV(n,e)}function mk(t,e){const n=pk.get(t);if(!!n)for(const r of n)r(e)}function eV(t,e){const n=tV();n&&n.postMessage({key:t,fid:e}),nV()}let qi=null;function tV(){return!qi&&"BroadcastChannel"in self&&(qi=new BroadcastChannel("[Firebase] FID Change"),qi.onmessage=t=>{mk(t.data.key,t.data.fid)}),qi}function nV(){pk.size===0&&qi&&(qi.close(),qi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV="firebase-installations-database",sV=1,ho="firebase-installations-store";let dg=null;function Iy(){return dg||(dg=rc(rV,sV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ho)}}})),dg}async function ld(t,e){const n=kf(t),s=(await Iy()).transaction(ho,"readwrite"),i=s.objectStore(ho),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&gk(t,e.fid),e}async function _k(t){const e=kf(t),r=(await Iy()).transaction(ho,"readwrite");await r.objectStore(ho).delete(e),await r.done}async function Af(t,e){const n=kf(t),s=(await Iy()).transaction(ho,"readwrite"),i=s.objectStore(ho),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&gk(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ty(t){let e;const n=await Af(t.appConfig,r=>{const s=iV(r),i=oV(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Dm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function iV(t){const e=t||{fid:J$(),registrationStatus:0};return yk(e)}function oV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(uo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=aV(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:cV(t)}:{installationEntry:e}}async function aV(t,e){try{const n=await Q$(t,e);return ld(t.appConfig,n)}catch(n){throw ak(n)&&n.customData.serverCode===409?await _k(t.appConfig):await ld(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function cV(t){let e=await Ub(t.appConfig);for(;e.registrationStatus===1;)await fk(100),e=await Ub(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ty(t);return r||n}return e}function Ub(t){return Af(t,e=>{if(!e)throw uo.create("installation-not-found");return yk(e)})}function yk(t){return lV(t)?{fid:t.fid,registrationStatus:0}:t}function lV(t){return t.registrationStatus===1&&t.registrationTime+sk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV({appConfig:t,heartbeatServiceProvider:e},n){const r=hV(t,n),s=W$(t,n),i=e.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&s.append("x-firebase-client",l)}const o={installation:{sdkVersion:ik,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await dk(()=>fetch(r,a));if(c.ok){const l=await c.json();return lk(l)}else throw await uk("Generate Auth Token",c)}function hV(t,{fid:e}){return`${ck(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(t,e=!1){let n;const r=await Af(t.appConfig,i=>{if(!vk(i))throw uo.create("not-registered");const o=i.authToken;if(!e&&pV(o))return i;if(o.requestStatus===1)return n=dV(t,e),i;{if(!navigator.onLine)throw uo.create("app-offline");const a=mV(i);return n=fV(t,a),a}});return n?await n:r.authToken}async function dV(t,e){let n=await Bb(t.appConfig);for(;n.authToken.requestStatus===1;)await fk(100),n=await Bb(t.appConfig);const r=n.authToken;return r.requestStatus===0?Sy(t,e):r}function Bb(t){return Af(t,e=>{if(!vk(e))throw uo.create("not-registered");const n=e.authToken;return _V(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function fV(t,e){try{const n=await uV(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ld(t.appConfig,r),n}catch(n){if(ak(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await _k(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ld(t.appConfig,r)}throw n}}function vk(t){return t!==void 0&&t.registrationStatus===2}function pV(t){return t.requestStatus===2&&!gV(t)}function gV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+j$}function mV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function _V(t){return t.requestStatus===1&&t.requestTime+sk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ty(e);return r?r.catch(console.error):Sy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(t,e=!1){const n=t;return await wV(n),(await Sy(n,e)).token}async function wV(t){const{registrationPromise:e}=await Ty(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(t){if(!t||!t.options)throw fg("App Configuration");if(!t.name)throw fg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw fg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function fg(t){return uo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="installations",bV="installations-internal",IV=t=>{const e=t.getProvider("app").getImmediate(),n=EV(e),r=Do(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},TV=t=>{const e=t.getProvider("app").getImmediate(),n=Do(e,wk).getImmediate();return{getId:()=>yV(n),getToken:s=>vV(n,s)}};function SV(){ct(new ke(wk,IV,"PUBLIC")),ct(new ke(bV,TV,"PRIVATE"))}SV();qe(rk,by);qe(rk,by,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="analytics",CV="firebase_id",kV="origin",AV=60*1e3,RV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ek="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt=new Xr("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function xV(t,e){const n=document.createElement("script");n.src=`${Ek}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function NV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function PV(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await bk(n)).find(l=>l.measurementId===s);c&&await e[c.appId]}}catch(a){Gt.error(a)}t("config",s,i)}async function DV(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await bk(n);for(const c of o){const l=a.find(h=>h.measurementId===c),u=l&&e[l.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Gt.error(i)}}function OV(t,e,n,r){async function s(i,o,a){try{i==="event"?await DV(t,e,n,o,a):i==="config"?await PV(t,e,n,r,o,a):i==="consent"?t("consent","update",a):t("set",o)}catch(c){Gt.error(c)}}return s}function MV(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=OV(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function LV(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(Ek))return e;return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},cr=new Sn("analytics","Analytics",FV);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=30,BV=1e3;class $V{constructor(e={},n=BV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ik=new $V;function VV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function jV(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:VV(r)},i=RV.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw cr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function qV(t,e=Ik,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw cr.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw cr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new WV;return setTimeout(async()=>{a.abort()},n!==void 0?n:AV),Tk({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Tk(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Ik){var i,o;const{appId:a,measurementId:c}=t;try{await HV(r,e)}catch(l){if(c)return Gt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${(i=l)===null||i===void 0?void 0:i.message}]`),{appId:a,measurementId:c};throw l}try{const l=await jV(t);return s.deleteThrottleMetadata(a),l}catch(l){const u=l;if(!KV(u)){if(s.deleteThrottleMetadata(a),c)return Gt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw l}const h=Number((o=u==null?void 0:u.customData)===null||o===void 0?void 0:o.httpStatus)===503?ad(n,s.intervalMillis,UV):ad(n,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(a,d),Gt.debug(`Calling attemptFetch again in ${h} millis`),Tk(t,d,r,s)}}function HV(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(cr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function KV(t){if(!(t instanceof st)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class WV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function zV(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}async function GV(t,e,n,r){if(r&&r.global)return t("set",{screen_name:n}),Promise.resolve();{const s=await e;t("config",s,{update:!0,screen_name:n})}}async function QV(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{const s=await e;t("config",s,{update:!0,user_id:n})}}async function YV(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}async function XV(t,e){const n=await t;window[`ga-disable-${n}`]=!e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(){var t;if(Fn())try{await _u()}catch(e){return Gt.warn(cr.create("indexeddb-unavailable",{errorInfo:(t=e)===null||t===void 0?void 0:t.toString()}).message),!1}else return Gt.warn(cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ZV(t,e,n,r,s,i,o){var a;const c=qV(t);c.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Gt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Gt.error(f)),e.push(c);const l=JV().then(f=>{if(f)return r.getId()}),[u,h]=await Promise.all([c,l]);LV()||xV(i,u.measurementId),s("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[kV]="firebase",d.update=!0,h!=null&&(d[CV]=h),s("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.app=e}_delete(){return delete hs[this.app.options.appId],Promise.resolve()}}let hs={},Vb=[];const jb={};let Oh="dataLayer",Sk="gtag",qb,yu,Om=!1;function tj(t){if(Om)throw cr.create("already-initialized");t.dataLayerName&&(Oh=t.dataLayerName),t.gtagName&&(Sk=t.gtagName)}function nj(){const t=[];if(If()&&t.push("This is a browser extension environment."),Sf()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=cr.create("invalid-analytics-context",{errorInfo:e});Gt.warn(n.message)}}function rj(t,e,n){nj();const r=t.options.appId;if(!r)throw cr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Gt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw cr.create("no-api-key");if(hs[r]!=null)throw cr.create("already-exists",{id:r});if(!Om){NV(Oh);const{wrappedGtag:i,gtagCore:o}=MV(hs,Vb,jb,Oh,Sk);yu=i,qb=o,Om=!0}return hs[r]=ZV(t,Vb,jb,e,qb,Oh,n),new ej(t)}async function sj(){if(If()||!Sf()||!Fn())return!1;try{return await _u()}catch{return!1}}function ij(t,e,n){t=O(t),GV(yu,hs[t.app.options.appId],e,n).catch(r=>Gt.error(r))}function oj(t,e,n){t=O(t),QV(yu,hs[t.app.options.appId],e,n).catch(r=>Gt.error(r))}function aj(t,e,n){t=O(t),YV(yu,hs[t.app.options.appId],e,n).catch(r=>Gt.error(r))}function cj(t,e){t=O(t),XV(hs[t.app.options.appId],e).catch(n=>Gt.error(n))}function Ck(t,e,n,r){t=O(t),zV(yu,hs[t.app.options.appId],e,n,r).catch(s=>Gt.error(s))}const Hb="@firebase/analytics",Kb="0.8.0";function lj(){ct(new ke($b,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return rj(r,s,n)},"PUBLIC")),ct(new ke("analytics-internal",t,"PRIVATE")),qe(Hb,Kb),qe(Hb,Kb,"esm2017");function t(e){try{const n=e.getProvider($b).getImmediate();return{logEvent:(r,s,i)=>Ck(n,r,s,i)}}catch(n){throw cr.create("interop-component-reg-failed",{reason:n})}}}lj();const uj="@firebase/analytics-compat",hj="0.1.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n){this.app=e,this._delegate=n}logEvent(e,n,r){Ck(this._delegate,e,n,r)}setCurrentScreen(e,n){ij(this._delegate,e,n)}setUserId(e,n){oj(this._delegate,e,n)}setUserProperties(e,n){aj(this._delegate,e,n)}setAnalyticsCollectionEnabled(e){cj(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mm;(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"})(Mm||(Mm={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("analytics").getImmediate();return new kk(e,n)};function fj(){const t={Analytics:kk,settings:tj,isSupported:sj,EventName:Mm};je.INTERNAL.registerComponent(new ke("analytics-compat",dj,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}fj();je.registerVersion(uj,hj);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new Map,pj={activated:!1,tokenObservers:[]},gj={initialized:!1,enabled:!1};function Lt(t){return Ak.get(t)||pj}function Er(t,e){Ak.set(t,e)}function Rf(){return gj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="https://content-firebaseappcheck.googleapis.com/v1",mj="exchangeRecaptchaV3Token",_j="exchangeRecaptchaEnterpriseToken",yj="exchangeDebugToken",Wb={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},vj=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Et,await Ej(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Et,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Ej(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},yn=new Sn("appCheck","AppCheck",bj);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function Rk(t){if(!Lt(t).activated)throw yn.create("use-before-activation",{appName:t.name})}function ky(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),s=Math.floor((e-n*3600*24-r*3600)/60),i=e-n*3600*24-r*3600-s*60;let o="";return n&&(o+=hh(n)+"d:"),r&&(o+=hh(r)+"h:"),o+=hh(s)+"m:"+hh(i)+"s",o}function hh(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay({url:t,body:e},n){var r,s;const i={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&(i["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:i};let c;try{c=await fetch(t,a)}catch(f){throw yn.create("fetch-network-error",{originalErrorMessage:(r=f)===null||r===void 0?void 0:r.message})}if(c.status!==200)throw yn.create("fetch-status-error",{httpStatus:c.status});let l;try{l=await c.json()}catch(f){throw yn.create("fetch-parse-error",{originalErrorMessage:(s=f)===null||s===void 0?void 0:s.message})}const u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw yn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const h=Number(u[1])*1e3,d=Date.now();return{token:l.token,expireTimeMillis:d+h,issuedAtTimeMillis:d}}function Ij(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${Cy}/projects/${n}/apps/${r}:${mj}?key=${s}`,body:{recaptcha_v3_token:e}}}function Tj(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${Cy}/projects/${n}/apps/${r}:${_j}?key=${s}`,body:{recaptcha_enterprise_token:e}}}function Sj(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${Cy}/projects/${n}/apps/${r}:${yj}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="firebase-app-check-database",kj=1,Rl="firebase-app-check-store",xk="debug-token";let dh=null;function Nk(){return dh||(dh=new Promise((t,e)=>{var n;try{const r=indexedDB.open(Cj,kj);r.onsuccess=s=>{t(s.target.result)},r.onerror=s=>{var i;e(yn.create("storage-open",{originalErrorMessage:(i=s.target.error)===null||i===void 0?void 0:i.message}))},r.onupgradeneeded=s=>{const i=s.target.result;switch(s.oldVersion){case 0:i.createObjectStore(Rl,{keyPath:"compositeKey"})}}}catch(r){e(yn.create("storage-open",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message}))}}),dh)}function Aj(t){return Dk(Ok(t))}function Rj(t,e){return Pk(Ok(t),e)}function xj(t){return Pk(xk,t)}function Nj(){return Dk(xk)}async function Pk(t,e){const r=(await Nk()).transaction(Rl,"readwrite"),i=r.objectStore(Rl).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=c=>{o()},r.onerror=c=>{var l;a(yn.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}async function Dk(t){const n=(await Nk()).transaction(Rl,"readonly"),s=n.objectStore(Rl).get(t);return new Promise((i,o)=>{s.onsuccess=a=>{const c=a.target.result;i(c?c.value:void 0)},n.onerror=a=>{var c;o(yn.create("storage-get",{originalErrorMessage:(c=a.target.error)===null||c===void 0?void 0:c.message}))}})}function Ok(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new Xr("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(t){if(Fn()){let e;try{e=await Aj(t)}catch(n){xl.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function zb(t,e){return Fn()?Rj(t,e).catch(n=>{xl.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Dj(){let t;try{t=await Nj()}catch{}if(t)return t;{const e=IB();return xj(e).catch(n=>xl.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(){return Rf().enabled}async function Lk(){const t=Rf();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Oj(){const t=dB(),e=Rf();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new Et;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Dj())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj={error:"UNKNOWN_ERROR"};function Lj(t){return bf.encodeString(JSON.stringify(t),!1)}async function hd(t,e=!1){const n=t.app;Rk(n);const r=Lt(n);let s=r.token,i;if(!s){const c=await r.cachedTokenPromise;c&&dd(c)&&(s=c)}if(!e&&s&&dd(s))return{token:s.token};let o=!1;if(Mk()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ay(Sj(n,await Lk()),t.heartbeatServiceProvider).then(l=>(r.exchangeTokenPromise=void 0,l)),o=!0);const c=await r.exchangeTokenPromise;return await zb(n,c),Er(n,Object.assign(Object.assign({},r),{token:c})),{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(c=>(r.exchangeTokenPromise=void 0,c)),o=!0),s=await r.exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?xl.warn(c.message):xl.error(c),i=c}let a;return s?(a={token:s.token},Er(n,Object.assign(Object.assign({},r),{token:s})),await zb(n,s)):a=Uj(i),o&&Fk(n,a),a}function Ry(t,e,n,r){const{app:s}=t,i=Lt(s),o={next:n,error:r,type:e};if(Er(s,Object.assign(Object.assign({},i),{tokenObservers:[...i.tokenObservers,o]})),i.token&&dd(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),Gb(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>Gb(t))}function xy(t,e){const n=Lt(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Er(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function Gb(t){const{app:e}=t,n=Lt(e);let r=n.tokenRefresher;r||(r=Fj(t),Er(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Fj(t){const{app:e}=t;return new wj(async()=>{const n=Lt(e);let r;if(n.token?r=await hd(t,!0):r=await hd(t),r.error)throw r.error},()=>!0,()=>{const n=Lt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},Wb.RETRIAL_MIN_WAIT,Wb.RETRIAL_MAX_WAIT)}function Fk(t,e){const n=Lt(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function dd(t){return t.expireTimeMillis-Date.now()>0}function Uj(t){return{token:Lj(Mj),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Lt(this.app);for(const n of e)xy(this.app,n.next);return Promise.resolve()}}function $j(t,e){return new Bj(t,e)}function Vj(t){return{getToken:e=>hd(t,e),addTokenListener:e=>Ry(t,"INTERNAL",e),removeTokenListener:e=>xy(t.app,e)}}const jj="@firebase/app-check",qj="0.5.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="https://www.google.com/recaptcha/api.js",Kj="https://www.google.com/recaptcha/enterprise.js";function Wj(t,e){const n=Lt(t),r=new Et;Er(t,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const s=Uk(t),i=ud(!1);return i?fd(t,e,i,s,r):Qj(()=>{const o=ud(!1);if(!o)throw new Error("no recaptcha");fd(t,e,o,s,r)}),r.promise}function zj(t,e){const n=Lt(t),r=new Et;Er(t,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const s=Uk(t),i=ud(!0);return i?fd(t,e,i,s,r):Yj(()=>{const o=ud(!0);if(!o)throw new Error("no recaptcha");fd(t,e,o,s,r)}),r.promise}function fd(t,e,n,r,s){n.ready(()=>{Gj(t,e,n,r),s.resolve(n)})}function Uk(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function Bk(t){Rk(t);const n=await Lt(t).reCAPTCHAState.initialized.promise;return new Promise((r,s)=>{const i=Lt(t).reCAPTCHAState;n.ready(()=>{r(n.execute(i.widgetId,{action:"fire_app_check"}))})})}function Gj(t,e,n,r){const s=n.render(r,{sitekey:e,size:"invisible"}),i=Lt(t);Er(t,Object.assign(Object.assign({},i),{reCAPTCHAState:Object.assign(Object.assign({},i.reCAPTCHAState),{widgetId:s})}))}function Qj(t){const e=document.createElement("script");e.src=Hj,e.onload=t,document.head.appendChild(e)}function Yj(t){const e=document.createElement("script");e.src=Kj,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,n;Vk(this._throttleData);const r=await Bk(this._app).catch(i=>{throw yn.create("recaptcha-error")});let s;try{s=await Ay(Ij(this._app,r),this._heartbeatServiceProvider)}catch(i){throw!((e=i.code)===null||e===void 0)&&e.includes("fetch-status-error")?(this._throttleData=$k(Number((n=i.customData)===null||n===void 0?void 0:n.httpStatus),this._throttleData),yn.create("throttled",{time:ky(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):i}return this._throttleData=null,s}initialize(e){this._app=e,this._heartbeatServiceProvider=Do(e,"heartbeat"),Wj(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof Nl?this._siteKey===e._siteKey:!1}}class xf{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,n;Vk(this._throttleData);const r=await Bk(this._app).catch(i=>{throw yn.create("recaptcha-error")});let s;try{s=await Ay(Tj(this._app,r),this._heartbeatServiceProvider)}catch(i){throw!((e=i.code)===null||e===void 0)&&e.includes("fetch-status-error")?(this._throttleData=$k(Number((n=i.customData)===null||n===void 0?void 0:n.httpStatus),this._throttleData),yn.create("throttled",{time:ky(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):i}return this._throttleData=null,s}initialize(e){this._app=e,this._heartbeatServiceProvider=Do(e,"heartbeat"),zj(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof xf?this._siteKey===e._siteKey:!1}}class Pl{constructor(e){this._customProviderOptions=e}async getToken(){const e=await this._customProviderOptions.getToken(),n=mB(e.token),r=n!==null&&n<Date.now()&&n>0?n*1e3:Date.now();return Object.assign(Object.assign({},e),{issuedAtTimeMillis:r})}initialize(e){this._app=e}isEqual(e){return e instanceof Pl?this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString():!1}}function $k(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+vj,httpStatus:t};{const n=e?e.backoffCount:0,r=ad(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function Vk(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw yn.create("throttled",{time:ky(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t=YC(),e){t=O(t);const n=Do(t,"app-check");if(Rf().initialized||Oj(),Mk()&&Lk().then(s=>console.log(`App Check debug token: ${s}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&i.provider.isEqual(e.provider))return s;throw yn.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return Jj(t,e.provider,e.isTokenAutoRefreshEnabled),Lt(t).isTokenAutoRefreshEnabled&&Ry(r,"INTERNAL",()=>{}),r}function Jj(t,e,n){const r=Lt(t),s=Object.assign(Object.assign({},r),{activated:!0});s.provider=e,s.cachedTokenPromise=Pj(t).then(i=>(i&&dd(i)&&(Er(t,Object.assign(Object.assign({},Lt(t)),{token:i})),Fk(t,{token:i.token})),i)),s.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,Er(t,s),s.provider.initialize(t)}function Zj(t,e){const n=t.app,r=Lt(n);r.tokenRefresher&&(e===!0?r.tokenRefresher.start():r.tokenRefresher.stop()),Er(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:e}))}async function eq(t,e){const n=await hd(t,e);if(n.error)throw n.error;return{token:n.token}}function tq(t,e,n,r){let s=()=>{},i=()=>{};return e.next!=null?s=e.next.bind(e):s=e,e.error!=null?i=e.error.bind(e):n&&(i=n),Ry(t,"EXTERNAL",s,i),()=>xy(t.app,s)}const nq="app-check",Qb="app-check-internal";function rq(){ct(new ke(nq,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return $j(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Qb).initialize()})),ct(new ke(Qb,t=>{const e=t.getProvider("app-check").getImmediate();return Vj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),qe(jj,qj)}rq();const sq="@firebase/app-check-compat",iq="0.2.12";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oq={["use-before-activation"]:"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."},pg=new Sn("appCheck","AppCheck",oq);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(e){this.app=e}activate(e,n){let r;typeof e=="string"?r=new Nl(e):e instanceof xf||e instanceof Nl||e instanceof Pl?r=e:r=new Pl({getToken:e.getToken}),this._delegate=Xj(this.app,{provider:r,isTokenAutoRefreshEnabled:n})}setTokenAutoRefreshEnabled(e){if(!this._delegate)throw pg.create("use-before-activation",{appName:this.app.name});Zj(this._delegate,e)}getToken(e){if(!this._delegate)throw pg.create("use-before-activation",{appName:this.app.name});return eq(this._delegate,e)}onTokenChanged(e,n,r){if(!this._delegate)throw pg.create("use-before-activation",{appName:this.app.name});return tq(this._delegate,e,n)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq=t=>{const e=t.getProvider("app-compat").getImmediate();return new aq(e)};function lq(){je.INTERNAL.registerComponent(new ke("appCheck-compat",cq,"PUBLIC").setServiceProps({ReCaptchaEnterpriseProvider:xf,ReCaptchaV3Provider:Nl,CustomProvider:Pl}))}lq();je.registerVersion(sq,iq);function Ny(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}const Cc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Wo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function jk(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hq=uq,dq=jk,qk=new Sn("auth","Firebase",jk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=new Xr("@firebase/auth");function Mh(t,...e){Yb.logLevel<=_e.ERROR&&Yb.error(`Auth (${Jr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,...e){throw Py(t,...e)}function Qt(t,...e){return Py(t,...e)}function Hk(t,e,n){const r=Object.assign(Object.assign({},dq()),{[e]:n});return new Sn("auth","Firebase",r).create(e,{appName:t.name})}function sc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zt(t,"argument-error"),Hk(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Py(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qk.create(t,...e)}function U(t,e,...n){if(!t)throw Py(e,...n)}function Mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mh(e),new Error(e)}function br(t,e){t||Mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new Map;function Hn(t){br(t instanceof Function,"Expected a class definition");let e=Xb.get(t);return e?(br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xb.set(t,e),e)}function fq(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Dy(){return Jb()==="http:"||Jb()==="https:"}function Jb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dy()||If()||"connection"in navigator)?navigator.onLine:!0}function gq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){this.shortDelay=e,this.longDelay=n,br(n>e,"Short delay should be less than long delay!"),this.isMobile=_y()||Tf()}get(){return pq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e){br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q=new vu(3e4,6e4);function St(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $t(t,e,n,r,s={}){return Wk(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Po(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),Kk.fetch()(zk(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},i))})}async function Wk(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},mq),e);try{const s=new yq(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Kc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Kc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Kc(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Hk(t,u,l);Zt(t,u)}}catch(s){if(s instanceof st)throw s;Zt(t,"network-request-failed")}}async function Is(t,e,n,r,s={}){const i=await $t(t,e,n,r,s);return"mfaPendingCredential"in i&&Zt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function zk(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Oy(t.config,s):`${t.config.apiScheme}://${s}`}class yq{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qt(this.auth,"network-request-failed")),_q.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vq(t,e){return $t(t,"POST","/v1/accounts:delete",e)}async function wq(t,e){return $t(t,"POST","/v1/accounts:update",e)}async function Eq(t,e){return $t(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bq(t,e=!1){const n=O(t),r=await n.getIdToken(e),s=Nf(r);U(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:rl(gg(s.auth_time)),issuedAtTime:rl(gg(s.iat)),expirationTime:rl(gg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gg(t){return Number(t)*1e3}function Nf(t){var e;const[n,r,s]=t.split(".");if(n===void 0||r===void 0||s===void 0)return Mh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Am(r);return i?JSON.parse(i):(Mh("Failed to decode base64 JWT payload"),null)}catch(i){return Mh("Caught error parsing JWT payload as JSON",(e=i)===null||e===void 0?void 0:e.toString()),null}}function Iq(t){const e=Nf(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof st&&Tq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Tq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(n){((e=n)===null||e===void 0?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rl(this.lastLoginAt),this.creationTime=rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t){var e;const n=t.auth,r=await t.getIdToken(),s=await _s(t,Eq(n,{idToken:r}));U(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Aq(i.providerUserInfo):[],a=kq(t.providerData,o),c=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=c?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Gk(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Cq(t){const e=O(t);await Ol(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kq(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Aq(t){return t.map(e=>{var{providerId:n}=e,r=Ny(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rq(t,e){const n=await Wk(t,{},async()=>{const r=Po({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=zk(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Kk.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Iq(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return U(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Rq(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ml;return r&&(U(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(U(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(U(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class to{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ny(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Gk(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _s(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bq(this,e)}reload(){return Cq(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new to(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ol(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await _s(this,vq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,l,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,g=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:I,isAnonymous:k,providerData:x,stsTokenManager:$}=n;U(w&&$,e,"internal-error");const A=Ml.fromJSON(this.name,$);U(typeof w=="string",e,"internal-error"),Os(h,e.name),Os(d,e.name),U(typeof I=="boolean",e,"internal-error"),U(typeof k=="boolean",e,"internal-error"),Os(f,e.name),Os(p,e.name),Os(_,e.name),Os(v,e.name),Os(y,e.name),Os(g,e.name);const K=new to({uid:w,auth:e,email:d,emailVerified:I,displayName:h,isAnonymous:k,photoURL:p,phoneNumber:f,tenantId:_,stsTokenManager:A,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(K.providerData=x.map(Q=>Object.assign({},Q))),v&&(K._redirectEventId=v),K}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ml;s.updateFromServerResponse(n);const i=new to({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ol(i),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Qk.type="NONE";const xa=Qk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t,e,n){return`firebase:${t}:${e}:${n}`}class da{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=no(this.userKey,s.apiKey,i),this.fullPersistenceKey=no("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?to._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new da(Hn(xa),e,r);const s=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let i=s[0]||Hn(xa);const o=no(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){const h=to._fromJSON(e,u);l!==i&&(a=h),i=l;break}}catch{}const c=s.filter(l=>l._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new da(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==i)try{await l._remove(o)}catch{}})),new da(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zk(e))return"Blackberry";if(eA(e))return"Webos";if(My(e))return"Safari";if((e.includes("chrome/")||Xk(e))&&!e.includes("edge/"))return"Chrome";if(wu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Yk(t=it()){return/firefox\//i.test(t)}function My(t=it()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xk(t=it()){return/crios\//i.test(t)}function Jk(t=it()){return/iemobile/i.test(t)}function wu(t=it()){return/android/i.test(t)}function Zk(t=it()){return/blackberry/i.test(t)}function eA(t=it()){return/webos/i.test(t)}function ic(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xq(t=it()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Nq(t=it()){var e;return ic(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Pq(){return $C()&&document.documentMode===10}function tA(t=it()){return ic(t)||wu(t)||eA(t)||Zk(t)||/windows phone/i.test(t)||Jk(t)}function Dq(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t,e=[]){let n;switch(t){case"Browser":n=Zb(it());break;case"Worker":n=`${Zb(it())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){var n;if(this.auth.currentUser===e)return;const r=[];try{for(const s of this.queue)await s(e),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(n=s)===null||n===void 0?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eI(this),this.idTokenSubscription=new eI(this),this.beforeStateQueue=new Oq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qk,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await da.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c==null?void 0:c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){var n;try{await Ol(e)}catch(r){if(((n=r)===null||n===void 0?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?O(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=await da.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return U(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Ft(t){return O(t)}class eI{constructor(e){this.auth=e,this.observer=null,this.addObserver=jC(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Lq(t,e,n){const r=Ft(t);U(r._canInitEmulator,r,"emulator-config-failed"),U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=rA(e),{host:o,port:a}=Fq(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||Uq()}function rA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Fq(t){const e=rA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:tI(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:tI(o)}}}function tI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Uq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,n){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(t,e){return $t(t,"POST","/v1/accounts:resetPassword",St(t,e))}async function iA(t,e){return $t(t,"POST","/v1/accounts:update",e)}async function Bq(t,e){return $t(t,"POST","/v1/accounts:update",St(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $q(t,e){return Is(t,"POST","/v1/accounts:signInWithPassword",St(t,e))}async function Pf(t,e){return $t(t,"POST","/v1/accounts:sendOobCode",St(t,e))}async function Vq(t,e){return Pf(t,e)}async function jq(t,e){return Pf(t,e)}async function qq(t,e){return Pf(t,e)}async function Hq(t,e){return Pf(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kq(t,e){return Is(t,"POST","/v1/accounts:signInWithEmailLink",St(t,e))}async function Wq(t,e){return Is(t,"POST","/v1/accounts:signInWithEmailLink",St(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends oc{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ll(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ll(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return $q(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Kq(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return iA(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Wq(e,{idToken:n,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(t,e){return Is(t,"POST","/v1/accounts:signInWithIdp",St(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq="http://localhost";class Hr extends oc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ny(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Hr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ds(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ds(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ds(e,n)}buildRequest(){const e={requestUri:zq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Po(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gq(t,e){return $t(t,"POST","/v1/accounts:sendVerificationCode",St(t,e))}async function Qq(t,e){return Is(t,"POST","/v1/accounts:signInWithPhoneNumber",St(t,e))}async function Yq(t,e){const n=await Is(t,"POST","/v1/accounts:signInWithPhoneNumber",St(t,e));if(n.temporaryProof)throw Kc(t,"account-exists-with-different-credential",n);return n}const Xq={USER_NOT_FOUND:"user-not-found"};async function Jq(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Is(t,"POST","/v1/accounts:signInWithPhoneNumber",St(t,n),Xq)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends oc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ro({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ro({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Qq(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Yq(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Jq(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new ro({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eH(t){const e=na(Hc(t)).link,n=e?na(Hc(e)).deep_link_id:null,r=na(Hc(t)).deep_link_id;return(r?na(Hc(r)).link:null)||r||n||e||t}class Df{constructor(e){var n,r,s,i,o,a;const c=na(Hc(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,h=Zq((s=c.mode)!==null&&s!==void 0?s:null);U(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=eH(e);try{return new Df(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.providerId=_i.PROVIDER_ID}static credential(e,n){return Ll._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Df.parseLink(n);return U(r,"argument-error"),Ll._fromEmailAndCode(e,r.code,r.tenantId)}}_i.PROVIDER_ID="password";_i.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends Ts{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fa extends ac{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return U("providerId"in n&&"signInMethod"in n,"argument-error"),Hr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return U(e.idToken||e.accessToken,"argument-error"),Hr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return fa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return fa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:a}=e;if(!r&&!s&&!n&&!i||!a)return null;try{return new fa(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends ac{constructor(){super("facebook.com")}static credential(e){return Hr._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hr._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends ac{constructor(){super("github.com")}static credential(e){return Hr._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH="http://localhost";class Na extends oc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return ds(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ds(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ds(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:i}=n;return!r||!s||!i||r!==s?null:new Na(r,i)}static _create(e,n){return new Na(e,n)}buildRequest(){return{requestUri:tH,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH="saml.";class pd extends Ts{constructor(e){U(e.startsWith(nH),"argument-error"),super(e)}static credentialFromResult(e){return pd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return pd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Na.fromJSON(e);return U(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Na._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends ac{constructor(){super("twitter.com")}static credential(e,n){return Hr._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pr.credential(n,r)}catch{return null}}}Pr.TWITTER_SIGN_IN_METHOD="twitter.com";Pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(t,e){return Is(t,"POST","/v1/accounts:signUp",St(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await to._fromIdTokenResponse(e,r,s),o=nI(r);return new lr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=nI(r);return new lr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function nI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH(t){var e;const n=Ft(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new lr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await oA(n,{returnSecureToken:!0}),s=await lr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends st{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,gd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new gd(e,n,r,s)}}function aA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?gd._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sH(t,e){const n=O(t);await Of(!0,n,e);const{providerUserInfo:r}=await wq(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=cA(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ly(t,e,n=!1){const r=await _s(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lr._forOperation(t,"link",r)}async function Of(t,e,n){await Ol(e);const r=cA(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";U(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(t,e,n=!1){var r;const{auth:s}=t,i="reauthenticate";try{const o=await _s(t,aA(s,i,e,t),n);U(o.idToken,s,"internal-error");const a=Nf(o.idToken);U(a,s,"internal-error");const{sub:c}=a;return U(t.uid===c,s,"user-mismatch"),lr._forOperation(t,i,o)}catch(o){throw((r=o)===null||r===void 0?void 0:r.code)==="auth/user-not-found"&&Zt(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(t,e,n=!1){const r="signIn",s=await aA(t,r,e),i=await lr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Mf(t,e){return uA(Ft(t),e)}async function hA(t,e){const n=O(t);return await Of(!1,n,e.providerId),Ly(n,e)}async function dA(t,e){return lA(O(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iH(t,e){return Is(t,"POST","/v1/accounts:signInWithCustomToken",St(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oH(t,e){const n=Ft(t),r=await iH(n,{token:e,returnSecureToken:!0}),s=await lr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Fy._fromServerResponse(e,n):Zt(e,"internal-error")}}class Fy extends Lf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Fy(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t,e,n){var r;U(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),U(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(U(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(U(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aH(t,e,n){const r=O(t),s={requestType:"PASSWORD_RESET",email:e};n&&Ff(r,s,n),await jq(r,s)}async function cH(t,e,n){await sA(O(t),{oobCode:e,newPassword:n})}async function lH(t,e){await Bq(O(t),{oobCode:e})}async function fA(t,e){const n=O(t),r=await sA(n,{oobCode:e}),s=r.requestType;switch(U(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(r.mfaInfo,n,"internal-error");default:U(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=Lf._fromServerResponse(Ft(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function uH(t,e){const{data:n}=await fA(O(t),e);return n.email}async function hH(t,e,n){const r=Ft(t),s=await oA(r,{returnSecureToken:!0,email:e,password:n}),i=await lr._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(i.user),i}function dH(t,e,n){return Mf(O(t),_i.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(t,e,n){const r=O(t),s={requestType:"EMAIL_SIGNIN",email:e};U(n.handleCodeInApp,r,"argument-error"),n&&Ff(r,s,n),await qq(r,s)}function pH(t,e){const n=Df.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function gH(t,e,n){const r=O(t),s=_i.credentialWithLink(e,n||Dl());return U(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Mf(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mH(t,e){return $t(t,"POST","/v1/accounts:createAuthUri",St(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _H(t,e){const n=Dy()?Dl():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await mH(O(t),r);return s||[]}async function yH(t,e){const n=O(t),r=await t.getIdToken(),s={requestType:"VERIFY_EMAIL",idToken:r};e&&Ff(n.auth,s,e);const{email:i}=await Vq(n.auth,s);i!==t.email&&await t.reload()}async function vH(t,e,n){const r=O(t),s=await t.getIdToken(),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:s,newEmail:e};n&&Ff(r.auth,i,n);const{email:o}=await Hq(r.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wH(t,e){return $t(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EH(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=O(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await _s(r,wH(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function bH(t,e){return pA(O(t),e,null)}function IH(t,e){return pA(O(t),null,e)}async function pA(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await _s(t,iA(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t==null?void 0:t.idToken)){const o=(n=(e=Nf(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new pa(i,a)}}if(!r)return null;switch(r){case"facebook.com":return new SH(i,s);case"github.com":return new CH(i,s);case"google.com":return new kH(i,s);case"twitter.com":return new AH(i,s,t.screenName||null);case"custom":case"anonymous":return new pa(i,null);default:return new pa(i,r,s)}}class pa{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class gA extends pa{constructor(e,n,r,s){super(e,n,r),this.username=s}}class SH extends pa{constructor(e,n){super(e,"facebook.com",n)}}class CH extends gA{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class kH extends pa{constructor(e,n){super(e,"google.com",n)}}class AH extends gA{constructor(e,n,r){super(e,"twitter.com",n,r)}}function RH(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:TH(n)}class Hi{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new Hi("enroll",e,n)}static _fromMfaPendingCredential(e){return new Hi("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Hi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Hi._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ft(e),s=n.customData._serverResponse,i=(s.mfaInfo||[]).map(a=>Lf._fromServerResponse(r,a));U(s.mfaPendingCredential,r,"internal-error");const o=Hi._fromMfaPendingCredential(s.mfaPendingCredential);return new Uy(o,i,async a=>{const c=await a._process(r,o);delete s.mfaInfo,delete s.mfaPendingCredential;const l=Object.assign(Object.assign({},s),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const u=await lr._fromIdTokenResponse(r,n.operationType,l);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return U(n.user,r,"internal-error"),lr._forOperation(n.user,n.operationType,l);default:Zt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function xH(t,e){var n;const r=O(t),s=e;return U(e.customData.operationType,r,"argument-error"),U((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Uy._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(t,e){return $t(t,"POST","/v2/accounts/mfaEnrollment:start",St(t,e))}function PH(t,e){return $t(t,"POST","/v2/accounts/mfaEnrollment:finalize",St(t,e))}function DH(t,e){return $t(t,"POST","/v2/accounts/mfaEnrollment:withdraw",St(t,e))}class By{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Lf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new By(e)}async getSession(){return Hi._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,s=await this.getSession(),i=await _s(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){var n;const r=typeof e=="string"?e:e.uid,s=await this.user.getIdToken(),i=await _s(this.user,DH(this.user.auth,{idToken:s,mfaEnrollmentId:r}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==r),await this.user._updateTokensIfNecessary(i);try{await this.user.reload()}catch(o){if(((n=o)===null||n===void 0?void 0:n.code)!=="auth/user-token-expired")throw o}}}const mg=new WeakMap;function OH(t){const e=O(t);return mg.has(e)||mg.set(e,By._fromUser(e)),mg.get(e)}const md="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(md,"1"),this.storage.removeItem(md),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MH(){const t=it();return My(t)||ic(t)}const LH=1e3,FH=10;class _A extends mA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=MH()&&Dq(),this.fallbackToPolling=tA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Pq()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FH):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},LH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_A.type="LOCAL";const $y=_A;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA extends mA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yA.type="SESSION";const fo=yA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UH(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Uf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async l=>l(n.origin,i)),c=await UH(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const l=Eu("",20);s.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(u),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return window}function $H(t){vt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(){return typeof vt().WorkerGlobalScope<"u"&&typeof vt().importScripts=="function"}async function VH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qH(){return Vy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firebaseLocalStorageDb",HH=1,_d="firebaseLocalStorage",wA="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bf(t,e){return t.transaction([_d],e?"readwrite":"readonly").objectStore(_d)}function KH(){const t=indexedDB.deleteDatabase(vA);return new bu(t).toPromise()}function Lm(){const t=indexedDB.open(vA,HH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_d,{keyPath:wA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_d)?e(r):(r.close(),await KH(),e(await Lm()))})})}async function rI(t,e,n){const r=Bf(t,!0).put({[wA]:e,value:n});return new bu(r).toPromise()}async function WH(t,e){const n=Bf(t,!1).get(e),r=await new bu(n).toPromise();return r===void 0?null:r.value}function sI(t,e){const n=Bf(t,!0).delete(e);return new bu(n).toPromise()}const zH=800,GH=3;class EA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>GH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uf._getInstance(qH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VH(),!this.activeServiceWorker)return;this.sender=new BH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lm();return await rI(e,md,"1"),await sI(e,md),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>WH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Bf(s,!1).getAll();return new bu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EA.type="LOCAL";const Fl=EA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(t,e){return $t(t,"POST","/v2/accounts/mfaSignIn:start",St(t,e))}function YH(t,e){return $t(t,"POST","/v2/accounts/mfaSignIn:finalize",St(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XH(t){return(await $t(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function bA(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Qt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",JH().appendChild(r)})}function IA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH=500,eK=6e4,fh=1e12;class tK{constructor(e){this.auth=e,this.counter=fh,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new nK(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||fh;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||fh;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||fh;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class nK{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;U(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=rK(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},eK)},ZH))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function rK(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=IA("rcb"),sK=new vu(3e4,6e4),iK="https://www.google.com/recaptcha/api.js?";class oK{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=vt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return U(aK(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(vt().grecaptcha):new Promise((r,s)=>{const i=vt().setTimeout(()=>{s(Qt(e,"network-request-failed"))},sK.get());vt()[_g]=()=>{vt().clearTimeout(i),delete vt()[_g];const a=vt().grecaptcha;if(!a){s(Qt(e,"internal-error"));return}const c=a.render;a.render=(l,u)=>{const h=c(l,u);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${iK}?${Po({onload:_g,render:"explicit",hl:n})}`;bA(o).catch(()=>{clearTimeout(i),s(Qt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=vt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function aK(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class cK{async load(e){return new tK(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="recaptcha",lK={theme:"light",type:"image"};class uK{constructor(e,n=Object.assign({},lK),r){this.parameters=n,this.type=TA,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ft(r),this.isInvisible=this.parameters.size==="invisible",U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof e=="string"?document.getElementById(e):e;U(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cK:new oK,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{!o||(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=vt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){U(Dy()&&!Vy(),this.auth,"internal-error"),await hK(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await XH(this.auth);U(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function hK(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ro._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function dK(t,e,n){const r=Ft(t),s=await $f(r,e,O(n));return new jy(s,i=>Mf(r,i))}async function fK(t,e,n){const r=O(t);await Of(!1,r,"phone");const s=await $f(r.auth,e,O(n));return new jy(s,i=>hA(r,i))}async function pK(t,e,n){const r=O(t),s=await $f(r.auth,e,O(n));return new jy(s,i=>dA(r,i))}async function $f(t,e,n){var r;const s=await n.verify();try{U(typeof s=="string",t,"argument-error"),U(n.type===TA,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return U(o.type==="enroll",t,"internal-error"),(await NH(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{U(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return U(a,t,"missing-multi-factor-info"),(await QH(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await Gq(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}async function gK(t,e){await Ly(O(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.providerId=yr.PROVIDER_ID,this.auth=Ft(e)}verifyPhoneNumber(e,n){return $f(this.auth,e,O(n))}static credential(e,n){return ro._fromVerification(e,n)}static credentialFromResult(e){const n=e;return yr.credentialFromTaggedObject(n)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?ro._fromTokenResponse(n,r):null}}yr.PROVIDER_ID="phone";yr.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t,e){return e?Hn(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends oc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ds(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ds(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mK(t){return uA(t.auth,new qy(t),t.bypassAuthState)}function _K(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),lA(n,new qy(t),t.bypassAuthState)}async function yK(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),Ly(n,new qy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mK;case"linkViaPopup":case"linkViaRedirect":return yK;case"reauthViaPopup":case"reauthViaRedirect":return _K;default:Zt(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK=new vu(2e3,1e4);async function wK(t,e,n){const r=Ft(t);sc(t,e,Ts);const s=Oo(r,n);return new os(r,"signInViaPopup",e,s).executeNotNull()}async function EK(t,e,n){const r=O(t);sc(r.auth,e,Ts);const s=Oo(r.auth,n);return new os(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function bK(t,e,n){const r=O(t);sc(r.auth,e,Ts);const s=Oo(r.auth,n);return new os(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class os extends SA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,os.currentPopupAction&&os.currentPopupAction.cancel(),os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return U(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=Eu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qt(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,vK.get())};e()}}os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IK="pendingRedirect",sl=new Map;class TK extends SA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sl.get(this.auth._key());if(!e){try{const r=await SK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sl.set(this.auth._key(),e)}return this.bypassAuthState||sl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SK(t,e){const n=kA(e),r=CA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Hy(t,e){return CA(t)._set(kA(e),"true")}function CK(){sl.clear()}function Ky(t,e){sl.set(t._key(),e)}function CA(t){return Hn(t._redirectPersistence)}function kA(t){return no(IK,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kK(t,e,n){return AK(t,e,n)}async function AK(t,e,n){const r=Ft(t);sc(t,e,Ts);const s=Oo(r,n);return await Hy(s,r),s._openRedirect(r,e,"signInViaRedirect")}function RK(t,e,n){return xK(t,e,n)}async function xK(t,e,n){const r=O(t);sc(r.auth,e,Ts);const s=Oo(r.auth,n);await Hy(s,r.auth);const i=await AA(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",i)}function NK(t,e,n){return PK(t,e,n)}async function PK(t,e,n){const r=O(t);sc(r.auth,e,Ts);const s=Oo(r.auth,n);await Of(!1,r,e.providerId),await Hy(s,r.auth);const i=await AA(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function DK(t,e){return await Ft(t)._initializationPromise,Vf(t,e,!1)}async function Vf(t,e,n=!1){const r=Ft(t),s=Oo(r,e),o=await new TK(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function AA(t){const e=Eu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK=10*60*1e3;class RA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OK&&this.cachedEventUids.clear(),this.cachedEventUids.has(iI(e))}saveEventToCache(e){this.cachedEventUids.add(iI(e)),this.lastProcessedEventTime=Date.now()}}function iI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(t,e={}){return $t(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FK=/^https?/;async function UK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NA(t);for(const n of e)try{if(BK(n))return}catch{}Zt(t,"unauthorized-domain")}function BK(t){const e=Dl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!FK.test(n))return!1;if(LK.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K=new vu(3e4,6e4);function oI(){const t=vt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VK(t){return new Promise((e,n)=>{var r,s,i;function o(){oI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oI(),n(Qt(t,"network-request-failed"))},timeout:$K.get()})}if(!((s=(r=vt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vt().gapi)===null||i===void 0)&&i.load)o();else{const a=IA("iframefcb");return vt()[a]=()=>{gapi.load?o():n(Qt(t,"network-request-failed"))},bA(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Lh=null,e})}let Lh=null;function jK(t){return Lh=Lh||VK(t),Lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qK=new vu(5e3,15e3),HK="__/auth/iframe",KK="emulator/auth/iframe",WK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GK(t){const e=t.config;U(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Oy(e,KK):`https://${t.config.authDomain}/${HK}`,r={apiKey:e.apiKey,appName:t.name,v:Jr},s=zK.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Po(r).slice(1)}`}async function QK(t){const e=await jK(t),n=vt().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:GK(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WK,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Qt(t,"network-request-failed"),a=vt().setTimeout(()=>{i(o)},qK.get());function c(){vt().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XK=500,JK=600,ZK="_blank",eW="http://localhost";class aI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tW(t,e,n,r=XK,s=JK){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},YK),{width:r.toString(),height:s.toString(),top:i,left:o}),l=it().toLowerCase();n&&(a=Xk(l)?ZK:n),Yk(l)&&(e=e||eW,c.scrollbars="yes");const u=Object.entries(c).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(Nq(l)&&a!=="_self")return nW(e||"",a),new aI(null);const h=window.open(e||"",a,u);U(h,t,"popup-blocked");try{h.focus()}catch{}return new aI(h)}function nW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW="__/auth/handler",sW="emulator/auth/handler";function Fm(t,e,n,r,s,i){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Jr,eventId:s};if(e instanceof Ts){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",id(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,l]of Object.entries(i||{}))o[c]=l}if(e instanceof ac){const c=e.getScopes().filter(l=>l!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];return`${iW(t)}?${Po(a).slice(1)}`}function iW({config:t}){return t.emulator?Oy(t,sW):`https://${t.authDomain}/${rW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="webStorageSupport";class oW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fo,this._completeRedirectFn=Vf,this._overrideRedirectResult=Ky}async _openPopup(e,n,r,s){var i;br((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=Fm(e,n,r,Dl(),s);return tW(e,o,Eu())}async _openRedirect(e,n,r,s){return await this._originValidation(e),$H(Fm(e,n,r,Dl(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(br(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QK(e),r=new RA(e);return n.register("authEvent",s=>(U(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yg,{type:yg},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[yg];o!==void 0&&n(!!o),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tA()||My()||ic()}}const aW=oW;class cW{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Mr("unexpected MultiFactorSessionType")}}}class Wy extends cW{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Wy(e)}_finalizeEnroll(e,n,r){return PH(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return YH(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class PA{constructor(){}static assertion(e){return Wy._fromCredential(e)}}PA.FACTOR_ID="phone";var cI="@firebase/auth",lI="0.20.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var s;e(((s=r)===null||s===void 0?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function hW(t){ct(new ke("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:i,authDomain:o}=r.options;return((a,c)=>{U(i&&!i.includes(":"),"invalid-api-key",{appName:a.name}),U(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nA(t)},u=new Mq(a,c,l);return fq(u,n),u})(r,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ct(new ke("auth-internal",e=>{const n=Ft(e.getProvider("auth").getImmediate());return(r=>new lW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qe(cI,lI,uW(t)),qe(cI,lI,"esm2017")}hW("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dW=2e3;async function fW(t,e,n){var r;const{BuildInfo:s}=po();br(e.sessionId,"AuthEvent did not contain a session ID");const i=await yW(e.sessionId),o={};return ic()?o.ibi=s.packageName:wu()?o.apn=s.packageName:Zt(t,"operation-not-supported-in-this-environment"),s.displayName&&(o.appDisplayName=s.displayName),o.sessionId=i,Fm(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function pW(t){const{BuildInfo:e}=po(),n={};ic()?n.iosBundleId=e.packageName:wu()?n.androidPackageName=e.packageName:Zt(t,"operation-not-supported-in-this-environment"),await NA(t,n)}function gW(t){const{cordova:e}=po();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,xq()?"_blank":"_system","location=yes"),n(s)})})}async function mW(t,e,n){const{cordova:r}=po();let s=()=>{};try{await new Promise((i,o)=>{let a=null;function c(){var h;i();const d=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function l(){a||(a=window.setTimeout(()=>{o(Qt(t,"redirect-cancelled-by-user"))},dW))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&l()}e.addPassiveListener(c),document.addEventListener("resume",l,!1),wu()&&document.addEventListener("visibilitychange",u,!1),s=()=>{e.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{s()}}function _W(t){var e,n,r,s,i,o,a,c,l,u;const h=po();U(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U(typeof((i=(s=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||i===void 0?void 0:i.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((c=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((u=(l=h==null?void 0:h.cordova)===null||l===void 0?void 0:l.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function yW(t){const e=vW(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function vW(t){if(br(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW=20;class EW extends RA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function bW(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:SW(),postBody:null,tenantId:t.tenantId,error:Qt(t,"no-auth-event")}}function IW(t,e){return Um()._set(Bm(t),e)}async function uI(t){const e=await Um()._get(Bm(t));return e&&await Um()._remove(Bm(t)),e}function TW(t,e){var n,r;const s=kW(e);if(s.includes("/__/auth/callback")){const i=Fh(s),o=i.firebaseError?CW(decodeURIComponent(i.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],c=a?Qt(a):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function SW(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<wW;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Um(){return Hn($y)}function Bm(t){return no("authEvent",t.config.apiKey,t.name)}function CW(t){try{return JSON.parse(t)}catch{return null}}function kW(t){const e=Fh(t),n=e.link?decodeURIComponent(e.link):void 0,r=Fh(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Fh(s).link||s||r||n||t}function Fh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return na(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW=500;class RW{constructor(){this._redirectPersistence=fo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vf,this._overrideRedirectResult=Ky}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new EW(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Zt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,s){_W(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),CK(),await this._originValidation(e);const o=bW(e,r,s);await IW(e,o);const a=await fW(e,o,n),c=await gW(a);return mW(e,i,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pW(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:s,BuildInfo:i}=po(),o=setTimeout(async()=>{await uI(e),n.onEvent(hI())},AW),a=async u=>{clearTimeout(o);const h=await uI(e);let d=null;h&&(u==null?void 0:u.url)&&(d=TW(h,u.url)),n.onEvent(d||hI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const c=s,l=`${i.packageName.toLowerCase()}://`;po().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(l)&&a({url:u}),typeof c=="function")try{c(u)}catch(h){console.error(h)}}}}const xW=RW;function hI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Qt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NW(t,e){Ft(t)._logFramework(e)}var PW="@firebase/auth-compat",DW="0.2.20";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OW=1e3;function il(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function MW(){return il()==="http:"||il()==="https:"}function DA(t=it()){return!!((il()==="file:"||il()==="ionic:"||il()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function LW(){return Tf()||yy()}function FW(){return $C()&&(document==null?void 0:document.documentMode)===11}function UW(t=it()){return/Edge\/\d+/.test(t)}function BW(t=it()){return FW()||UW(t)}function OA(){try{const t=self.localStorage,e=Eu();if(t)return t.setItem(e,"1"),t.removeItem(e),BW()?Fn():!0}catch{return zy()&&Fn()}return!1}function zy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vg(){return(MW()||If()||DA())&&!LW()&&OA()&&!zy()}function MA(){return DA()&&typeof document<"u"}async function $W(){return MA()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},OW);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function VW(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn={LOCAL:"local",NONE:"none",SESSION:"session"},kc=U,LA="persistence";function jW(t,e){if(kc(Object.values(jn).includes(e),t,"invalid-persistence-type"),Tf()){kc(e!==jn.SESSION,t,"unsupported-persistence-type");return}if(yy()){kc(e===jn.NONE,t,"unsupported-persistence-type");return}if(zy()){kc(e===jn.NONE||e===jn.LOCAL&&Fn(),t,"unsupported-persistence-type");return}kc(e===jn.NONE||OA(),t,"unsupported-persistence-type")}async function $m(t){await t._initializationPromise;const e=FA(),n=no(LA,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function qW(t,e){const n=FA();if(!n)return[];const r=no(LA,t,e);switch(n.getItem(r)){case jn.NONE:return[xa];case jn.LOCAL:return[Fl,fo];case jn.SESSION:return[fo];default:return[]}}function FA(){var t;try{return((t=VW())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HW=U;class qs{constructor(){this.browserResolver=Hn(aW),this.cordovaResolver=Hn(xW),this.underlyingResolver=null,this._redirectPersistence=fo,this._completeRedirectFn=Vf,this._overrideRedirectResult=Ky}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,s)}async _openRedirect(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,s)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return MA()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return HW(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await $W();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){return t.unwrap()}function KW(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(t){return BA(t)}function zW(t,e){var n,r;const s=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if(((r=e)===null||r===void 0?void 0:r.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new GW(t,xH(t,e))}else if(s){const i=BA(e),o=e;i&&(o.credential=i,o.tenantId=s.tenantId||void 0,o.email=s.email||void 0,o.phoneNumber=s.phoneNumber||void 0)}}function BA(t){const{_tokenResponse:e}=t instanceof st?t.customData:t;if(!e)return null;if(!(t instanceof st)&&"temporaryProof"in e&&"phoneNumber"in e)return yr.credentialFromResult(t);const n=e.providerId;if(!n||n===Cc.PASSWORD)return null;let r;switch(n){case Cc.GOOGLE:r=xr;break;case Cc.FACEBOOK:r=Rr;break;case Cc.GITHUB:r=Nr;break;case Cc.TWITTER:r=Pr;break;default:const{oauthIdToken:s,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:a,nonce:c}=e;return!i&&!o&&!s&&!a?null:a?n.startsWith("saml.")?Na._create(n,a):Hr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:s,accessToken:i}):new fa(n).credential({idToken:s,accessToken:i,rawNonce:c})}return t instanceof st?r.credentialFromError(t):r.credentialFromResult(t)}function Rn(t,e){return e.catch(n=>{throw n instanceof st&&zW(t,n),n}).then(n=>{const r=n.operationType,s=n.user;return{operationType:r,credential:WW(n),additionalUserInfo:RH(n),user:as.getOrCreate(s)}})}async function Vm(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Rn(t,n.confirm(r))}}class GW{constructor(e,n){this.resolver=n,this.auth=KW(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Rn(UA(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._delegate=e,this.multiFactor=OH(e)}static getOrCreate(e){return as.USER_MAP.has(e)||as.USER_MAP.set(e,new as(e)),as.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Rn(this.auth,hA(this._delegate,e))}async linkWithPhoneNumber(e,n){return Vm(this.auth,fK(this._delegate,e,n))}async linkWithPopup(e){return Rn(this.auth,bK(this._delegate,e,qs))}async linkWithRedirect(e){return await $m(Ft(this.auth)),NK(this._delegate,e,qs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Rn(this.auth,dA(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Vm(this.auth,pK(this._delegate,e,n))}reauthenticateWithPopup(e){return Rn(this.auth,EK(this._delegate,e,qs))}async reauthenticateWithRedirect(e){return await $m(Ft(this.auth)),RK(this._delegate,e,qs)}sendEmailVerification(e){return yH(this._delegate,e)}async unlink(e){return await sH(this._delegate,e),this}updateEmail(e){return bH(this._delegate,e)}updatePassword(e){return IH(this._delegate,e)}updatePhoneNumber(e){return gK(this._delegate,e)}updateProfile(e){return EH(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return vH(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}as.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=U;class jm{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Ac(r,"invalid-api-key",{appName:e.name}),Ac(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?qs:void 0;this._delegate=n.initialize({options:{persistence:QW(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(hq),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?as.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){Lq(this._delegate,e,n)}applyActionCode(e){return lH(this._delegate,e)}checkActionCode(e){return fA(this._delegate,e)}confirmPasswordReset(e,n){return cH(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Rn(this._delegate,hH(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return _H(this._delegate,e)}isSignInWithEmailLink(e){return pH(this._delegate,e)}async getRedirectResult(){Ac(vg(),this._delegate,"operation-not-supported-in-this-environment");const e=await DK(this._delegate,qs);return e?Rn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){NW(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:s,error:i,complete:o}=dI(e,n,r);return this._delegate.onAuthStateChanged(s,i,o)}onIdTokenChanged(e,n,r){const{next:s,error:i,complete:o}=dI(e,n,r);return this._delegate.onIdTokenChanged(s,i,o)}sendSignInLinkToEmail(e,n){return fH(this._delegate,e,n)}sendPasswordResetEmail(e,n){return aH(this._delegate,e,n||void 0)}async setPersistence(e){jW(this._delegate,e);let n;switch(e){case jn.SESSION:n=fo;break;case jn.LOCAL:n=await Hn(Fl)._isAvailable()?Fl:$y;break;case jn.NONE:n=xa;break;default:return Zt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Rn(this._delegate,rH(this._delegate))}signInWithCredential(e){return Rn(this._delegate,Mf(this._delegate,e))}signInWithCustomToken(e){return Rn(this._delegate,oH(this._delegate,e))}signInWithEmailAndPassword(e,n){return Rn(this._delegate,dH(this._delegate,e,n))}signInWithEmailLink(e,n){return Rn(this._delegate,gH(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Vm(this._delegate,dK(this._delegate,e,n))}async signInWithPopup(e){return Ac(vg(),this._delegate,"operation-not-supported-in-this-environment"),Rn(this._delegate,wK(this._delegate,e,qs))}async signInWithRedirect(e){return Ac(vg(),this._delegate,"operation-not-supported-in-this-environment"),await $m(this._delegate),kK(this._delegate,e,qs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return uH(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}jm.Persistence=jn;function dI(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const s=r;return{next:o=>s(o&&as.getOrCreate(o)),error:e,complete:n}}function QW(t,e){const n=qW(t,e);if(typeof self<"u"&&!n.includes(Fl)&&n.push(Fl),typeof window<"u")for(const r of[$y,fo])n.includes(r)||n.push(r);return n.includes(xa)||n.push(xa),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.providerId="phone",this._delegate=new yr(UA(je.auth()))}static credential(e,n){return yr.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Gy.PHONE_SIGN_IN_METHOD=yr.PHONE_SIGN_IN_METHOD;Gy.PROVIDER_ID=yr.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YW=U;class XW{constructor(e,n,r=je.app()){var s;YW((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new uK(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW="auth-compat";function ZW(t){t.INTERNAL.registerComponent(new ke(JW,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new jm(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Wo.EMAIL_SIGNIN,PASSWORD_RESET:Wo.PASSWORD_RESET,RECOVER_EMAIL:Wo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Wo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Wo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Wo.VERIFY_EMAIL}},EmailAuthProvider:_i,FacebookAuthProvider:Rr,GithubAuthProvider:Nr,GoogleAuthProvider:xr,OAuthProvider:fa,SAMLAuthProvider:pd,PhoneAuthProvider:Gy,PhoneMultiFactorGenerator:PA,RecaptchaVerifier:XW,TwitterAuthProvider:Pr,Auth:jm,AuthCredential:oc,Error:st}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(PW,DW)}ZW(je);const fI="@firebase/database",pI="0.13.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $A="";function VA(t){$A=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),bt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Cl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Gn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ez(e)}}catch{}return new tz},Ki=jA("localStorage"),qm=jA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Xr("@firebase/database"),qA=function(){let t=1;return function(){return t++}}(),HA=function(t){const e=bB(t),n=new vB;n.update(e);const r=n.digest();return bf.encodeByteArray(r)},Iu=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Iu.apply(null,r):typeof r=="object"?e+=bt(r):e+=r,e+=" "}return e};let so=null,gI=!0;const KA=function(t,e){B(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ga.logLevel=_e.VERBOSE,so=ga.log.bind(ga),e&&qm.set("logging_enabled",!0)):typeof t=="function"?so=t:(so=null,qm.remove("logging_enabled"))},Pt=function(...t){if(gI===!0&&(gI=!1,so===null&&qm.get("logging_enabled")===!0&&KA(!0)),so){const e=Iu.apply(null,t);so(e)}},Tu=function(t){return function(...e){Pt(t,...e)}},Hm=function(...t){const e="FIREBASE INTERNAL ERROR: "+Iu(...t);ga.error(e)},Kr=function(...t){const e=`FIREBASE FATAL ERROR: ${Iu(...t)}`;throw ga.error(e),new Error(e)},on=function(...t){const e="FIREBASE WARNING: "+Iu(...t);ga.warn(e)},nz=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&on("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},jf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},rz=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ys="[MIN_NAME]",Wr="[MAX_NAME]",Mo=function(t,e){if(t===e)return 0;if(t===ys||e===Wr)return-1;if(e===ys||t===Wr)return 1;{const n=yd(t),r=yd(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},sz=function(t,e){return t===e?0:t<e?-1:1},Rc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+bt(e))},Qy=function(t){if(typeof t!="object"||t===null)return bt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=bt(e[r]),n+=":",n+=Qy(t[e[r]]);return n+="}",n},WA=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Ut(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const zA=function(t){B(!jf(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let h="";for(c=0;c<64;c+=8){let d=parseInt(u.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},iz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function az(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const cz=new RegExp("^-?(0*)\\d{1,10}$"),GA=-2147483648,Yy=2147483647,yd=function(t){if(cz.test(t)){const e=Number(t);if(e>=GA&&e<=Yy)return e}return null},cc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw on("Exception was thrown by user callback.",n),e},Math.floor(0))}},lz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ol=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){on(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Pt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',on(e)}}class ma{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ma.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="5",QA="v",YA="s",XA="r",JA="f",ZA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eR="ls",tR="p",Km="ac",nR="websocket",rR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,s,i=!1,o="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ki.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ki.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function dz(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function iR(t,e,n){B(typeof e=="string","typeof type must == string"),B(typeof n=="object","typeof params must == object");let r;if(e===nR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===rR)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);dz(t)&&(n.ns=t.namespace);const s=[];return Ut(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(){this.counters_={}}incrementCounter(e,n=1){Gn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return cB(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg={},Eg={};function Jy(t){const e=t.toString();return wg[e]||(wg[e]=new fz),wg[e]}function pz(t,e){const n=t.toString();return Eg[n]||(Eg[n]=e()),Eg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&cc(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="start",mz="close",_z="pLPCommand",yz="pRTLPCB",oR="id",aR="pw",cR="ser",vz="cb",wz="seg",Ez="ts",bz="d",Iz="dframe",lR=1870,uR=30,Tz=lR-uR,Sz=25e3,Cz=3e4;class Hs{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tu(e),this.stats_=Jy(n),this.urlFn=c=>(this.appCheckToken&&(c[Km]=this.appCheckToken),iR(n,rR,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new gz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Cz)),rz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zy((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===mI)this.id=a,this.password=c;else if(o===mz)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[mI]="t",r[cR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[vz]=this.scriptTagHolder.uniqueCallbackIdentifier),r[QA]=Xy,this.transportSessionId&&(r[YA]=this.transportSessionId),this.lastSessionId&&(r[eR]=this.lastSessionId),this.applicationId&&(r[tR]=this.applicationId),this.appCheckToken&&(r[Km]=this.appCheckToken),typeof location<"u"&&location.hostname&&ZA.test(location.hostname)&&(r[XA]=JA);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hs.forceAllow_=!0}static forceDisallow(){Hs.forceDisallow_=!0}static isAvailable(){return Hs.forceAllow_?!0:!Hs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!iz()&&!oz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=BC(n),s=WA(r,Tz);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Iz]="t",r[oR]=e,r[aR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=bt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Zy{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qA(),window[_z+this.uniqueCallbackIdentifier]=e,window[yz+this.uniqueCallbackIdentifier]=n,this.myIFrame=Zy.createIFrame_();let i="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const a=document.domain;i='<script>document.domain="'+a+'";<\/script>'}const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Pt("frame writing exception"),a.stack&&Pt(a.stack),Pt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Pt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[oR]=this.myID,e[aR]=this.myPW,e[cR]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uR+r.length<=lR;){const o=this.pendingSegs.shift();r=r+"&"+wz+s+"="+o.seg+"&"+Ez+s+"="+o.ts+"&"+bz+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Sz)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Pt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=16384,Az=45e3;let vd=null;typeof MozWebSocket<"u"?vd=MozWebSocket:typeof WebSocket<"u"&&(vd=WebSocket);class tr{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tu(this.connId),this.stats_=Jy(n),this.connURL=tr.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[QA]=Xy,typeof location<"u"&&location.hostname&&ZA.test(location.hostname)&&(o[XA]=JA),n&&(o[YA]=n),r&&(o[eR]=r),s&&(o[Km]=s),i&&(o[tR]=i),iR(e,nR,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ki.set("previous_websocket_failure",!0);try{let r;VC(),this.mySock=new vd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){tr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&vd!==null&&!tr.forceDisallow_}static previouslyFailed(){return Ki.isInMemoryStorage||Ki.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ki.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Cl(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(B(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=WA(n,kz);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Az))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}tr.responsesRequiredToBeHealthy=2;tr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Hs,tr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=tr&&tr.isAvailable();let r=n&&!tr.previouslyFailed();if(e.webSocketOnly&&(n||on("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[tr];else{const s=this.transports_=[];for(const i of Pa.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Pa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=6e4,xz=5e3,Nz=10*1024,Pz=100*1024,bg="t",_I="d",Dz="s",yI="r",Oz="e",vI="o",wI="a",EI="n",bI="p",Mz="h";class Lz{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tu("c:"+this.id+":"),this.transportManager_=new Pa(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=ol(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Pz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Nz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(bg in e){const n=e[bg];n===wI?this.upgradeIfSecondaryHealthy_():n===yI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===vI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Rc("t",e),r=Rc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:wI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:EI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Rc("t",e),r=Rc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Rc(bg,e);if(_I in e){const r=e[_I];if(n===Mz)this.onHandshake_(r);else if(n===EI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Dz?this.onConnectionShutdown_(r):n===yI?this.onReset_(r):n===Oz?Hm("Server Error: "+r):n===vI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hm("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Xy!==r&&on("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ol(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Rz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ol(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(xz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ki.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.allowedEvents_=e,this.listeners_={},B(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){B(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends dR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_y()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wd}getInitialEvent(e){return B(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=32,TI=768;class De{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ae(){return new De("")}function ye(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function si(t){return t.pieces_.length-t.pieceNum_}function $e(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new De(t.pieces_,e)}function ev(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Fz(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ul(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function fR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new De(e,0)}function Je(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof De)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new De(n,0)}function ve(t){return t.pieceNum_>=t.pieces_.length}function vn(t,e){const n=ye(t),r=ye(e);if(n===null)return e;if(n===r)return vn($e(t),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Uz(t,e){const n=Ul(t,0),r=Ul(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=Mo(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function tv(t,e){if(si(t)!==si(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function rr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(si(t)>si(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Bz{constructor(e,n){this.errorPrefix_=n,this.parts_=Ul(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Cf(this.parts_[r]);pR(this)}}function $z(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Cf(e),pR(t)}function Vz(t){const e=t.parts_.pop();t.byteLength_-=Cf(e),t.parts_.length>0&&(t.byteLength_-=1)}function pR(t){if(t.byteLength_>TI)throw new Error(t.errorPrefix_+"has a key path longer than "+TI+" bytes ("+t.byteLength_+").");if(t.parts_.length>II)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+II+") or object contains a cycle "+Di(t))}function Di(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends dR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new nv}getInitialEvent(e){return B(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=1e3,jz=60*5*1e3,SI=30*1e3,qz=1.3,Hz=3e4,Kz="server_kill",CI=3;class fs extends hR{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=fs.nextPersistentConnectionId_++,this.log_=Tu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xc,this.maxReconnectDelay_=jz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!VC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&wd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(bt(i)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Et,r={p:e._path.toString(),q:e._queryObject},s={action:"g",request:r,onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;fs.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Gn(e,"w")){const r=ao(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();on(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||yB(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=SI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=_B(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+bt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Hm("Unrecognized action received from server: "+bt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Hz&&(this.reconnectDelay_=xc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*qz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+fs.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(h){B(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Pt("getToken() completed but was canceled"):(Pt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new Lz(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{on(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(Kz)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&on(h),c())}}}interrupt(e){Pt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Pt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],id(this.interruptReasons_)&&(this.reconnectDelay_=xc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Qy(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new De(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Pt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=CI&&(this.reconnectDelay_=SI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Pt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=CI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+$A.replace(/\./g,"-")]=1,_y()?e["framework.cordova"]=1:Tf()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=wd.getInstance().currentlyOnline();return id(this.interruptReasons_)&&e}}fs.nextPersistentConnectionId_=0;fs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new we(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new we(ys,e),s=new we(ys,n);return this.compare(r,s)!==0}minPost(){return we.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph;class gR extends qf{static get __EMPTY_NODE(){return ph}static set __EMPTY_NODE(e){ph=e}compare(e,n){return Mo(e.name,n.name)}isDefinedOn(e){throw nc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return we.MIN}maxPost(){return new we(Wr,ph)}makePost(e,n){return B(typeof e=="string","KeyIndex indexValue must always be a string."),new we(e,ph)}toString(){return".key"}}const Ur=new gR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class xt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:xt.RED,this.left=s!=null?s:Dn.EMPTY_NODE,this.right=i!=null?i:Dn.EMPTY_NODE}copy(e,n,r,s,i){return new xt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Dn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}xt.RED=!0;xt.BLACK=!1;class Wz{copy(e,n,r,s,i){return this}insert(e,n,r){return new xt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Dn{constructor(e,n=Dn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Dn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))}remove(e){return new Dn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new gh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new gh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new gh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new gh(this.root_,null,this.comparator_,!0,e)}}Dn.EMPTY_NODE=new Wz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zz(t,e){return Mo(t.name,e.name)}function rv(t,e){return Mo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm;function Gz(t){Wm=t}const mR=function(t){return typeof t=="number"?"number:"+zA(t):"string:"+t},_R=function(t){if(t.isLeafNode()){const e=t.val();B(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gn(e,".sv"),"Priority must be a string or number.")}else B(t===Wm||t.isEmpty(),"priority of unexpected type.");B(t===Wm||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kI;class kt{constructor(e,n=kt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_R(this.priorityNode_)}static set __childrenNodeConstructor(e){kI=e}static get __childrenNodeConstructor(){return kI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new kt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:kt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ve(e)?this:ye(e)===".priority"?this.priorityNode_:kt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:kt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ye(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(B(r!==".priority"||si(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,kt.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+mR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=zA(this.value_):e+=this.value_,this.lazyHash_=HA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===kt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof kt.__childrenNodeConstructor?-1:(B(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=kt.VALUE_TYPE_ORDER.indexOf(n),i=kt.VALUE_TYPE_ORDER.indexOf(r);return B(s>=0,"Unknown leaf type: "+n),B(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}kt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yR,vR;function Qz(t){yR=t}function Yz(t){vR=t}class Xz extends qf{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Mo(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return we.MIN}maxPost(){return new we(Wr,new kt("[PRIORITY-POST]",vR))}makePost(e,n){const r=yR(e);return new we(n,new kt("[PRIORITY-POST]",r))}toString(){return".priority"}}const ze=new Xz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz=Math.log(2);class Zz{constructor(e){const n=i=>parseInt(Math.log(i)/Jz,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ed=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let h,d;if(u===0)return null;if(u===1)return h=t[c],d=n?n(h):h,new xt(d,h.node,xt.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),_=s(f+1,l);return h=t[f],d=n?n(h):h,new xt(d,h.node,xt.BLACK,p,_)}},i=function(c){let l=null,u=null,h=t.length;const d=function(p,_){const v=h-p,y=h;h-=p;const g=s(v+1,y),w=t[v],I=n?n(w):w;f(new xt(I,w.node,_,null,g))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const _=c.nextBitIsOne(),v=Math.pow(2,c.count-(p+1));_?d(v,xt.BLACK):(d(v,xt.BLACK),d(v,xt.RED))}return u},o=new Zz(t.length),a=i(o);return new Dn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig;const zo={};class cs{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return B(zo&&ze,"ChildrenNode.ts has not been loaded"),Ig=Ig||new cs({".priority":zo},{".priority":ze}),Ig}get(e){const n=ao(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Dn?n:null}hasIndex(e){return Gn(this.indexSet_,e.toString())}addIndex(e,n){B(e!==Ur,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(we.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Ed(r,e.getCompare()):a=zo;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new cs(u,l)}addToIndexes(e,n){const r=od(this.indexes_,(s,i)=>{const o=ao(this.indexSet_,i);if(B(o,"Missing index implementation for "+i),s===zo)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(we.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Ed(a,o.getCompare())}else return zo;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new we(e.name,a))),c.insert(e,e.node)}});return new cs(r,this.indexSet_)}removeFromIndexes(e,n){const r=od(this.indexes_,s=>{if(s===zo)return s;{const i=n.get(e.name);return i?s.remove(new we(e.name,i)):s}});return new cs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc;class se{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&_R(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Nc||(Nc=new se(new Dn(rv),null,cs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Nc}updatePriority(e){return this.children_.isEmpty()?this:new se(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Nc:n}}getChild(e){const n=ye(e);return n===null?this:this.getImmediateChild(n).getChild($e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(B(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new we(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Nc:this.priorityNode_;return new se(s,o,i)}}updateChild(e,n){const r=ye(e);if(r===null)return n;{B(ye(e)!==".priority"||si(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild($e(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(ze,(o,a)=>{n[o]=a.val(e),r++,i&&se.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+mR(this.getPriority().val())+":"),this.forEachChild(ze,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":HA(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new we(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new we(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new we(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,we.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,we.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Su?-1:0}withIndex(e){if(e===Ur||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new se(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ur||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ze),s=n.getIterator(ze);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ur?null:this.indexMap_.get(e.toString())}}se.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class eG extends se{constructor(){super(new Dn(rv),se.EMPTY_NODE,cs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return se.EMPTY_NODE}isEmpty(){return!1}}const Su=new eG;Object.defineProperties(we,{MIN:{value:new we(ys,se.EMPTY_NODE)},MAX:{value:new we(Wr,Su)}});gR.__EMPTY_NODE=se.EMPTY_NODE;kt.__childrenNodeConstructor=se;Gz(Su);Yz(Su);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tG=!0;function tt(t,e=null){if(t===null)return se.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),B(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new kt(n,tt(e))}if(!(t instanceof Array)&&tG){const n=[];let r=!1;if(Ut(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=tt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new we(o,c)))}}),n.length===0)return se.EMPTY_NODE;const i=Ed(n,zz,o=>o.name,rv);if(r){const o=Ed(n,ze.getCompare());return new se(i,tt(e),new cs({".priority":o},{".priority":ze}))}else return new se(i,tt(e),cs.Default)}else{let n=se.EMPTY_NODE;return Ut(t,(r,s)=>{if(Gn(t,r)&&r.substring(0,1)!=="."){const i=tt(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(tt(e))}}Qz(tt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends qf{constructor(e){super(),this.indexPath_=e,B(!ve(e)&&ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Mo(e.name,n.name):i}makePost(e,n){const r=tt(e),s=se.EMPTY_NODE.updateChild(this.indexPath_,r);return new we(n,s)}maxPost(){const e=se.EMPTY_NODE.updateChild(this.indexPath_,Su);return new we(Wr,e)}toString(){return Ul(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG extends qf{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Mo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return we.MIN}maxPost(){return we.MAX}makePost(e,n){const r=tt(e);return new we(n,r)}toString(){return".value"}}const iv=new nG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zm="-",wR="z",ER=786,rG=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=Da.charAt(n%64),n=Math.floor(n/64);B(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=Da.charAt(e[s]);return B(o.length===20,"nextPushId: Length should be 20."),o}}(),AI=function(t){if(t===""+Yy)return zm;const e=yd(t);if(e!=null)return""+(e+1);const n=new Array(t.length);for(let o=0;o<n.length;o++)n[o]=t.charAt(o);if(n.length<ER)return n.push(zm),n.join("");let r=n.length-1;for(;r>=0&&n[r]===wR;)r--;if(r===-1)return Wr;const s=n[r],i=Da.charAt(Da.indexOf(s)+1);return n[r]=i,n.slice(0,r+1).join("")},RI=function(t){if(t===""+GA)return ys;const e=yd(t);if(e!=null)return""+(e-1);const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=t.charAt(r);return n[n.length-1]===zm?n.length===1?""+Yy:(delete n[n.length-1],n.join("")):(n[n.length-1]=Da.charAt(Da.indexOf(n[n.length-1])-1),n.join("")+wR.repeat(ER-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){return{type:"value",snapshotNode:t}}function Oa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Bl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $l(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function sG(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){B(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Bl(n,a)):B(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Oa(n,r)):o.trackChildChange($l(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ze,(s,i)=>{n.hasChild(s)||r.trackChildChange(Bl(s,i))}),n.isLeafNode()||n.forEachChild(ze,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange($l(s,i,o))}else r.trackChildChange(Oa(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?se.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.indexedFilter_=new ov(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Vl.getStartPost_(e),this.endPost_=Vl.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,n,r,s,i,o){return this.matches(new we(n,r))||(r=se.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=se.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(se.EMPTY_NODE);const i=this;return n.forEachChild(ze,(o,a)=>{i.matches(new we(o,a))||(s=s.updateImmediateChild(o,se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e){this.rangedFilter_=new Vl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new we(n,r))||(r=se.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=se.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=se.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();let c;if(this.reverse_?c=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:c=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,c)s=s.updateImmediateChild(a.name,a.node),o++;else break}}else{s=n.withIndex(this.index_),s=s.updatePriority(se.EMPTY_NODE);let i,o,a,c;if(this.reverse_){c=s.getReverseIterator(this.index_),i=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const h=this.index_.getCompare();a=(d,f)=>h(f,d)}else c=s.getIterator(this.index_),i=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let l=0,u=!1;for(;c.hasNext();){const h=c.getNext();!u&&a(i,h)<=0&&(u=!0),u&&l<this.limit_&&a(h,o)<=0?l++:s=s.updateImmediateChild(h.name,se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,f)=>h(f,d)}else o=this.index_.getCompare();const a=e;B(a.numChildren()===this.limit_,"");const c=new we(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=s.getChildAfterChild(this.index_,l,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=s.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:o(d,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange($l(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Bl(n,h));const _=a.updateImmediateChild(n,se.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(i!=null&&i.trackChildChange(Oa(d.name,d.node)),_.updateImmediateChild(d.name,d.node)):_}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(Bl(l.name,l.node)),i.trackChildChange(Oa(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,se.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ze}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ys}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ze}copy(){const e=new Hf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oG(t){return t.loadsAllData()?new ov(t.getIndex()):t.hasLimit()?new iG(t):new Vl(t)}function aG(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function cG(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Gm(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function lG(t,e,n){let r;if(t.index_===Ur)typeof e=="string"&&(e=AI(e)),r=Gm(t,e,n);else{let s;n==null?s=Wr:s=AI(n),r=Gm(t,e,s)}return r.startAfterSet_=!0,r}function Qm(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function uG(t,e,n){let r,s;return t.index_===Ur?(typeof e=="string"&&(e=RI(e)),s=Qm(t,e,n)):(n==null?r=ys:r=RI(n),s=Qm(t,e,r)),s.endBeforeSet_=!0,s}function Kf(t,e){const n=t.copy();return n.index_=e,n}function xI(t){const e={};if(t.isDefault())return e;let n;return t.index_===ze?n="$priority":t.index_===iv?n="$value":t.index_===Ur?n="$key":(B(t.index_ instanceof sv,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=bt(n),t.startSet_&&(e.startAt=bt(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+bt(t.indexStartName_))),t.endSet_&&(e.endAt=bt(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+bt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function NI(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ze&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends hR{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Tu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(B(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=bd.getListenId_(e,r),a={};this.listens_[o]=a;const c=xI(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let h=u;if(l===404&&(h=null,l=null),l===null&&this.onDataUpdate_(i,h,!1,r),ao(this.listens_,o)===a){let d;l?l===401?d="permission_denied":d="rest_error:"+l:d="ok",s(d,null)}})}unlisten(e,n){const r=bd.getListenId_(e,n);delete this.listens_[r]}get(e){const n=xI(e._queryParams),r=e._path.toString(),s=new Et;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Po(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Cl(a.responseText)}catch{on("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&on("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(){this.rootNode_=se.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(){return{value:null,children:new Map}}function lc(t,e,n){if(ve(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ye(e);t.children.has(r)||t.children.set(r,Id());const s=t.children.get(r);e=$e(e),lc(s,e,n)}}function Ym(t,e){if(ve(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ze,(r,s)=>{lc(t,new De(r),s)}),Ym(t,e)}}else if(t.children.size>0){const n=ye(e);return e=$e(e),t.children.has(n)&&Ym(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Xm(t,e,n){t.value!==null?n(e,t.value):dG(t,(r,s)=>{const i=new De(e.toString()+"/"+r);Xm(s,i,n)})}function dG(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ut(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=10*1e3,pG=30*1e3,gG=5*60*1e3;class mG{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new fG(e);const r=PI+(pG-PI)*Math.random();ol(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ut(e,(s,i)=>{i>0&&Gn(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),ol(this.reportStats_.bind(this),Math.floor(Math.random()*2*gG))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(gr||(gr={}));function av(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function cv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function lv(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=gr.ACK_USER_WRITE,this.source=av()}operationForChild(e){if(ve(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new De(e));return new Td(Ae(),n,this.revert)}}else return B(ye(this.path)===e,"operationForChild called for unrelated child."),new Td($e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.source=e,this.path=n,this.type=gr.LISTEN_COMPLETE}operationForChild(e){return ve(this.path)?new jl(this.source,Ae()):new jl(this.source,$e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=gr.OVERWRITE}operationForChild(e){return ve(this.path)?new go(this.source,Ae(),this.snap.getImmediateChild(e)):new go(this.source,$e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=gr.MERGE}operationForChild(e){if(ve(this.path)){const n=this.children.subtree(new De(e));return n.isEmpty()?null:n.value?new go(this.source,Ae(),n.value):new Ma(this.source,Ae(),n)}else return B(ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ma(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ve(e))return this.isFullyInitialized()&&!this.filtered_;const n=ye(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function yG(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(sG(o.childName,o.snapshotNode))}),Pc(t,s,"child_removed",e,r,n),Pc(t,s,"child_added",e,r,n),Pc(t,s,"child_moved",i,r,n),Pc(t,s,"child_changed",e,r,n),Pc(t,s,"value",e,r,n),s}function Pc(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>wG(t,a,c)),o.forEach(a=>{const c=vG(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function vG(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function wG(t,e,n){if(e.childName==null||n.childName==null)throw nc("Should only compare child_ events.");const r=new we(e.childName,e.snapshotNode),s=new we(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e){return{eventCache:t,serverCache:e}}function al(t,e,n,r){return Wf(new ii(e,n,r),t.serverCache)}function IR(t,e,n,r){return Wf(t.eventCache,new ii(e,n,r))}function Sd(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function mo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tg;const EG=()=>(Tg||(Tg=new Dn(sz)),Tg);class He{constructor(e,n=EG()){this.value=e,this.children=n}static fromObject(e){let n=new He(null);return Ut(e,(r,s)=>{n=n.set(new De(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ae(),value:this.value};if(ve(e))return null;{const r=ye(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue($e(e),n);return i!=null?{path:Je(new De(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ve(e))return this;{const n=ye(e),r=this.children.get(n);return r!==null?r.subtree($e(e)):new He(null)}}set(e,n){if(ve(e))return new He(n,this.children);{const r=ye(e),i=(this.children.get(r)||new He(null)).set($e(e),n),o=this.children.insert(r,i);return new He(this.value,o)}}remove(e){if(ve(e))return this.children.isEmpty()?new He(null):new He(null,this.children);{const n=ye(e),r=this.children.get(n);if(r){const s=r.remove($e(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new He(null):new He(this.value,i)}else return this}}get(e){if(ve(e))return this.value;{const n=ye(e),r=this.children.get(n);return r?r.get($e(e)):null}}setTree(e,n){if(ve(e))return n;{const r=ye(e),i=(this.children.get(r)||new He(null)).setTree($e(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new He(this.value,o)}}fold(e){return this.fold_(Ae(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Je(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ae(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ve(e))return null;{const i=ye(e),o=this.children.get(i);return o?o.findOnPath_($e(e),Je(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ae(),n)}foreachOnPath_(e,n,r){if(ve(e))return this;{this.value&&r(n,this.value);const s=ye(e),i=this.children.get(s);return i?i.foreachOnPath_($e(e),Je(n,s),r):new He(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Je(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.writeTree_=e}static empty(){return new vr(new He(null))}}function cl(t,e,n){if(ve(e))return new vr(new He(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=vn(s,e);return i=i.updateChild(o,n),new vr(t.writeTree_.set(s,i))}else{const s=new He(n),i=t.writeTree_.setTree(e,s);return new vr(i)}}}function Jm(t,e,n){let r=t;return Ut(n,(s,i)=>{r=cl(r,Je(e,s),i)}),r}function DI(t,e){if(ve(e))return vr.empty();{const n=t.writeTree_.setTree(e,new He(null));return new vr(n)}}function Zm(t,e){return Lo(t,e)!=null}function Lo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(vn(n.path,e)):null}function OI(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ze,(r,s)=>{e.push(new we(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new we(r,s.value))}),e}function Qs(t,e){if(ve(e))return t;{const n=Lo(t,e);return n!=null?new vr(new He(n)):new vr(t.writeTree_.subtree(e))}}function e_(t){return t.writeTree_.isEmpty()}function La(t,e){return TR(Ae(),t.writeTree_,e)}function TR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(B(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=TR(Je(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Je(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e){return AR(e,t)}function bG(t,e,n,r,s){B(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=cl(t.visibleWrites,e,n)),t.lastWriteId=r}function IG(t,e,n,r){B(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Jm(t.visibleWrites,e,n),t.lastWriteId=r}function TG(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function SG(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);B(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&CG(a,r.path)?s=!1:rr(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return kG(t),!0;if(r.snap)t.visibleWrites=DI(t.visibleWrites,r.path);else{const a=r.children;Ut(a,c=>{t.visibleWrites=DI(t.visibleWrites,Je(r.path,c))})}return!0}else return!1}function CG(t,e){if(t.snap)return rr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&rr(Je(t.path,n),e))return!0;return!1}function kG(t){t.visibleWrites=SR(t.allWrites,AG,Ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function AG(t){return t.visible}function SR(t,e,n){let r=vr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)rr(n,o)?(a=vn(n,o),r=cl(r,a,i.snap)):rr(o,n)&&(a=vn(o,n),r=cl(r,Ae(),i.snap.getChild(a)));else if(i.children){if(rr(n,o))a=vn(n,o),r=Jm(r,a,i.children);else if(rr(o,n))if(a=vn(o,n),ve(a))r=Jm(r,Ae(),i.children);else{const c=ao(i.children,ye(a));if(c){const l=c.getChild($e(a));r=cl(r,Ae(),l)}}}else throw nc("WriteRecord should have .snap or .children")}}return r}function CR(t,e,n,r,s){if(!r&&!s){const i=Lo(t.visibleWrites,e);if(i!=null)return i;{const o=Qs(t.visibleWrites,e);if(e_(o))return n;if(n==null&&!Zm(o,Ae()))return null;{const a=n||se.EMPTY_NODE;return La(o,a)}}}else{const i=Qs(t.visibleWrites,e);if(!s&&e_(i))return n;if(!s&&n==null&&!Zm(i,Ae()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(rr(l.path,e)||rr(e,l.path))},a=SR(t.allWrites,o,e),c=n||se.EMPTY_NODE;return La(a,c)}}}function RG(t,e,n){let r=se.EMPTY_NODE;const s=Lo(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(ze,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Qs(t.visibleWrites,e);return n.forEachChild(ze,(o,a)=>{const c=La(Qs(i,new De(o)),a);r=r.updateImmediateChild(o,c)}),OI(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Qs(t.visibleWrites,e);return OI(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function xG(t,e,n,r,s){B(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Je(e,n);if(Zm(t.visibleWrites,i))return null;{const o=Qs(t.visibleWrites,i);return e_(o)?s.getChild(n):La(o,s.getChild(n))}}function NG(t,e,n,r){const s=Je(e,n),i=Lo(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Qs(t.visibleWrites,s);return La(o,r.getNode().getImmediateChild(n))}else return null}function PG(t,e){return Lo(t.visibleWrites,e)}function DG(t,e,n,r,s,i,o){let a;const c=Qs(t.visibleWrites,e),l=Lo(c,Ae());if(l!=null)a=l;else if(n!=null)a=La(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&u.length<s;)h(f,r)!==0&&u.push(f),f=d.getNext();return u}else return[]}function OG(){return{visibleWrites:vr.empty(),allWrites:[],lastWriteId:-1}}function Cd(t,e,n,r){return CR(t.writeTree,t.treePath,e,n,r)}function uv(t,e){return RG(t.writeTree,t.treePath,e)}function MI(t,e,n,r){return xG(t.writeTree,t.treePath,e,n,r)}function kd(t,e){return PG(t.writeTree,Je(t.treePath,e))}function MG(t,e,n,r,s,i){return DG(t.writeTree,t.treePath,e,n,r,s,i)}function hv(t,e,n){return NG(t.writeTree,t.treePath,e,n)}function kR(t,e){return AR(Je(t.treePath,e),t.writeTree)}function AR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;B(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),B(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,$l(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Bl(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Oa(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,$l(r,e.snapshotNode,s.oldSnap));else throw nc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const RR=new FG;class dv{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ii(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hv(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:mo(this.viewCache_),i=MG(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(t){return{filter:t}}function BG(t,e){B(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),B(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function $G(t,e,n,r,s){const i=new LG;let o,a;if(n.type===gr.OVERWRITE){const l=n;l.source.fromUser?o=t_(t,e,l.path,l.snap,r,s,i):(B(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ve(l.path),o=Ad(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===gr.MERGE){const l=n;l.source.fromUser?o=jG(t,e,l.path,l.children,r,s,i):(B(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=n_(t,e,l.path,l.children,r,s,a,i))}else if(n.type===gr.ACK_USER_WRITE){const l=n;l.revert?o=KG(t,e,l.path,r,s,i):o=qG(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===gr.LISTEN_COMPLETE)o=HG(t,e,n.path,r,i);else throw nc("Unknown operation type: "+n.type);const c=i.getChanges();return VG(e,o,c),{viewCache:o,changes:c}}function VG(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Sd(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(bR(Sd(e)))}}function xR(t,e,n,r,s,i){const o=e.eventCache;if(kd(r,n)!=null)return e;{let a,c;if(ve(n))if(B(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=mo(e),u=l instanceof se?l:se.EMPTY_NODE,h=uv(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const l=Cd(r,mo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=ye(n);if(l===".priority"){B(si(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const h=MI(r,n,u,c);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=$e(n);let h;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const d=MI(r,n,o.getNode(),c);d!=null?h=o.getNode().getImmediateChild(l).updateChild(u,d):h=o.getNode().getImmediateChild(l)}else h=hv(r,l,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),l,h,u,s,i):a=o.getNode()}}return al(e,a,o.isFullyInitialized()||ve(n),t.filter.filtersNodes())}}function Ad(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(ve(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=ye(n);if(!c.isCompleteForPath(n)&&si(n)>1)return e;const p=$e(n),v=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),v):l=u.updateChild(c.getNode(),f,v,p,RR,null)}const h=IR(e,l,c.isFullyInitialized()||ve(n),u.filtersNodes()),d=new dv(s,h,i);return xR(t,h,n,s,d,a)}function t_(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new dv(s,e,i);if(ve(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=al(e,l,!0,t.filter.filtersNodes());else{const h=ye(n);if(h===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=al(e,l,a.isFullyInitialized(),a.isFiltered());else{const d=$e(n),f=a.getNode().getImmediateChild(h);let p;if(ve(d))p=r;else{const _=u.getCompleteChild(h);_!=null?ev(d)===".priority"&&_.getChild(fR(d)).isEmpty()?p=_:p=_.updateChild(d,r):p=se.EMPTY_NODE}if(f.equals(p))c=e;else{const _=t.filter.updateChild(a.getNode(),h,p,d,u,o);c=al(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function LI(t,e){return t.eventCache.isCompleteForChild(e)}function jG(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Je(n,c);LI(e,ye(u))&&(a=t_(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Je(n,c);LI(e,ye(u))||(a=t_(t,a,u,l,s,i,o))}),a}function FI(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function n_(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ve(n)?l=r:l=new He(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=FI(t,f,d);c=Ad(t,c,new De(h),p,s,i,o,a)}}),l.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),_=FI(t,p,d);c=Ad(t,c,new De(h),_,s,i,o,a)}}),c}function qG(t,e,n,r,s,i,o){if(kd(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ve(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ad(t,e,n,c.getNode().getChild(n),s,i,a,o);if(ve(n)){let l=new He(null);return c.getNode().forEachChild(Ur,(u,h)=>{l=l.set(new De(u),h)}),n_(t,e,n,l,s,i,a,o)}else return e}else{let l=new He(null);return r.foreach((u,h)=>{const d=Je(n,u);c.isCompleteForPath(d)&&(l=l.set(u,c.getNode().getChild(d)))}),n_(t,e,n,l,s,i,a,o)}}function HG(t,e,n,r,s){const i=e.serverCache,o=IR(e,i.getNode(),i.isFullyInitialized()||ve(n),i.isFiltered());return xR(t,o,n,r,RR,s)}function KG(t,e,n,r,s,i){let o;if(kd(r,n)!=null)return e;{const a=new dv(r,e,s),c=e.eventCache.getNode();let l;if(ve(n)||ye(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Cd(r,mo(e));else{const h=e.serverCache.getNode();B(h instanceof se,"serverChildren would be complete if leaf node"),u=uv(r,h)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=ye(n);let h=hv(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),h!=null?l=t.filter.updateChild(c,u,h,$e(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,se.EMPTY_NODE,$e(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Cd(r,mo(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||kd(r,Ae())!=null,al(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WG{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new ov(r.getIndex()),i=oG(r);this.processor_=UG(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(se.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(se.EMPTY_NODE,a.getNode(),null),u=new ii(c,o.isFullyInitialized(),s.filtersNodes()),h=new ii(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Wf(h,u),this.eventGenerator_=new _G(this.query_)}get query(){return this.query_}}function zG(t){return t.viewCache_.serverCache.getNode()}function GG(t){return Sd(t.viewCache_)}function QG(t,e){const n=mo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ve(e)&&!n.getImmediateChild(ye(e)).isEmpty())?n.getChild(e):null}function UI(t){return t.eventRegistrations_.length===0}function YG(t,e){t.eventRegistrations_.push(e)}function BI(t,e,n){const r=[];if(n){B(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function $I(t,e,n,r){e.type===gr.MERGE&&e.source.queryId!==null&&(B(mo(t.viewCache_),"We should always have a full cache before handling merges"),B(Sd(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=$G(t.processor_,s,e,n,r);return BG(t.processor_,i.viewCache),B(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,NR(t,i.changes,i.viewCache.eventCache.getNode(),null)}function XG(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ze,(i,o)=>{r.push(Oa(i,o))}),n.isFullyInitialized()&&r.push(bR(n.getNode())),NR(t,r,n.getNode(),e)}function NR(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return yG(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd;class PR{constructor(){this.views=new Map}}function JG(t){B(!Rd,"__referenceConstructor has already been defined"),Rd=t}function ZG(){return B(Rd,"Reference.ts has not been loaded"),Rd}function e2(t){return t.views.size===0}function fv(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return B(i!=null,"SyncTree gave us an op for an invalid query."),$I(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat($I(o,e,n,r));return i}}function DR(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Cd(n,s?r:null),c=!1;a?c=!0:r instanceof se?(a=uv(n,r),c=!1):(a=se.EMPTY_NODE,c=!1);const l=Wf(new ii(a,c,!1),new ii(r,s,!1));return new WG(e,l)}return o}function t2(t,e,n,r,s,i){const o=DR(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),YG(o,n),XG(o,n)}function n2(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=oi(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(BI(l,n,r)),UI(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(BI(c,n,r)),UI(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!oi(t)&&i.push(new(ZG())(e._repo,e._path)),{removed:i,events:o}}function OR(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ys(t,e){let n=null;for(const r of t.views.values())n=n||QG(r,e);return n}function MR(t,e){if(e._queryParams.loadsAllData())return Gf(t);{const r=e._queryIdentifier;return t.views.get(r)}}function LR(t,e){return MR(t,e)!=null}function oi(t){return Gf(t)!=null}function Gf(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd;function r2(t){B(!xd,"__referenceConstructor has already been defined"),xd=t}function s2(){return B(xd,"Reference.ts has not been loaded"),xd}let i2=1;class VI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new He(null),this.pendingWriteTree_=OG(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pv(t,e,n,r,s){return bG(t.pendingWriteTree_,e,n,r,s),s?uc(t,new go(av(),e,n)):[]}function o2(t,e,n,r){IG(t.pendingWriteTree_,e,n,r);const s=He.fromObject(n);return uc(t,new Ma(av(),e,s))}function Ks(t,e,n=!1){const r=TG(t.pendingWriteTree_,e);if(SG(t.pendingWriteTree_,e)){let i=new He(null);return r.snap!=null?i=i.set(Ae(),!0):Ut(r.children,o=>{i=i.set(new De(o),!0)}),uc(t,new Td(r.path,i,n))}else return[]}function Cu(t,e,n){return uc(t,new go(cv(),e,n))}function a2(t,e,n){const r=He.fromObject(n);return uc(t,new Ma(cv(),e,r))}function c2(t,e){return uc(t,new jl(cv(),e))}function l2(t,e,n){const r=gv(t,n);if(r){const s=mv(r),i=s.path,o=s.queryId,a=vn(i,e),c=new jl(lv(o),a);return _v(t,i,c)}else return[]}function Nd(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||LR(o,e))){const c=n2(o,e,n,r);e2(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(d=>d._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(d,f)=>oi(f));if(u&&!h){const d=t.syncPointTree_.subtree(i);if(!d.isEmpty()){const f=d2(d);for(let p=0;p<f.length;++p){const _=f[p],v=_.query,y=$R(t,_);t.listenProvider_.startListening(ll(v),ql(t,v),y.hashFn,y.onComplete)}}}!h&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(ll(e),null):l.forEach(d=>{const f=t.queryToTagMap.get(Yf(d));t.listenProvider_.stopListening(ll(d),f)}))}f2(t,l)}return a}function FR(t,e,n,r){const s=gv(t,r);if(s!=null){const i=mv(s),o=i.path,a=i.queryId,c=vn(o,e),l=new go(lv(a),c,n);return _v(t,o,l)}else return[]}function u2(t,e,n,r){const s=gv(t,r);if(s){const i=mv(s),o=i.path,a=i.queryId,c=vn(o,e),l=He.fromObject(n),u=new Ma(lv(a),c,l);return _v(t,o,u)}else return[]}function r_(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(d,f)=>{const p=vn(d,s);i=i||Ys(f,p),o=o||oi(f)});let a=t.syncPointTree_.get(s);a?(o=o||oi(a),i=i||Ys(a,Ae())):(a=new PR,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=se.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const _=Ys(p,Ae());_&&(i=i.updateImmediateChild(f,_))}));const l=LR(a,e);if(!l&&!e._queryParams.loadsAllData()){const d=Yf(e);B(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const f=p2();t.queryToTagMap.set(d,f),t.tagToQueryMap.set(f,d)}const u=zf(t.pendingWriteTree_,s);let h=t2(a,e,n,u,i,c);if(!l&&!o&&!r){const d=MR(a,e);h=h.concat(g2(t,e,d))}return h}function Qf(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=vn(o,e),l=Ys(a,c);if(l)return l});return CR(s,e,i,n,!0)}function h2(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const h=vn(l,n);r=r||Ys(u,h)});let s=t.syncPointTree_.get(n);s?r=r||Ys(s,Ae()):(s=new PR,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new ii(r,!0,!1):null,a=zf(t.pendingWriteTree_,e._path),c=DR(s,e,a,i?o.getNode():se.EMPTY_NODE,i);return GG(c)}function uc(t,e){return UR(e,t.syncPointTree_,null,zf(t.pendingWriteTree_,Ae()))}function UR(t,e,n,r){if(ve(t.path))return BR(t,e,n,r);{const s=e.get(Ae());n==null&&s!=null&&(n=Ys(s,Ae()));let i=[];const o=ye(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=kR(r,o);i=i.concat(UR(a,c,l,u))}return s&&(i=i.concat(fv(s,t,r,n))),i}}function BR(t,e,n,r){const s=e.get(Ae());n==null&&s!=null&&(n=Ys(s,Ae()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=kR(r,o),u=t.operationForChild(o);u&&(i=i.concat(BR(u,a,c,l)))}),s&&(i=i.concat(fv(s,t,r,n))),i}function $R(t,e){const n=e.query,r=ql(t,n);return{hashFn:()=>(zG(e)||se.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?l2(t,n._path,r):c2(t,n._path);{const i=az(s,n);return Nd(t,n,null,i)}}}}function ql(t,e){const n=Yf(e);return t.queryToTagMap.get(n)}function Yf(t){return t._path.toString()+"$"+t._queryIdentifier}function gv(t,e){return t.tagToQueryMap.get(e)}function mv(t){const e=t.indexOf("$");return B(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new De(t.substr(0,e))}}function _v(t,e,n){const r=t.syncPointTree_.get(e);B(r,"Missing sync point for query tag that we're tracking");const s=zf(t.pendingWriteTree_,e);return fv(r,n,s,null)}function d2(t){return t.fold((e,n,r)=>{if(n&&oi(n))return[Gf(n)];{let s=[];return n&&(s=OR(n)),Ut(r,(i,o)=>{s=s.concat(o)}),s}})}function ll(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(s2())(t._repo,t._path):t}function f2(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Yf(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function p2(){return i2++}function g2(t,e,n){const r=e._path,s=ql(t,e),i=$R(t,n),o=t.listenProvider_.startListening(ll(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)B(!oi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,h)=>{if(!ve(l)&&u&&oi(u))return[Gf(u).query];{let d=[];return u&&(d=d.concat(OR(u).map(f=>f.query))),Ut(h,(f,p)=>{d=d.concat(p)}),d}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(ll(u),ql(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new yv(n)}node(){return this.node_}}class vv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Je(this.path_,e);return new vv(this.syncTree_,n)}node(){return Qf(this.syncTree_,this.path_)}}const m2=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},jI=function(t,e,n){if(!t||typeof t!="object")return t;if(B(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return _2(t[".sv"],e,n);if(typeof t[".sv"]=="object")return y2(t[".sv"],e);B(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},_2=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:B(!1,"Unexpected server value: "+t)}},y2=function(t,e,n){t.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&B(!1,"Unexpected increment value: "+r);const s=e.node();if(B(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},VR=function(t,e,n,r){return Ev(e,new vv(n,t),r)},wv=function(t,e,n){return Ev(t,new yv(e),n)};function Ev(t,e,n){const r=t.getPriority().val(),s=jI(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=jI(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new kt(a,tt(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new kt(s))),o.forEachChild(ze,(a,c)=>{const l=Ev(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Xf(t,e){let n=e instanceof De?e:new De(e),r=t,s=ye(n);for(;s!==null;){const i=ao(r.node.children,s)||{children:{},childCount:0};r=new bv(s,r,i),n=$e(n),s=ye(n)}return r}function Fo(t){return t.node.value}function Iv(t,e){t.node.value=e,s_(t)}function jR(t){return t.node.childCount>0}function v2(t){return Fo(t)===void 0&&!jR(t)}function Jf(t,e){Ut(t.node.children,(n,r)=>{e(new bv(n,t,r))})}function qR(t,e,n,r){n&&!r&&e(t),Jf(t,s=>{qR(s,e,!0,r)}),n&&r&&e(t)}function w2(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ku(t){return new De(t.parent===null?t.name:ku(t.parent)+"/"+t.name)}function s_(t){t.parent!==null&&E2(t.parent,t.name,t)}function E2(t,e,n){const r=v2(n),s=Gn(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,s_(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,s_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=/[\[\].#$\/\u0000-\u001F\u007F]/,I2=/[\[\].#$\u0000-\u001F\u007F]/,Sg=10*1024*1024,Zf=function(t){return typeof t=="string"&&t.length!==0&&!b2.test(t)},HR=function(t){return typeof t=="string"&&t.length!==0&&!I2.test(t)},T2=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),HR(t)},Hl=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!jf(t)||t&&typeof t=="object"&&Gn(t,".sv")},zr=function(t,e,n,r){r&&e===void 0||Au(Ln(t,"value"),e,n)},Au=function(t,e,n){const r=n instanceof De?new Bz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Di(r));if(typeof e=="function")throw new Error(t+"contains a function "+Di(r)+" with contents = "+e.toString());if(jf(e))throw new Error(t+"contains "+e.toString()+" "+Di(r));if(typeof e=="string"&&e.length>Sg/3&&Cf(e)>Sg)throw new Error(t+"contains a string greater than "+Sg+" utf8 bytes "+Di(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Ut(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Zf(o)))throw new Error(t+" contains an invalid key ("+o+") "+Di(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);$z(r,o),Au(t,a,r),Vz(r)}),s&&i)throw new Error(t+' contains ".value" child '+Di(r)+" in addition to actual children.")}},S2=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Ul(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!Zf(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Uz);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&rr(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},KR=function(t,e,n,r){if(r&&e===void 0)return;const s=Ln(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Ut(e,(o,a)=>{const c=new De(o);if(Au(s,a,Je(n,c)),ev(c)===".priority"&&!Hl(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),S2(s,i)},Tv=function(t,e,n){if(!(n&&e===void 0)){if(jf(e))throw new Error(Ln(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Hl(e))throw new Error(Ln(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ru=function(t,e,n,r){if(!(r&&n===void 0)&&!Zf(n))throw new Error(Ln(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Kl=function(t,e,n,r){if(!(r&&n===void 0)&&!HR(n))throw new Error(Ln(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},C2=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Kl(t,e,n,r)},sr=function(t,e){if(ye(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},WR=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Zf(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!T2(n))throw new Error(Ln(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ep(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!tv(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function zR(t,e,n){ep(t,n),GR(t,r=>tv(r,e))}function Qn(t,e,n){ep(t,n),GR(t,r=>rr(r,e)||rr(e,r))}function GR(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(A2(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function A2(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();so&&Pt("event: "+n.toString()),cc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="repo_interrupt",R2=25;class x2{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new k2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Id(),this.transactionQueueTree_=new bv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function N2(t,e,n){if(t.stats_=Jy(t.repoInfo_),t.forceRestClient_||lz())t.server_=new bd(t.repoInfo_,(r,s,i,o)=>{qI(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>HI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new fs(t.repoInfo_,e,(r,s,i,o)=>{qI(t,r,s,i,o)},r=>{HI(t,r)},r=>{P2(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=pz(t.repoInfo_,()=>new mG(t.stats_,t.server_)),t.infoData_=new hG,t.infoSyncTree_=new VI({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Cu(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Sv(t,"connected",!1),t.serverSyncTree_=new VI({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Qn(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function YR(t){const n=t.infoData_.getNode(new De(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function xu(t){return m2({timestamp:YR(t)})}function qI(t,e,n,r,s){t.dataUpdateCount++;const i=new De(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=od(n,l=>tt(l));o=u2(t.serverSyncTree_,i,c,s)}else{const c=tt(n);o=FR(t.serverSyncTree_,i,c,s)}else if(r){const c=od(n,l=>tt(l));o=a2(t.serverSyncTree_,i,c)}else{const c=tt(n);o=Cu(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Fa(t,i)),Qn(t.eventQueue_,a,o)}function HI(t,e){Sv(t,"connected",e),e===!1&&M2(t)}function P2(t,e){Ut(e,(n,r)=>{Sv(t,n,r)})}function Sv(t,e,n){const r=new De("/.info/"+e),s=tt(n);t.infoData_.updateSnapshot(r,s);const i=Cu(t.infoSyncTree_,r,s);Qn(t.eventQueue_,r,i)}function tp(t){return t.nextWriteId_++}function D2(t,e,n){const r=h2(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=tt(s).withIndex(e._queryParams.getIndex());r_(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Cu(t.serverSyncTree_,e._path,i);else{const a=ql(t.serverSyncTree_,e);o=FR(t.serverSyncTree_,e._path,i,a)}return Qn(t.eventQueue_,e._path,o),Nd(t.serverSyncTree_,e,n,null,!0),i},s=>(hc(t,"get for query "+bt(e)+" failed: "+s),Promise.reject(new Error(s))))}function Cv(t,e,n,r,s){hc(t,"set",{path:e.toString(),value:n,priority:r});const i=xu(t),o=tt(n,r),a=Qf(t.serverSyncTree_,e),c=wv(o,a,i),l=tp(t),u=pv(t.serverSyncTree_,e,c,l,!0);ep(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(d,f)=>{const p=d==="ok";p||on("set at "+e+" failed: "+d);const _=Ks(t.serverSyncTree_,l,!p);Qn(t.eventQueue_,e,_),ai(t,s,d,f)});const h=Av(t,e);Fa(t,h),Qn(t.eventQueue_,h,[])}function O2(t,e,n,r){hc(t,"update",{path:e.toString(),value:n});let s=!0;const i=xu(t),o={};if(Ut(n,(a,c)=>{s=!1,o[a]=VR(Je(e,a),tt(c),t.serverSyncTree_,i)}),s)Pt("update() called with empty data.  Don't do anything."),ai(t,r,"ok",void 0);else{const a=tp(t),c=o2(t.serverSyncTree_,e,o,a);ep(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{const h=l==="ok";h||on("update at "+e+" failed: "+l);const d=Ks(t.serverSyncTree_,a,!h),f=d.length>0?Fa(t,e):e;Qn(t.eventQueue_,f,d),ai(t,r,l,u)}),Ut(n,l=>{const u=Av(t,Je(e,l));Fa(t,u)}),Qn(t.eventQueue_,e,[])}}function M2(t){hc(t,"onDisconnectEvents");const e=xu(t),n=Id();Xm(t.onDisconnect_,Ae(),(s,i)=>{const o=VR(s,i,t.serverSyncTree_,e);lc(n,s,o)});let r=[];Xm(n,Ae(),(s,i)=>{r=r.concat(Cu(t.serverSyncTree_,s,i));const o=Av(t,s);Fa(t,o)}),t.onDisconnect_=Id(),Qn(t.eventQueue_,Ae(),r)}function L2(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,s)=>{r==="ok"&&Ym(t.onDisconnect_,e),ai(t,n,r,s)})}function KI(t,e,n,r){const s=tt(n);t.server_.onDisconnectPut(e.toString(),s.val(!0),(i,o)=>{i==="ok"&&lc(t.onDisconnect_,e,s),ai(t,r,i,o)})}function F2(t,e,n,r,s){const i=tt(n,r);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,a)=>{o==="ok"&&lc(t.onDisconnect_,e,i),ai(t,s,o,a)})}function U2(t,e,n,r){if(id(n)){Pt("onDisconnect().update() called with empty data.  Don't do anything."),ai(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(s,i)=>{s==="ok"&&Ut(n,(o,a)=>{const c=tt(a);lc(t.onDisconnect_,Je(e,o),c)}),ai(t,r,s,i)})}function B2(t,e,n){let r;ye(e._path)===".info"?r=r_(t.infoSyncTree_,e,n):r=r_(t.serverSyncTree_,e,n),zR(t.eventQueue_,e._path,r)}function i_(t,e,n){let r;ye(e._path)===".info"?r=Nd(t.infoSyncTree_,e,n):r=Nd(t.serverSyncTree_,e,n),zR(t.eventQueue_,e._path,r)}function XR(t){t.persistentConnection_&&t.persistentConnection_.interrupt(QR)}function $2(t){t.persistentConnection_&&t.persistentConnection_.resume(QR)}function hc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Pt(n,...e)}function ai(t,e,n,r){e&&cc(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function V2(t,e,n,r,s,i){hc(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:qA(),applyLocally:i,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=kv(t,e,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Au("transaction failed: Data returned ",c,o.path),o.status=0;const l=Xf(t.transactionQueueTree_,e),u=Fo(l)||[];u.push(o),Iv(l,u);let h;typeof c=="object"&&c!==null&&Gn(c,".priority")?(h=ao(c,".priority"),B(Hl(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(Qf(t.serverSyncTree_,e)||se.EMPTY_NODE).getPriority().val();const d=xu(t),f=tt(c,h),p=wv(f,a,d);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=tp(t);const _=pv(t.serverSyncTree_,e,p,o.currentWriteId,o.applyLocally);Qn(t.eventQueue_,e,_),np(t,t.transactionQueueTree_)}}function kv(t,e,n){return Qf(t.serverSyncTree_,e,n)||se.EMPTY_NODE}function np(t,e=t.transactionQueueTree_){if(e||rp(t,e),Fo(e)){const n=ZR(t,e);B(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&j2(t,ku(e),n)}else jR(e)&&Jf(e,n=>{np(t,n)})}function j2(t,e,n){const r=n.map(l=>l.currentWriteId),s=kv(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];B(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=vn(e,u.path);i=i.updateChild(h,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{hc(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Ks(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();rp(t,Xf(t.transactionQueueTree_,e)),np(t,t.transactionQueueTree_),Qn(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)cc(h[d])}else{if(l==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{on("transaction at "+c.toString()+" failed: "+l);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=l}Fa(t,e)}},o)}function Fa(t,e){const n=JR(t,e),r=ku(n),s=ZR(t,n);return q2(t,s,r),r}function q2(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=vn(n,c.path);let u=!1,h;if(B(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,h=c.abortReason,s=s.concat(Ks(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=R2)u=!0,h="maxretry",s=s.concat(Ks(t.serverSyncTree_,c.currentWriteId,!0));else{const d=kv(t,c.path,o);c.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){Au("transaction failed: Data returned ",f,c.path);let p=tt(f);typeof f=="object"&&f!=null&&Gn(f,".priority")||(p=p.updatePriority(d.getPriority()));const v=c.currentWriteId,y=xu(t),g=wv(p,d,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=g,c.currentWriteId=tp(t),o.splice(o.indexOf(v),1),s=s.concat(pv(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally)),s=s.concat(Ks(t.serverSyncTree_,v,!0))}else u=!0,h="nodata",s=s.concat(Ks(t.serverSyncTree_,c.currentWriteId,!0))}Qn(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}rp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)cc(r[a]);np(t,t.transactionQueueTree_)}function JR(t,e){let n,r=t.transactionQueueTree_;for(n=ye(e);n!==null&&Fo(r)===void 0;)r=Xf(r,n),e=$e(e),n=ye(e);return r}function ZR(t,e){const n=[];return ex(t,e,n),n.sort((r,s)=>r.order-s.order),n}function ex(t,e,n){const r=Fo(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Jf(e,s=>{ex(t,s,n)})}function rp(t,e){const n=Fo(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Iv(e,n.length>0?n:void 0)}Jf(e,r=>{rp(t,r)})}function Av(t,e){const n=ku(JR(t,e)),r=Xf(t.transactionQueueTree_,e);return w2(r,s=>{Cg(t,s)}),Cg(t,r),qR(r,s=>{Cg(t,s)}),n}function Cg(t,e){const n=Fo(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(B(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(B(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Ks(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Iv(e,void 0):n.length=i+1,Qn(t.eventQueue_,ku(e),s);for(let o=0;o<r.length;o++)cc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function K2(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):on(`Invalid query segment '${n}' in query '${t}'`)}return e}const o_=function(t,e){const n=W2(t),r=n.namespace;n.domain==="firebase.com"&&Kr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Kr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||nz();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new sR(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new De(n.pathString)}},W2=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(s=H2(t.substring(u,h)));const d=K2(t.substring(Math.min(t.length,h)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in d&&(i=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+bt(this.snapshot.exportVal())}}class nx{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return B(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Et;return L2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){sr("OnDisconnect.remove",this._path);const e=new Et;return KI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){sr("OnDisconnect.set",this._path),zr("OnDisconnect.set",e,this._path,!1);const n=new Et;return KI(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){sr("OnDisconnect.setWithPriority",this._path),zr("OnDisconnect.setWithPriority",e,this._path,!1),Tv("OnDisconnect.setWithPriority",n,!1);const r=new Et;return F2(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){sr("OnDisconnect.update",this._path),KR("OnDisconnect.update",e,this._path,!1);const n=new Et;return U2(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ve(this._path)?null:ev(this._path)}get ref(){return new ur(this._repo,this._path)}get _queryIdentifier(){const e=NI(this._queryParams),n=Qy(e);return n==="{}"?"default":n}get _queryObject(){return NI(this._queryParams)}isEqual(e){if(e=O(e),!(e instanceof Bn))return!1;const n=this._repo===e._repo,r=tv(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Fz(this._path)}}function sp(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function yi(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ur){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ys)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==Wr)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===ze){if(e!=null&&!Hl(e)||n!=null&&!Hl(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(B(t.getIndex()instanceof sv||t.getIndex()===iv,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ip(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ur extends Bn{constructor(e,n){super(e,n,new Hf,!1)}get parent(){const e=fR(this._path);return e===null?null:new ur(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class _o{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new De(e),r=yo(this.ref,e);return new _o(this._node.getChild(n),r,ze)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new _o(s,yo(this.ref,r),ze)))}hasChild(e){const n=new De(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function rx(t,e){return t=O(t),t._checkNotDeleted("ref"),e!==void 0?yo(t._root,e):t._root}function WI(t,e){t=O(t),t._checkNotDeleted("refFromURL");const n=o_(e,t._repo.repoInfo_.nodeAdmin);WR("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Kr("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),rx(t,n.path.toString())}function yo(t,e){return t=O(t),ye(t._path)===null?C2("child","path",e,!1):Kl("child","path",e,!1),new ur(t._repo,Je(t._path,e))}function G2(t,e){t=O(t),sr("push",t._path),zr("push",e,t._path,!0);const n=YR(t._repo),r=rG(n),s=yo(t,r),i=yo(t,r);let o;return e!=null?o=xv(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function Q2(t){return sr("remove",t._path),xv(t,null)}function xv(t,e){t=O(t),sr("set",t._path),zr("set",e,t._path,!1);const n=new Et;return Cv(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Y2(t,e){t=O(t),sr("setPriority",t._path),Tv("setPriority",e,!1);const n=new Et;return Cv(t._repo,Je(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function X2(t,e,n){if(sr("setWithPriority",t._path),zr("setWithPriority",e,t._path,!1),Tv("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Et;return Cv(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function J2(t,e){KR("update",e,t._path,!1);const n=new Et;return O2(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Z2(t){t=O(t);const e=new Rv(()=>{}),n=new Nu(e);return D2(t._repo,t,n).then(r=>new _o(r,new ur(t._repo,t._path),t._queryParams.getIndex()))}class Nu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new tx("value",this,new _o(e.snapshotNode,new ur(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new nx(this,e,n):null}matches(e){return e instanceof Nu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class op{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new nx(this,e,n):null}createEvent(e,n){B(e.childName!=null,"Child events should have a childName.");const r=yo(new ur(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new tx(e.type,this,new _o(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof op?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Pu(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const c=n,l=(u,h)=>{i_(t._repo,t,a),c(u,h)};l.userCallback=n.userCallback,l.context=n.context,n=l}const o=new Rv(n,i||void 0),a=e==="value"?new Nu(o):new op(e,o);return B2(t._repo,t,a),()=>i_(t._repo,t,a)}function a_(t,e,n,r){return Pu(t,"value",e,n,r)}function zI(t,e,n,r){return Pu(t,"child_added",e,n,r)}function GI(t,e,n,r){return Pu(t,"child_changed",e,n,r)}function QI(t,e,n,r){return Pu(t,"child_moved",e,n,r)}function YI(t,e,n,r){return Pu(t,"child_removed",e,n,r)}function XI(t,e,n){let r=null;const s=n?new Rv(n):null;e==="value"?r=new Nu(s):e&&(r=new op(e,s)),i_(t._repo,t,r)}class Ir{}class sx extends Ir{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){zr("endAt",this._value,e._path,!0);const n=Qm(e._queryParams,this._value,this._key);if(ip(n),yi(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Bn(e._repo,e._path,n,e._orderByCalled)}}function e6(t,e){return Ru("endAt","key",e,!0),new sx(t,e)}class t6 extends Ir{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){zr("endBefore",this._value,e._path,!1);const n=uG(e._queryParams,this._value,this._key);if(ip(n),yi(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Bn(e._repo,e._path,n,e._orderByCalled)}}function n6(t,e){return Ru("endBefore","key",e,!0),new t6(t,e)}class ix extends Ir{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){zr("startAt",this._value,e._path,!0);const n=Gm(e._queryParams,this._value,this._key);if(ip(n),yi(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Bn(e._repo,e._path,n,e._orderByCalled)}}function r6(t=null,e){return Ru("startAt","key",e,!0),new ix(t,e)}class s6 extends Ir{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){zr("startAfter",this._value,e._path,!1);const n=lG(e._queryParams,this._value,this._key);if(ip(n),yi(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Bn(e._repo,e._path,n,e._orderByCalled)}}function i6(t,e){return Ru("startAfter","key",e,!0),new s6(t,e)}class o6 extends Ir{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Bn(e._repo,e._path,aG(e._queryParams,this._limit),e._orderByCalled)}}function a6(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new o6(t)}class c6 extends Ir{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Bn(e._repo,e._path,cG(e._queryParams,this._limit),e._orderByCalled)}}function l6(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new c6(t)}class u6 extends Ir{constructor(e){super(),this._path=e}_apply(e){sp(e,"orderByChild");const n=new De(this._path);if(ve(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new sv(n),s=Kf(e._queryParams,r);return yi(s),new Bn(e._repo,e._path,s,!0)}}function h6(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Kl("orderByChild","path",t,!1),new u6(t)}class d6 extends Ir{_apply(e){sp(e,"orderByKey");const n=Kf(e._queryParams,Ur);return yi(n),new Bn(e._repo,e._path,n,!0)}}function f6(){return new d6}class p6 extends Ir{_apply(e){sp(e,"orderByPriority");const n=Kf(e._queryParams,ze);return yi(n),new Bn(e._repo,e._path,n,!0)}}function g6(){return new p6}class m6 extends Ir{_apply(e){sp(e,"orderByValue");const n=Kf(e._queryParams,iv);return yi(n),new Bn(e._repo,e._path,n,!0)}}function _6(){return new m6}class y6 extends Ir{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(zr("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new sx(this._value,this._key)._apply(new ix(this._value,this._key)._apply(e))}}function v6(t,e){return Ru("equalTo","key",e,!0),new y6(t,e)}function dr(t,...e){let n=O(t);for(const r of e)n=r._apply(n);return n}JG(ur);r2(ur);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6="FIREBASE_DATABASE_EMULATOR_HOST",c_={};let E6=!1;function b6(t,e,n,r){t.repoInfo_=new sR(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}function ox(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Kr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=o_(i,s),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[w6]),l?(c=!0,i=`http://${l}?ns=${a.namespace}`,o=o_(i,s),a=o.repoInfo):c=!o.repoInfo.secure;const u=s&&c?new ma(ma.OWNER):new hz(t.name,t.options,e);WR("Invalid Firebase Database URL",o),ve(o.path)||Kr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=T6(a,t,u,new uz(t.name,n));return new S6(h,t)}function I6(t,e){const n=c_[e];(!n||n[t.key]!==t)&&Kr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),XR(t),delete n[t.key]}function T6(t,e,n,r){let s=c_[e.name];s||(s={},c_[e.name]=s);let i=s[t.toURLString()];return i&&Kr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new x2(t,E6,n,r),s[t.toURLString()]=i,i}class S6{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(N2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ur(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(I6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Kr("Cannot call "+e+" on a deleted database.")}}function ax(){Pa.IS_TRANSPORT_INITIALIZED&&on("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function C6(){ax(),Hs.forceDisallow()}function k6(){ax(),tr.forceDisallow(),Hs.forceAllow()}function A6(t,e,n,r={}){t=O(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Kr("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Kr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new ma(ma.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:my(r.mockUserToken,t.app.options.projectId);i=new ma(o)}b6(s,e,n,i)}function R6(t){t=O(t),t._checkNotDeleted("goOffline"),XR(t._repo)}function x6(t){t=O(t),t._checkNotDeleted("goOnline"),$2(t._repo)}function N6(t,e){KA(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){VA(Jr),ct(new ke("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return ox(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),qe(fI,pI,t),qe(fI,pI,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6={".sv":"timestamp"};function O6(){return D6}function M6(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function F6(t,e,n){var r;if(t=O(t),sr("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const s=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,i=new Et,o=(c,l,u)=>{let h=null;c?i.reject(c):(h=new _o(u,new ur(t._repo,t._path),ze),i.resolve(new L6(l,h)))},a=a_(t,()=>{});return V2(t._repo,t._path,e,o,a,s),i.promise}fs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};fs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};P6();const U6="@firebase/database-compat",B6="0.2.6";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=new Xr("@firebase/database-compat"),cx=function(t){const e="FIREBASE WARNING: "+t;$6.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Ln(t,e)+"must be a boolean.")},j6=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ln(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this._delegate=e}cancel(e){oe("OnDisconnect.cancel",0,1,arguments.length),Rt("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){oe("OnDisconnect.remove",0,1,arguments.length),Rt("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){oe("OnDisconnect.set",1,2,arguments.length),Rt("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),s=>n(s)),r}setWithPriority(e,n,r){oe("OnDisconnect.setWithPriority",2,3,arguments.length),Rt("OnDisconnect.setWithPriority","onComplete",r,!0);const s=this._delegate.setWithPriority(e,n);return r&&s.then(()=>r(null),i=>r(i)),s}update(e,n){if(oe("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let i=0;i<e.length;++i)s[""+i]=e[i];e=s,cx("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rt("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),s=>n(s)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return oe("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){this._database=e,this._delegate=n}val(){return oe("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return oe("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return oe("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return oe("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return oe("DataSnapshot.child",0,1,arguments.length),e=String(e),Kl("DataSnapshot.child","path",e,!1),new Xs(this._database,this._delegate.child(e))}hasChild(e){return oe("DataSnapshot.hasChild",1,1,arguments.length),Kl("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return oe("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return oe("DataSnapshot.forEach",1,1,arguments.length),Rt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Xs(this._database,n)))}hasChildren(){return oe("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return oe("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return oe("DataSnapshot.ref",0,0,arguments.length),new qn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qt{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,s){var i;oe("Query.on",2,4,arguments.length),Rt("Query.on","callback",n,!1);const o=qt.getCancelAndContextArgs_("Query.on",r,s),a=(l,u)=>{n.call(o.context,new Xs(this.database,l),u)};a.userCallback=n,a.context=o.context;const c=(i=o.cancel)===null||i===void 0?void 0:i.bind(o.context);switch(e){case"value":return a_(this._delegate,a,c),n;case"child_added":return zI(this._delegate,a,c),n;case"child_removed":return YI(this._delegate,a,c),n;case"child_changed":return GI(this._delegate,a,c),n;case"child_moved":return QI(this._delegate,a,c),n;default:throw new Error(Ln("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(oe("Query.off",0,3,arguments.length),j6("Query.off",e,!0),Rt("Query.off","callback",n,!0),Ab("Query.off","context",r,!0),n){const s=()=>{};s.userCallback=n,s.context=r,XI(this._delegate,e,s)}else XI(this._delegate,e)}get(){return Z2(this._delegate).then(e=>new Xs(this.database,e))}once(e,n,r,s){oe("Query.once",1,4,arguments.length),Rt("Query.once","callback",n,!0);const i=qt.getCancelAndContextArgs_("Query.once",r,s),o=new Et,a=(l,u)=>{const h=new Xs(this.database,l);n&&n.call(i.context,h,u),o.resolve(h)};a.userCallback=n,a.context=i.context;const c=l=>{i.cancel&&i.cancel.call(i.context,l),o.reject(l)};switch(e){case"value":a_(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":zI(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":YI(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":GI(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":QI(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(Ln("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return oe("Query.limitToFirst",1,1,arguments.length),new qt(this.database,dr(this._delegate,a6(e)))}limitToLast(e){return oe("Query.limitToLast",1,1,arguments.length),new qt(this.database,dr(this._delegate,l6(e)))}orderByChild(e){return oe("Query.orderByChild",1,1,arguments.length),new qt(this.database,dr(this._delegate,h6(e)))}orderByKey(){return oe("Query.orderByKey",0,0,arguments.length),new qt(this.database,dr(this._delegate,f6()))}orderByPriority(){return oe("Query.orderByPriority",0,0,arguments.length),new qt(this.database,dr(this._delegate,g6()))}orderByValue(){return oe("Query.orderByValue",0,0,arguments.length),new qt(this.database,dr(this._delegate,_6()))}startAt(e=null,n){return oe("Query.startAt",0,2,arguments.length),new qt(this.database,dr(this._delegate,r6(e,n)))}startAfter(e=null,n){return oe("Query.startAfter",0,2,arguments.length),new qt(this.database,dr(this._delegate,i6(e,n)))}endAt(e=null,n){return oe("Query.endAt",0,2,arguments.length),new qt(this.database,dr(this._delegate,e6(e,n)))}endBefore(e=null,n){return oe("Query.endBefore",0,2,arguments.length),new qt(this.database,dr(this._delegate,n6(e,n)))}equalTo(e,n){return oe("Query.equalTo",1,2,arguments.length),new qt(this.database,dr(this._delegate,v6(e,n)))}toString(){return oe("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return oe("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(oe("Query.isEqual",1,1,arguments.length),!(e instanceof qt)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const s={cancel:void 0,context:void 0};if(n&&r)s.cancel=n,Rt(e,"cancel",s.cancel,!0),s.context=r,Ab(e,"context",s.context,!0);else if(n)if(typeof n=="object"&&n!==null)s.context=n;else if(typeof n=="function")s.cancel=n;else throw new Error(Ln(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return s}get ref(){return new qn(this.database,new ur(this._delegate._repo,this._delegate._path))}}class qn extends qt{constructor(e,n){super(e,new Bn(n._repo,n._path,new Hf,!1)),this.database=e,this._delegate=n}getKey(){return oe("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return oe("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new qn(this.database,yo(this._delegate,e))}getParent(){oe("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new qn(this.database,e):null}getRoot(){return oe("Reference.root",0,0,arguments.length),new qn(this.database,this._delegate.root)}set(e,n){oe("Reference.set",1,2,arguments.length),Rt("Reference.set","onComplete",n,!0);const r=xv(this._delegate,e);return n&&r.then(()=>n(null),s=>n(s)),r}update(e,n){if(oe("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let i=0;i<e.length;++i)s[""+i]=e[i];e=s,cx("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}sr("Reference.update",this._delegate._path),Rt("Reference.update","onComplete",n,!0);const r=J2(this._delegate,e);return n&&r.then(()=>n(null),s=>n(s)),r}setWithPriority(e,n,r){oe("Reference.setWithPriority",2,3,arguments.length),Rt("Reference.setWithPriority","onComplete",r,!0);const s=X2(this._delegate,e,n);return r&&s.then(()=>r(null),i=>r(i)),s}remove(e){oe("Reference.remove",0,1,arguments.length),Rt("Reference.remove","onComplete",e,!0);const n=Q2(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){oe("Reference.transaction",1,3,arguments.length),Rt("Reference.transaction","transactionUpdate",e,!1),Rt("Reference.transaction","onComplete",n,!0),V6("Reference.transaction","applyLocally",r,!0);const s=F6(this._delegate,e,{applyLocally:r}).then(i=>new H6(i.committed,new Xs(this.database,i.snapshot)));return n&&s.then(i=>n(null,i.committed,i.snapshot),i=>n(i,!1,null)),s}setPriority(e,n){oe("Reference.setPriority",1,2,arguments.length),Rt("Reference.setPriority","onComplete",n,!0);const r=Y2(this._delegate,e);return n&&r.then(()=>n(null),s=>n(s)),r}push(e,n){oe("Reference.push",0,2,arguments.length),Rt("Reference.push","onComplete",n,!0);const r=G2(this._delegate,e),s=r.then(o=>new qn(this.database,o));n&&s.then(()=>n(null),o=>n(o));const i=new qn(this.database,r);return i.then=s.then.bind(s),i.catch=s.catch.bind(s,void 0),i}onDisconnect(){return sr("Reference.onDisconnect",this._delegate._path),new q6(new z2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:C6,forceLongPolling:k6}}useEmulator(e,n,r={}){A6(this._delegate,e,n,r)}ref(e){if(oe("database.ref",0,1,arguments.length),e instanceof qn){const n=WI(this._delegate,e.toString());return new qn(this,n)}else{const n=rx(this._delegate,e);return new qn(this,n)}}refFromURL(e){oe("database.refFromURL",1,1,arguments.length);const r=WI(this._delegate,e);return new qn(this,r)}goOffline(){return oe("database.goOffline",0,0,arguments.length),R6(this._delegate)}goOnline(){return oe("database.goOnline",0,0,arguments.length),x6(this._delegate)}}Wl.ServerValue={TIMESTAMP:O6(),increment:t=>M6(t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6({app:t,url:e,version:n,customAuthImpl:r,namespace:s,nodeAdmin:i=!1}){VA(n);const o=new qC("auth-internal",new HC("database-standalone"));return o.setComponent(new ke("auth-internal",()=>r,"PRIVATE")),{instance:new Wl(ox(t,o,void 0,e,i),t),namespace:s}}var W6=Object.freeze({__proto__:null,initStandalone:K6});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=Wl.ServerValue;function G6(t){t.INTERNAL.registerComponent(new ke("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:n});return new Wl(s,r)},"PUBLIC").setServiceProps({Reference:qn,Query:qt,Database:Wl,DataSnapshot:Xs,enableLogging:N6,INTERNAL:W6,ServerValue:z6}).setMultipleInstances(!0)),t.registerVersion(U6,B6)}G6(je);var Q6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},te,Nv=Nv||{},he=Q6||self;function Pd(){}function ap(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Du(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Y6(t){return Object.prototype.hasOwnProperty.call(t,kg)&&t[kg]||(t[kg]=++X6)}var kg="closure_uid_"+(1e9*Math.random()>>>0),X6=0;function J6(t,e,n){return t.call.apply(t.bind,arguments)}function Z6(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function an(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?an=J6:an=Z6,an.apply(null,arguments)}function mh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function en(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function vi(){this.s=this.s,this.o=this.o}var e4=0;vi.prototype.s=!1;vi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),e4!=0)&&Y6(this)};vi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lx=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Pv(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function JI(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ap(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function cn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}cn.prototype.h=function(){this.defaultPrevented=!0};var t4=function(){if(!he.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{he.addEventListener("test",Pd,e),he.removeEventListener("test",Pd,e)}catch{}return t}();function Dd(t){return/^[\s\xa0]*$/.test(t)}var ZI=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ag(t,e){return t<e?-1:t>e?1:0}function cp(){var t=he.navigator;return t&&(t=t.userAgent)?t:""}function Dr(t){return cp().indexOf(t)!=-1}function Dv(t){return Dv[" "](t),t}Dv[" "]=Pd;function n4(t){var e=i4;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var r4=Dr("Opera"),Ua=Dr("Trident")||Dr("MSIE"),ux=Dr("Edge"),l_=ux||Ua,hx=Dr("Gecko")&&!(cp().toLowerCase().indexOf("webkit")!=-1&&!Dr("Edge"))&&!(Dr("Trident")||Dr("MSIE"))&&!Dr("Edge"),s4=cp().toLowerCase().indexOf("webkit")!=-1&&!Dr("Edge");function dx(){var t=he.document;return t?t.documentMode:void 0}var Od;e:{var Rg="",xg=function(){var t=cp();if(hx)return/rv:([^\);]+)(\)|;)/.exec(t);if(ux)return/Edge\/([\d\.]+)/.exec(t);if(Ua)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(s4)return/WebKit\/(\S+)/.exec(t);if(r4)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(xg&&(Rg=xg?xg[1]:""),Ua){var Ng=dx();if(Ng!=null&&Ng>parseFloat(Rg)){Od=String(Ng);break e}}Od=Rg}var i4={};function o4(){return n4(function(){let t=0;const e=ZI(String(Od)).split("."),n=ZI("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=Ag(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||Ag(s[2].length==0,i[2].length==0)||Ag(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var u_;if(he.document&&Ua){var eT=dx();u_=eT||parseInt(Od,10)||void 0}else u_=void 0;var a4=u_;function zl(t,e){if(cn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hx){e:{try{Dv(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:c4[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&zl.X.h.call(this)}}en(zl,cn);var c4={2:"touch",3:"pen",4:"mouse"};zl.prototype.h=function(){zl.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ou="closure_listenable_"+(1e6*Math.random()|0),l4=0;function u4(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=s,this.key=++l4,this.ba=this.ea=!1}function lp(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Ov(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function fx(t){const e={};for(const n in t)e[n]=t[n];return e}const tT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function px(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<tT.length;i++)n=tT[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function up(t){this.src=t,this.g={},this.h=0}up.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=d_(t,e,r,s);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new u4(e,this.src,i,!!r,s),e.ea=n,t.push(e)),e};function h_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=lx(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(lp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function d_(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==r)return s}return-1}var Mv="closure_lm_"+(1e6*Math.random()|0),Pg={};function gx(t,e,n,r,s){if(r&&r.once)return _x(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)gx(t,e[i],n,r,s);return null}return n=Uv(n),t&&t[Ou]?t.N(e,n,Du(r)?!!r.capture:!!r,s):mx(t,e,n,!1,r,s)}function mx(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Du(s)?!!s.capture:!!s,a=Fv(t);if(a||(t[Mv]=a=new up(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=h4(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)t4||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(vx(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function h4(){function t(n){return e.call(t.src,t.listener,n)}const e=d4;return t}function _x(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)_x(t,e[i],n,r,s);return null}return n=Uv(n),t&&t[Ou]?t.O(e,n,Du(r)?!!r.capture:!!r,s):mx(t,e,n,!0,r,s)}function yx(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)yx(t,e[i],n,r,s);else r=Du(r)?!!r.capture:!!r,n=Uv(n),t&&t[Ou]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=d_(i,n,r,s),-1<n&&(lp(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Fv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=d_(e,n,r,s)),(n=-1<t?e[t]:null)&&Lv(n))}function Lv(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Ou])h_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vx(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Fv(e))?(h_(n,t),n.h==0&&(n.src=null,e[Mv]=null)):lp(t)}}}function vx(t){return t in Pg?Pg[t]:Pg[t]="on"+t}function d4(t,e){if(t.ba)t=!0;else{e=new zl(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&Lv(t),t=n.call(r,e)}return t}function Fv(t){return t=t[Mv],t instanceof up?t:null}var Dg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uv(t){return typeof t=="function"?t:(t[Dg]||(t[Dg]=function(e){return t.handleEvent(e)}),t[Dg])}function Bt(){vi.call(this),this.i=new up(this),this.P=this,this.I=null}en(Bt,vi);Bt.prototype[Ou]=!0;Bt.prototype.removeEventListener=function(t,e,n,r){yx(this,t,e,n,r)};function Yt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new cn(e,t);else if(e instanceof cn)e.target=e.target||t;else{var s=e;e=new cn(r,t),px(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=_h(o,r,!0,e)&&s}if(o=e.g=t,s=_h(o,r,!0,e)&&s,s=_h(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=_h(o,r,!1,e)&&s}Bt.prototype.M=function(){if(Bt.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)lp(n[r]);delete t.g[e],t.h--}}this.I=null};Bt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Bt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function _h(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.ea&&h_(t.i,o),s=a.call(c,r)!==!1&&s}}return s&&!r.defaultPrevented}var Bv=he.JSON.stringify;function f4(){var t=bx;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class p4{constructor(){this.h=this.g=null}add(e,n){const r=wx.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var wx=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new g4,t=>t.reset());class g4{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function m4(t){he.setTimeout(()=>{throw t},0)}function Ex(t,e){f_||_4(),p_||(f_(),p_=!0),bx.add(t,e)}var f_;function _4(){var t=he.Promise.resolve(void 0);f_=function(){t.then(y4)}}var p_=!1,bx=new p4;function y4(){for(var t;t=f4();){try{t.h.call(t.g)}catch(n){m4(n)}var e=wx;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}p_=!1}function hp(t,e){Bt.call(this),this.h=t||1,this.g=e||he,this.j=an(this.kb,this),this.l=Date.now()}en(hp,Bt);te=hp.prototype;te.ca=!1;te.R=null;te.kb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Yt(this,"tick"),this.ca&&($v(this),this.start()))}};te.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function $v(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}te.M=function(){hp.X.M.call(this),$v(this),delete this.g};function Vv(t,e,n){if(typeof t=="function")n&&(t=an(t,n));else if(t&&typeof t.handleEvent=="function")t=an(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:he.setTimeout(t,e||0)}function Ix(t){t.g=Vv(()=>{t.g=null,t.i&&(t.i=!1,Ix(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class v4 extends vi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ix(this)}M(){super.M(),this.g&&(he.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gl(t){vi.call(this),this.h=t,this.g={}}en(Gl,vi);var nT=[];function Tx(t,e,n,r){Array.isArray(n)||(n&&(nT[0]=n.toString()),n=nT);for(var s=0;s<n.length;s++){var i=gx(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Sx(t){Ov(t.g,function(e,n){this.g.hasOwnProperty(n)&&Lv(e)},t),t.g={}}Gl.prototype.M=function(){Gl.X.M.call(this),Sx(this)};Gl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function dp(){this.g=!0}dp.prototype.Aa=function(){this.g=!1};function w4(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function E4(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function ra(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+I4(t,n)+(r?" "+r:"")})}function b4(t,e){t.info(function(){return"TIMEOUT: "+e})}dp.prototype.info=function(){};function I4(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Bv(n)}catch{return e}}var Uo={},rT=null;function fp(){return rT=rT||new Bt}Uo.Oa="serverreachability";function Cx(t){cn.call(this,Uo.Oa,t)}en(Cx,cn);function Ql(t){const e=fp();Yt(e,new Cx(e))}Uo.STAT_EVENT="statevent";function kx(t,e){cn.call(this,Uo.STAT_EVENT,t),this.stat=e}en(kx,cn);function wn(t){const e=fp();Yt(e,new kx(e,t))}Uo.Pa="timingevent";function Ax(t,e){cn.call(this,Uo.Pa,t),this.size=e}en(Ax,cn);function Mu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return he.setTimeout(function(){t()},e)}var pp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},Rx={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function jv(){}jv.prototype.h=null;function sT(t){return t.h||(t.h=t.i())}function xx(){}var Lu={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function qv(){cn.call(this,"d")}en(qv,cn);function Hv(){cn.call(this,"c")}en(Hv,cn);var g_;function gp(){}en(gp,jv);gp.prototype.g=function(){return new XMLHttpRequest};gp.prototype.i=function(){return{}};g_=new gp;function Fu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Gl(this),this.O=T4,t=l_?125:void 0,this.T=new hp(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Nx}function Nx(){this.i=null,this.g="",this.h=!1}var T4=45e3,m_={},Md={};te=Fu.prototype;te.setTimeout=function(t){this.O=t};function __(t,e,n){t.K=1,t.v=_p(vs(e)),t.s=n,t.P=!0,Px(t,null)}function Px(t,e){t.F=Date.now(),Uu(t),t.A=vs(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),$x(n.i,"t",r),t.C=0,n=t.l.H,t.h=new Nx,t.g=aN(t.l,n?e:null,!t.s),0<t.N&&(t.L=new v4(an(t.Ka,t,t.g),t.N)),Tx(t.S,t.g,"readystatechange",t.hb),e=t.H?fx(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Ql(),w4(t.j,t.u,t.A,t.m,t.U,t.s)}te.hb=function(t){t=t.target;const e=this.L;e&&ls(t)==3?e.l():this.Ka(t)};te.Ka=function(t){try{if(t==this.g)e:{const u=ls(this.g);var e=this.g.Ea();const h=this.g.aa();if(!(3>u)&&(u!=3||l_||this.g&&(this.h.h||this.g.fa()||cT(this.g)))){this.I||u!=4||e==7||(e==8||0>=h?Ql(3):Ql(2)),mp(this);var n=this.g.aa();this.Y=n;t:if(Dx(this)){var r=cT(this.g);t="";var s=r.length,i=ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wi(this),ul(this);var o="";break t}this.h.i=new he.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,E4(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dd(a)){var l=a;break t}}l=null}if(n=l)ra(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,y_(this,n);else{this.i=!1,this.o=3,wn(12),Wi(this),ul(this);break e}}this.P?(Ox(this,u,o),l_&&this.i&&u==3&&(Tx(this.S,this.T,"tick",this.gb),this.T.start())):(ra(this.j,this.m,o,null),y_(this,o)),u==4&&Wi(this),this.i&&!this.I&&(u==4?rN(this.l,this):(this.i=!1,Uu(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,wn(12)):(this.o=0,wn(13)),Wi(this),ul(this)}}}catch{}finally{}};function Dx(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function Ox(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=S4(t,n),s==Md){e==4&&(t.o=4,wn(14),r=!1),ra(t.j,t.m,null,"[Incomplete Response]");break}else if(s==m_){t.o=4,wn(15),ra(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ra(t.j,t.m,s,null),y_(t,s);Dx(t)&&s!=Md&&s!=m_&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,wn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xv(e),e.K=!0,wn(11))):(ra(t.j,t.m,n,"[Invalid Chunked Response]"),Wi(t),ul(t))}te.gb=function(){if(this.g){var t=ls(this.g),e=this.g.fa();this.C<e.length&&(mp(this),Ox(this,t,e),this.i&&t!=4&&Uu(this))}};function S4(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Md:(n=Number(e.substring(n,r)),isNaN(n)?m_:(r+=1,r+n>e.length?Md:(e=e.substr(r,n),t.C=r+n,e)))}te.cancel=function(){this.I=!0,Wi(this)};function Uu(t){t.V=Date.now()+t.O,Mx(t,t.O)}function Mx(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Mu(an(t.fb,t),e)}function mp(t){t.B&&(he.clearTimeout(t.B),t.B=null)}te.fb=function(){this.B=null;const t=Date.now();0<=t-this.V?(b4(this.j,this.A),this.K!=2&&(Ql(),wn(17)),Wi(this),this.o=2,ul(this)):Mx(this,this.V-t)};function ul(t){t.l.G==0||t.I||rN(t.l,t)}function Wi(t){mp(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,$v(t.T),Sx(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function y_(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||v_(n.h,t))){if(!t.J&&v_(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Ud(n),wp(n);else break e;Yv(n),wn(18)}}else n.Ba=s[1],0<n.Ba-n.T&&37500>s[2]&&n.L&&n.A==0&&!n.v&&(n.v=Mu(an(n.bb,n),6e3));if(1>=qx(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else zi(n,11)}else if((t.J||n.g==t)&&Ud(n),!Dd(e))for(s=n.Fa.g.parse(e),e=0;e<s.length;e++){let l=s[e];if(n.T=l[0],l=l[1],n.G==2)if(l[0]=="c"){n.I=l[1],n.ka=l[2];const u=l[3];u!=null&&(n.ma=u,n.j.info("VER="+n.ma));const h=l[4];h!=null&&(n.Ca=h,n.j.info("SVER="+n.Ca));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var i=r.h;i.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Kv(i,i.h),i.h=null))}if(r.D){const _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.za=_,Xe(r.F,r.D,_))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=oN(r,r.H?r.ka:null,r.V),o.J){Hx(r.h,o);var a=o,c=r.J;c&&a.setTimeout(c),a.B&&(mp(a),Uu(a)),r.g=o}else tN(r);0<n.i.length&&Ep(n)}else l[0]!="stop"&&l[0]!="close"||zi(n,7);else n.G==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?zi(n,7):Qv(n):l[0]!="noop"&&n.l&&n.l.wa(l),n.A=0)}}Ql(4)}catch{}}function C4(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ap(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function k4(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ap(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Lx(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ap(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=k4(t),r=C4(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var Fx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function A4(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function io(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof io){this.h=e!==void 0?e:t.h,Ld(this,t.j),this.s=t.s,this.g=t.g,Fd(this,t.m),this.l=t.l,e=t.i;var n=new Yl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),iT(this,n),this.o=t.o}else t&&(n=String(t).match(Fx))?(this.h=!!e,Ld(this,n[1]||"",!0),this.s=Wc(n[2]||""),this.g=Wc(n[3]||"",!0),Fd(this,n[4]),this.l=Wc(n[5]||"",!0),iT(this,n[6]||"",!0),this.o=Wc(n[7]||"")):(this.h=!!e,this.i=new Yl(null,this.h))}io.prototype.toString=function(){var t=[],e=this.j;e&&t.push(zc(e,oT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(zc(e,oT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(zc(n,n.charAt(0)=="/"?N4:x4,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",zc(n,D4)),t.join("")};function vs(t){return new io(t)}function Ld(t,e,n){t.j=n?Wc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function iT(t,e,n){e instanceof Yl?(t.i=e,O4(t.i,t.h)):(n||(e=zc(e,P4)),t.i=new Yl(e,t.h))}function Xe(t,e,n){t.i.set(e,n)}function _p(t){return Xe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Wc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,R4),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function R4(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var oT=/[#\/\?@]/g,x4=/[#\?:]/g,N4=/[#\?]/g,P4=/[#\?@]/g,D4=/#/g;function Yl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function wi(t){t.g||(t.g=new Map,t.h=0,t.i&&A4(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}te=Yl.prototype;te.add=function(t,e){wi(this),this.i=null,t=dc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Ux(t,e){wi(t),e=dc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Bx(t,e){return wi(t),e=dc(t,e),t.g.has(e)}te.forEach=function(t,e){wi(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};te.oa=function(){wi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};te.W=function(t){wi(this);let e=[];if(typeof t=="string")Bx(this,t)&&(e=e.concat(this.g.get(dc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};te.set=function(t,e){return wi(this),this.i=null,t=dc(this,t),Bx(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};te.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function $x(t,e,n){Ux(t,e),0<n.length&&(t.i=null,t.g.set(dc(t,e),Pv(n)),t.h+=n.length)}te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function dc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function O4(t,e){e&&!t.j&&(wi(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Ux(this,r),$x(this,s,n))},t)),t.j=e}var M4=class{constructor(t,e){this.h=t,this.g=e}};function Vx(t){this.l=t||L4,he.PerformanceNavigationTiming?(t=he.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(he.g&&he.g.Ga&&he.g.Ga()&&he.g.Ga().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var L4=10;function jx(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function qx(t){return t.h?1:t.g?t.g.size:0}function v_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Kv(t,e){t.g?t.g.add(e):t.h=e}function Hx(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Vx.prototype.cancel=function(){if(this.i=Kx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Kx(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Pv(t.i)}function Wv(){}Wv.prototype.stringify=function(t){return he.JSON.stringify(t,void 0)};Wv.prototype.parse=function(t){return he.JSON.parse(t,void 0)};function F4(){this.g=new Wv}function U4(t,e,n){const r=n||"";try{Lx(t,function(s,i){let o=s;Du(s)&&(o=Bv(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function B4(t,e){const n=new dp;if(he.Image){const r=new Image;r.onload=mh(yh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=mh(yh,n,r,"TestLoadImage: error",!1,e),r.onabort=mh(yh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=mh(yh,n,r,"TestLoadImage: timeout",!1,e),he.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function yh(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Bu(t){this.l=t.$b||null,this.j=t.ib||!1}en(Bu,jv);Bu.prototype.g=function(){return new yp(this.l,this.j)};Bu.prototype.i=function(t){return function(){return t}}({});function yp(t,e){Bt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=zv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}en(yp,Bt);var zv=0;te=yp.prototype;te.open=function(t,e){if(this.readyState!=zv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Xl(this)};te.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||he).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))};te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$u(this)),this.readyState=zv};te.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Xl(this)),this.g&&(this.readyState=3,Xl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof he.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wx(this)}else t.text().then(this.Ua.bind(this),this.ga.bind(this))};function Wx(t){t.j.read().then(t.Sa.bind(t)).catch(t.ga.bind(t))}te.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?$u(this):Xl(this),this.readyState==3&&Wx(this)}};te.Ua=function(t){this.g&&(this.response=this.responseText=t,$u(this))};te.Ta=function(t){this.g&&(this.response=t,$u(this))};te.ga=function(){this.g&&$u(this)};function $u(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Xl(t)}te.setRequestHeader=function(t,e){this.v.append(t,e)};te.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};te.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Xl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(yp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var $4=he.JSON.parse;function _t(t){Bt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zx,this.K=this.L=!1}en(_t,Bt);var zx="",V4=/^https?$/i,j4=["POST","PUT"];te=_t.prototype;te.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():g_.g(),this.C=this.u?sT(this.u):sT(g_),this.g.onreadystatechange=an(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){aT(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=he.FormData&&t instanceof he.FormData,!(0<=lx(j4,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yx(this),0<this.B&&((this.K=q4(this.g))?(this.g.timeout=this.B,this.g.ontimeout=an(this.qa,this)):this.A=Vv(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){aT(this,i)}};function q4(t){return Ua&&o4()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}te.qa=function(){typeof Nv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yt(this,"timeout"),this.abort(8))};function aT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Gx(t),vp(t)}function Gx(t){t.D||(t.D=!0,Yt(t,"complete"),Yt(t,"error"))}te.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Yt(this,"complete"),Yt(this,"abort"),vp(this))};te.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vp(this,!0)),_t.X.M.call(this)};te.Ha=function(){this.s||(this.F||this.v||this.l?Qx(this):this.eb())};te.eb=function(){Qx(this)};function Qx(t){if(t.h&&typeof Nv<"u"&&(!t.C[1]||ls(t)!=4||t.aa()!=2)){if(t.v&&ls(t)==4)Vv(t.Ha,0,t);else if(Yt(t,"readystatechange"),ls(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.H).match(Fx)[1]||null;if(!s&&he.self&&he.self.location){var i=he.self.location.protocol;s=i.substr(0,i.length-1)}r=!V4.test(s?s.toLowerCase():"")}n=r}if(n)Yt(t,"complete"),Yt(t,"success");else{t.m=6;try{var o=2<ls(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",Gx(t)}}finally{vp(t)}}}}function vp(t,e){if(t.g){Yx(t);const n=t.g,r=t.C[0]?Pd:null;t.g=null,t.C=null,e||Yt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Yx(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(he.clearTimeout(t.A),t.A=null)}function ls(t){return t.g?t.g.readyState:0}te.aa=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}};te.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};te.Ra=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),$4(e)}};function cT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case zx:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}te.Ea=function(){return this.m};te.Na=function(){return typeof this.j=="string"?this.j:String(this.j)};function Xx(t){let e="";return Ov(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Gv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Xx(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Xe(t,e,n))}function Dc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Jx(t){this.Ca=0,this.i=[],this.j=new dp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=Dc("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=Dc("baseRetryDelayMs",5e3,t),this.ab=Dc("retryDelaySeedMs",1e4,t),this.Za=Dc("forwardChannelMaxRetries",2,t),this.ta=Dc("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Yb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Vx(t&&t.concurrentRequestLimit),this.Fa=new F4,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=t&&t.Wb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}te=Jx.prototype;te.ma=8;te.G=1;function Qv(t){if(Zx(t),t.G==3){var e=t.U++,n=vs(t.F);Xe(n,"SID",t.I),Xe(n,"RID",e),Xe(n,"TYPE","terminate"),Vu(t,n),e=new Fu(t,t.j,e,void 0),e.K=2,e.v=_p(vs(n)),n=!1,he.navigator&&he.navigator.sendBeacon&&(n=he.navigator.sendBeacon(e.v.toString(),"")),!n&&he.Image&&(new Image().src=e.v,n=!0),n||(e.g=aN(e.l,null),e.g.da(e.v)),e.F=Date.now(),Uu(e)}iN(t)}function wp(t){t.g&&(Xv(t),t.g.cancel(),t.g=null)}function Zx(t){wp(t),t.u&&(he.clearTimeout(t.u),t.u=null),Ud(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&he.clearTimeout(t.m),t.m=null)}function Ep(t){jx(t.h)||t.m||(t.m=!0,Ex(t.Ja,t),t.C=0)}function H4(t,e){return qx(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Ya?0:t.Za)?!1:(t.m=Mu(an(t.Ja,t,e),sN(t,t.C)),t.C++,!0)}te.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Fu(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=fx(i),px(i,this.S)):i=this.S),this.o!==null||this.N||(s.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=eN(this,s,e),n=vs(this.F),Xe(n,"RID",t),Xe(n,"CVER",22),this.D&&Xe(n,"X-HTTP-Session-Id",this.D),Vu(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(Xx(i)))+"&"+e:this.o&&Gv(n,this.o,i)),Kv(this.h,s),this.Xa&&Xe(n,"TYPE","init"),this.O?(Xe(n,"$req",e),Xe(n,"SID","null"),s.Z=!0,__(s,n,null)):__(s,n,e),this.G=2}}else this.G==3&&(t?lT(this,t):this.i.length==0||jx(this.h)||lT(this))};function lT(t,e){var n;e?n=e.m:n=t.U++;const r=vs(t.F);Xe(r,"SID",t.I),Xe(r,"RID",n),Xe(r,"AID",t.T),Vu(t,r),t.o&&t.s&&Gv(r,t.o,t.s),n=new Fu(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=eN(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Kv(t.h,n),__(n,r,e)}function Vu(t,e){t.ia&&Ov(t.ia,function(n,r){Xe(e,r,n)}),t.l&&Lx({},function(n,r){Xe(e,r,n)})}function eN(t,e,n){n=Math.min(t.i.length,n);var r=t.l?an(t.l.Qa,t.l,t):null;e:{var s=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let l=s[c].h;const u=s[c].g;if(l-=i,0>l)i=Math.max(0,s[c].h-100),a=!1;else try{U4(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function tN(t){t.g||t.u||(t.Z=1,Ex(t.Ia,t),t.A=0)}function Yv(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Mu(an(t.Ia,t),sN(t,t.A)),t.A++,!0)}te.Ia=function(){if(this.u=null,nN(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Mu(an(this.cb,this),t)}};te.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,wn(10),wp(this),nN(this))};function Xv(t){t.B!=null&&(he.clearTimeout(t.B),t.B=null)}function nN(t){t.g=new Fu(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=vs(t.sa);Xe(e,"RID","rpc"),Xe(e,"SID",t.I),Xe(e,"CI",t.L?"0":"1"),Xe(e,"AID",t.T),Xe(e,"TYPE","xmlhttp"),Vu(t,e),t.o&&t.s&&Gv(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=_p(vs(e)),n.s=null,n.P=!0,Px(n,t)}te.bb=function(){this.v!=null&&(this.v=null,wp(this),Yv(this),wn(19))};function Ud(t){t.v!=null&&(he.clearTimeout(t.v),t.v=null)}function rN(t,e){var n=null;if(t.g==e){Ud(t),Xv(t),t.g=null;var r=2}else if(v_(t.h,e))n=e.D,Hx(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=fp(),Yt(r,new Ax(r,n)),Ep(t)}else tN(t);else if(s=e.o,s==3||s==0&&0<t.pa||!(r==1&&H4(t,e)||r==2&&Yv(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:zi(t,5);break;case 4:zi(t,10);break;case 3:zi(t,6);break;default:zi(t,2)}}}function sN(t,e){let n=t.Wa+Math.floor(Math.random()*t.ab);return t.l||(n*=2),n*e}function zi(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=an(t.jb,t);n||(n=new io("//www.google.com/images/cleardot.gif"),he.location&&he.location.protocol=="http"||Ld(n,"https"),_p(n)),B4(n.toString(),r)}else wn(2);t.G=0,t.l&&t.l.va(e),iN(t),Zx(t)}te.jb=function(t){t?(this.j.info("Successfully pinged google.com"),wn(2)):(this.j.info("Failed to ping google.com"),wn(1))};function iN(t){if(t.G=0,t.la=[],t.l){const e=Kx(t.h);(e.length!=0||t.i.length!=0)&&(JI(t.la,e),JI(t.la,t.i),t.h.i.length=0,Pv(t.i),t.i.length=0),t.l.ua()}}function oN(t,e,n){var r=n instanceof io?vs(n):new io(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),Fd(r,r.m);else{var s=he.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new io(null,void 0);r&&Ld(i,r),e&&(i.g=e),s&&Fd(i,s),n&&(i.l=n),r=i}return n=t.D,e=t.za,n&&e&&Xe(r,n,e),Xe(r,"VER",t.ma),Vu(t,r),r}function aN(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new _t(new Bu({ib:!0})):new _t(t.ra),e.L=t.H,e}function cN(){}te=cN.prototype;te.xa=function(){};te.wa=function(){};te.va=function(){};te.ua=function(){};te.Qa=function(){};function Bd(){if(Ua&&!(10<=Number(a4)))throw Error("Environmental error: no available transport.")}Bd.prototype.g=function(t,e){return new Yn(t,e)};function Yn(t,e){Bt.call(this),this.g=new Jx(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Xb)&&!Dd(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dd(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new fc(this)}en(Yn,Bt);Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;wn(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=oN(t,null,t.V),Ep(t)};Yn.prototype.close=function(){Qv(this.g)};Yn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Bv(t),t=n);e.i.push(new M4(e.$a++,t)),e.G==3&&Ep(e)};Yn.prototype.M=function(){this.g.l=null,delete this.j,Qv(this.g),delete this.g,Yn.X.M.call(this)};function lN(t){qv.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}en(lN,qv);function uN(){Hv.call(this),this.status=1}en(uN,Hv);function fc(t){this.g=t}en(fc,cN);fc.prototype.xa=function(){Yt(this.g,"a")};fc.prototype.wa=function(t){Yt(this.g,new lN(t))};fc.prototype.va=function(t){Yt(this.g,new uN)};fc.prototype.ua=function(){Yt(this.g,"b")};Bd.prototype.createWebChannel=Bd.prototype.g;Yn.prototype.send=Yn.prototype.u;Yn.prototype.open=Yn.prototype.m;Yn.prototype.close=Yn.prototype.close;pp.NO_ERROR=0;pp.TIMEOUT=8;pp.HTTP_ERROR=6;Rx.COMPLETE="complete";xx.EventType=Lu;Lu.OPEN="a";Lu.CLOSE="b";Lu.ERROR="c";Lu.MESSAGE="d";Bt.prototype.listen=Bt.prototype.N;_t.prototype.listenOnce=_t.prototype.O;_t.prototype.getLastError=_t.prototype.Na;_t.prototype.getLastErrorCode=_t.prototype.Ea;_t.prototype.getStatus=_t.prototype.aa;_t.prototype.getResponseJson=_t.prototype.Ra;_t.prototype.getResponseText=_t.prototype.fa;_t.prototype.send=_t.prototype.da;var K4=function(){return new Bd},W4=function(){return fp()},Og=pp,z4=Rx,G4=Uo,uT={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Q4=Bu,vh=xx,Y4=_t;const hT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc="9.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Xr("@firebase/firestore");function w_(){return ci.logLevel}function X4(t){ci.setLogLevel(t)}function F(t,...e){if(ci.logLevel<=_e.DEBUG){const n=e.map(Jv);ci.debug(`Firestore (${pc}): ${t}`,...n)}}function ft(t,...e){if(ci.logLevel<=_e.ERROR){const n=e.map(Jv);ci.error(`Firestore (${pc}): ${t}`,...n)}}function Ba(t,...e){if(ci.logLevel<=_e.WARN){const n=e.map(Jv);ci.warn(`Firestore (${pc}): ${t}`,...n)}}function Jv(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: `+t;throw ft(e),new Error(e)}function ae(t,e){t||Y()}function J4(t,e){t||Y()}function z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends st{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class e3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class t3{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Dt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dt,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new hN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new Nt(e)}}class n3{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ae(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class r3{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s}getToken(){return Promise.resolve(new n3(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i3{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=i=>{i.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?s(i):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string"),this.A=n.token,new s3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=o3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function $a(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function fN(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new D(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new et(0,0))}static max(){return new ie(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Te extends Jl{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const a3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends Jl{construct(e,n,r){return new pt(e,n,r)}static isValidIdentifier(e){return a3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new D(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new D(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new D(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new D(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(n)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(Te.fromString(e))}static fromName(e){return new H(Te.fromString(e).popFirst(5))}static empty(){return new H(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new Te(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function E_(t){return t.fields.find(e=>e.kind===2)}function Oi(t){return t.fields.filter(e=>e.kind!==2)}pN.UNKNOWN_ID=-1;class c3{constructor(e,n){this.fieldPath=e,this.kind=n}}class $d{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new $d(0,Xn.min())}}function gN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new Xn(s,H.empty(),e)}function mN(t){return new Xn(t.readTime,t.key,-1)}class Xn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xn(ie.min(),H.empty(),-1)}static max(){return new Xn(ie.max(),H.empty(),-1)}}function Zv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t){if(t.code!==C.FAILED_PRECONDITION||t.message!==_N)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new T((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof T?n:T.resolve(n)}catch(n){return T.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):T.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):T.reject(n)}static resolve(e){return new T((n,r)=>{n(e)})}static reject(e){return new T((n,r)=>{r(e)})}static waitFor(e){return new T((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=T.resolve(!1);for(const r of e)n=n.next(s=>s?T.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new T((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new T((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new Dt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new hl(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=ew(r.target.error);this.P.reject(new hl(e,s))}}static open(e,n,r,s){try{return new bp(n,e.transaction(s,r))}catch(i){throw new hl(n,i)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new u3(n)}}class mr{constructor(e,n,r){this.name=e,this.version=n,this.S=r,mr.D(it())===12.2&&ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),Ui(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Fn())return!1;if(mr.N())return!0;const e=it(),n=mr.D(e),r=0<n&&n<10,s=mr.k(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static N(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.M)==="YES"}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new hl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new D(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new D(C.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new hl(e,o))},s.onupgradeneeded=i=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.S.$(o,s.transaction,i.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.F(e);const a=bp.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(l=>(a.V(),l)).catch(l=>(a.abort(l),T.reject(l))).toPromise();return c.catch(()=>{}),await a.v,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(F("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class l3{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ui(this.U.delete())}}class hl extends D{constructor(e,n){super(C.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function bi(t){return t.name==="IndexedDbTransactionError"}class u3{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(F("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ui(r)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),Ui(this.store.add(e))}get(e){return Ui(this.store.get(e)).next(n=>(n===void 0&&(n=null),F("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),Ui(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),Ui(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const s=this.cursor(r),i=[];return this.H(s,(o,a)=>{i.push(a)}).next(()=>i)}{const s=this.store.getAll(r.range);return new T((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new T((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Y(e,n){F("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}tt(e){const n=this.cursor({});return new T((r,s)=>{n.onerror=i=>{const o=ew(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new T((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new l3(a),l=n(a.primaryKey,a.value,c);if(l instanceof T){const u=l.catch(h=>(c.done(),T.reject(h)));r.push(u)}c.isDone?s():c.G===null?a.continue():a.continue(c.G)}}).next(()=>T.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ui(t){return new T((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=ew(r.target.error);n(s)}})}let dT=!1;function ew(t){const e=mr.D(it());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new D("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dT||(dT=!0,setTimeout(()=>{throw r},0)),r}}return t}class h3{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){F("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{F("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){bi(n)?F("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Ei(n)}await this.nt(6e4)})}}class d3{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let s=n,i=!0;return T.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return F("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(s,i)).next(a=>(F("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=mN(i);Zv(o,r)>0&&(r=o)}),new Xn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.at=-1;class lt{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:Kt.RED,this.left=s!=null?s:Kt.EMPTY,this.right=i!=null?i:Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Kt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Kt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pT(this.data.getIterator())}getIteratorFrom(e){return new pT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class pT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Go(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new Fe(pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Tt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new Tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const p3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(ae(!!t),typeof t=="string"){let e=0;const n=p3.exec(t);if(ae(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vo(t){return typeof t=="string"?Tt.fromBase64String(t):Tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wN(t){const e=t.mapValue.fields.__previous_value__;return tw(e)?wN(e):e}function Zl(t){const e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n,r,s,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class ui{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ui("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ui&&e.projectId===this.projectId&&e.database===this.database}}function ju(t){return t==null}function eu(t){return t===0&&1/t==-1/0}function EN(t){return typeof t=="number"&&Number.isInteger(t)&&!eu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uh={nullValue:"NULL_VALUE"};function wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tw(t)?4:bN(t)?9007199254740991:10:Y()}function Gr(t,e){if(t===e)return!0;const n=wo(t);if(n!==wo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=li(r.timestampValue),o=li(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return vo(r.bytesValue).isEqual(vo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return ot(r.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(r.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ot(r.integerValue)===ot(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=ot(r.doubleValue),o=ot(s.doubleValue);return i===o?eu(i)===eu(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return $a(t.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(fT(i)!==fT(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Gr(i[a],o[a])))return!1;return!0}(t,e);default:return Y()}}function tu(t,e){return(t.values||[]).find(n=>Gr(n,e))!==void 0}function hi(t,e){if(t===e)return 0;const n=wo(t),r=wo(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=ot(s.integerValue||s.doubleValue),a=ot(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return gT(t.timestampValue,e.timestampValue);case 4:return gT(Zl(t),Zl(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,i){const o=vo(s),a=vo(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const l=pe(o[c],a[c]);if(l!==0)return l}return pe(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=pe(ot(s.latitude),ot(i.latitude));return o!==0?o:pe(ot(s.longitude),ot(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let c=0;c<o.length&&c<a.length;++c){const l=hi(o[c],a[c]);if(l)return l}return pe(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===Ws.mapValue&&i===Ws.mapValue)return 0;if(s===Ws.mapValue)return 1;if(i===Ws.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),c=i.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){const h=pe(a[u],l[u]);if(h!==0)return h;const d=hi(o[a[u]],c[l[u]]);if(d!==0)return d}return pe(a.length,l.length)}(t.mapValue,e.mapValue);default:throw Y()}}function gT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=li(t),r=li(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function _a(t){return b_(t)}function b_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=li(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?vo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,H.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=b_(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${b_(r.fields[a])}`;return i+"}"}(t.mapValue):Y();var e,n}function Eo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function I_(t){return!!t&&"integerValue"in t}function nu(t){return!!t&&"arrayValue"in t}function mT(t){return!!t&&"nullValue"in t}function _T(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bh(t){return!!t&&"mapValue"in t}function dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function m3(t){return"nullValue"in t?Uh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Eo(ui.empty(),H.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Y()}function _3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Eo(ui.empty(),H.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ws:Y()}function yT(t,e){const n=hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function vT(t,e){const n=hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(n)}setAll(e){let n=pt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=dl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Bh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Bh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Bo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Wt(dl(this.value))}}function IN(t){const e=[];return Bo(t.fields,(n,r)=>{const s=new pt([n]);if(Bh(r)){const i=IN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n,r,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new We(e,0,ie.min(),ie.min(),Wt.empty(),0)}static newFoundDocument(e,n,r){return new We(e,1,n,ie.min(),r,0)}static newNoDocument(e,n){return new We(e,2,n,ie.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new We(e,3,n,ie.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof We&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new We(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function wT(t,e=null,n=[],r=[],s=null,i=null,o=null){return new y3(t,e,n,r,s,i,o)}function bo(t){const e=z(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+_a(s.value);var s}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_a(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_a(r)).join(",")),e.ht=n}return e.ht}function v3(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${_a(r.value)}`;var r}).join(", ")}]`),ju(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>_a(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>_a(n)).join(",")),`Target(${e})`}function qu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!k3(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!Gr(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TT(t.startAt,e.startAt)&&TT(t.endAt,e.endAt)}function Vd(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function jd(t,e){return t.filters.filter(n=>n instanceof zt&&n.field.isEqual(e))}function ET(t,e,n){let r=Uh,s=!0;for(const i of jd(t,e)){let o=Uh,a=!0;switch(i.op){case"<":case"<=":o=m3(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Uh}yT({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];yT({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function bT(t,e,n){let r=Ws,s=!0;for(const i of jd(t,e)){let o=Ws,a=!0;switch(i.op){case">=":case">":o=_3(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Ws}vT({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];vT({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}class zt extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,r):new w3(e,n,r):n==="array-contains"?new I3(e,r):n==="in"?new T3(e,r):n==="not-in"?new S3(e,r):n==="array-contains-any"?new C3(e,r):new zt(e,n,r)}static lt(e,n,r){return n==="in"?new E3(e,r):new b3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft(hi(n,this.value)):n!==null&&wo(this.value)===wo(n)&&this.ft(hi(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class w3 extends zt{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.ft(n)}}class E3 extends zt{constructor(e,n){super(e,"in",n),this.keys=TN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class b3 extends zt{constructor(e,n){super(e,"not-in",n),this.keys=TN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class I3 extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nu(n)&&tu(n.arrayValue,this.value)}}class T3 extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tu(this.value.arrayValue,n)}}class S3 extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!tu(this.value.arrayValue,n)}}class C3 extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tu(this.value.arrayValue,r))}}class di{constructor(e,n){this.position=e,this.inclusive=n}}class ya{constructor(e,n="asc"){this.field=e,this.dir=n}}function k3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function IT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=hi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function TT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this._t=null,this.wt=null,this.startAt,this.endAt}}function SN(t,e,n,r,s,i,o,a){return new Ss(t,e,n,r,s,i,o,a)}function gc(t){return new Ss(t)}function ST(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nw(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function rw(t){for(const e of t.filters)if(e.dt())return e.field;return null}function sw(t){return t.collectionGroup!==null}function Va(t){const e=z(t);if(e._t===null){e._t=[];const n=rw(e),r=nw(e);if(n!==null&&r===null)n.isKeyField()||e._t.push(new ya(n)),e._t.push(new ya(pt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ya(pt.keyField(),i))}}}return e._t}function Un(t){const e=z(t);if(!e.wt)if(e.limitType==="F")e.wt=wT(e.path,e.collectionGroup,Va(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Va(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new ya(i.field,o))}const r=e.endAt?new di(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new di(e.startAt.position,e.startAt.inclusive):null;e.wt=wT(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.wt}function qd(t,e,n){return new Ss(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hu(t,e){return qu(Un(t),Un(e))&&t.limitType===e.limitType}function CN(t){return`${bo(Un(t))}|lt:${t.limitType}`}function T_(t){return`Query(target=${v3(Un(t))}; limitType=${t.limitType})`}function iw(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):H.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=IT(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,Va(n),r)||n.endAt&&!function(s,i,o){const a=IT(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,Va(n),r))}(t,e)}function kN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AN(t){return(e,n)=>{let r=!1;for(const s of Va(t)){const i=A3(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function A3(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),c=o.data.field(s);return a!==null&&c!==null?hi(a,c):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(e)?"-0":e}}function xN(t){return{integerValue:""+t}}function NN(t,e){return EN(e)?xN(e):RN(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this._=void 0}}function R3(t,e,n){return t instanceof ja?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Io?DN(t,e):t instanceof To?ON(t,e):function(r,s){const i=PN(r,s),o=CT(i)+CT(r.yt);return I_(i)&&I_(r.yt)?xN(o):RN(r.It,o)}(t,e)}function x3(t,e,n){return t instanceof Io?DN(t,e):t instanceof To?ON(t,e):n}function PN(t,e){return t instanceof qa?I_(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class ja extends Ip{}class Io extends Ip{constructor(e){super(),this.elements=e}}function DN(t,e){const n=MN(e);for(const r of t.elements)n.some(s=>Gr(s,r))||n.push(r);return{arrayValue:{values:n}}}class To extends Ip{constructor(e){super(),this.elements=e}}function ON(t,e){let n=MN(e);for(const r of t.elements)n=n.filter(s=>!Gr(s,r));return{arrayValue:{values:n}}}class qa extends Ip{constructor(e,n){super(),this.It=e,this.yt=n}}function CT(t){return ot(t.integerValue||t.doubleValue)}function MN(t){return nu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.field=e,this.transform=n}}function N3(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Io&&r instanceof Io||n instanceof To&&r instanceof To?$a(n.elements,r.elements,Gr):n instanceof qa&&r instanceof qa?Gr(n.yt,r.yt):n instanceof ja&&r instanceof ja}(t.transform,e.transform)}class P3{constructor(e,n){this.version=e,this.transformResults=n}}class Ze{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ze}static exists(e){return new Ze(void 0,e)}static updateTime(e){return new Ze(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $h(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tp{}function LN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _c(t.key,Ze.none()):new mc(t.key,t.data,Ze.none());{const n=t.data,r=Wt.empty();let s=new Fe(pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Cs(t.key,r,new Wn(s.toArray()),Ze.none())}}function D3(t,e,n){t instanceof mc?function(r,s,i){const o=r.value.clone(),a=AT(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Cs?function(r,s,i){if(!$h(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=AT(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(FN(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function fl(t,e,n,r){return t instanceof mc?function(s,i,o,a){if(!$h(s.precondition,i))return o;const c=s.value.clone(),l=RT(s.fieldTransforms,a,i);return c.setAll(l),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Cs?function(s,i,o,a){if(!$h(s.precondition,i))return o;const c=RT(s.fieldTransforms,a,i),l=i.data;return l.setAll(FN(s)),l.setAll(c),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(t,e,n,r):function(s,i,o){return $h(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function O3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=PN(r.transform,s||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(r.field,i))}return n||null}function kT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&$a(n,r,(s,i)=>N3(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mc extends Tp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cs extends Tp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function FN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function AT(t,e,n){const r=new Map;ae(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,x3(o,a,n[s]))}return r}function RT(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,R3(i,o,e))}return r}class _c extends Tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ow extends Tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,be;function UN(t){switch(t){default:return Y();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function BN(t){if(t===void 0)return ft("GRPC error has no .code"),C.UNKNOWN;switch(t){case gt.OK:return C.OK;case gt.CANCELLED:return C.CANCELLED;case gt.UNKNOWN:return C.UNKNOWN;case gt.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case gt.INTERNAL:return C.INTERNAL;case gt.UNAVAILABLE:return C.UNAVAILABLE;case gt.UNAUTHENTICATED:return C.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case gt.NOT_FOUND:return C.NOT_FOUND;case gt.ALREADY_EXISTS:return C.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return C.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case gt.ABORTED:return C.ABORTED;case gt.OUT_OF_RANGE:return C.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return C.UNIMPLEMENTED;case gt.DATA_LOSS:return C.DATA_LOSS;default:return Y()}}(be=gt||(gt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return vN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=new lt(H.comparator);function Mn(){return L3}const $N=new lt(H.comparator);function Gc(...t){let e=$N;for(const n of t)e=e.insert(n.key,n);return e}function VN(t){let e=$N;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Lr(){return pl()}function jN(){return pl()}function pl(){return new Ii(t=>t.toString(),(t,e)=>t.isEqual(e))}const F3=new lt(H.comparator),U3=new Fe(H.comparator);function ge(...t){let e=U3;for(const n of t)e=e.add(n);return e}const B3=new Fe(pe);function Sp(){return B3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,zu.createSynthesizedTargetChangeForCurrentChange(e,n)),new Wu(ie.min(),r,Sp(),Mn(),ge())}}class zu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new zu(Tt.EMPTY_BYTE_STRING,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r,s){this.Tt=e,this.removedTargetIds=n,this.key=r,this.Et=s}}class qN{constructor(e,n){this.targetId=e,this.At=n}}class HN{constructor(e,n,r=Tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class xT{constructor(){this.Rt=0,this.bt=PT(),this.Pt=Tt.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=ge(),n=ge(),r=ge();return this.bt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new zu(this.Pt,this.vt,e,n,r)}Nt(){this.Vt=!1,this.bt=PT()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class $3{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Mn(),this.qt=NT(),this.Kt=new Fe(pe)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const r=this.zt(n);switch(e.state){case 0:this.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),r.Ct(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((r,s)=>{this.Ht(s)&&n(s)})}Yt(e){const n=e.targetId,r=e.At.count,s=this.Xt(n);if(s){const i=s.target;if(Vd(i))if(r===0){const o=new H(i.path);this.jt(n,o,We.newNoDocument(o,ie.min()))}else ae(r===1);else this.Zt(n)!==r&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&Vd(a.target)){const c=new H(a.target.path);this.Ut.get(c)!==null||this.ee(o,c)||this.jt(o,c,We.newNoDocument(c,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let r=ge();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Xt(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(r=r.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const s=new Wu(e,n,this.Kt,this.Ut,r);return this.Ut=Mn(),this.qt=NT(),this.Kt=new Fe(pe),s}Qt(e,n){if(!this.Ht(e))return;const r=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,n)?s.kt(n,1):s.Mt(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let n=this.Lt.get(e);return n||(n=new xT,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new Fe(pe),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new xT),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function NT(){return new lt(H.comparator)}function PT(){return new lt(H.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),j3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class q3{constructor(e,n){this.databaseId=e,this.gt=n}}function ru(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KN(t,e){return t.gt?e.toBase64():e.toUint8Array()}function H3(t,e){return ru(t,e.toTimestamp())}function Ot(t){return ae(!!t),ie.fromTimestamp(function(e){const n=li(e);return new et(n.seconds,n.nanos)}(t))}function aw(t,e){return function(n){return new Te(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function WN(t){const e=Te.fromString(t);return ae(eP(e)),e}function su(t,e){return aw(t.databaseId,e.path)}function Br(t,e){const n=WN(e);if(n.get(1)!==t.databaseId.projectId)throw new D(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new D(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(GN(n))}function S_(t,e){return aw(t.databaseId,e)}function zN(t){const e=WN(t);return e.length===4?Te.emptyPath():GN(e)}function iu(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GN(t){return ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function DT(t,e,n){return{name:su(t,e),fields:n.value.mapValue.fields}}function QN(t,e,n){const r=Br(t,e.name),s=Ot(e.updateTime),i=new Wt({mapValue:{fields:e.fields}}),o=We.newFoundDocument(r,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function K3(t,e){return"found"in e?function(n,r){ae(!!r.found),r.found.name,r.found.updateTime;const s=Br(n,r.found.name),i=Ot(r.found.updateTime),o=new Wt({mapValue:{fields:r.found.fields}});return We.newFoundDocument(s,i,o)}(t,e):"missing"in e?function(n,r){ae(!!r.missing),ae(!!r.readTime);const s=Br(n,r.missing),i=Ot(r.readTime);return We.newNoDocument(s,i)}(t,e):Y()}function W3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,l){return c.gt?(ae(l===void 0||typeof l=="string"),Tt.fromBase64String(l||"")):(ae(l===void 0||l instanceof Uint8Array),Tt.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=c.code===void 0?C.UNKNOWN:BN(c.code);return new D(l,c.message||"")}(o);n=new HN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Br(t,r.document.name),i=Ot(r.document.updateTime),o=new Wt({mapValue:{fields:r.document.fields}}),a=We.newFoundDocument(s,i,o),c=r.targetIds||[],l=r.removedTargetIds||[];n=new Vh(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Br(t,r.document),i=r.readTime?Ot(r.readTime):ie.min(),o=We.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Vh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Br(t,r.document),i=r.removedTargetIds||[];n=new Vh([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new M3(s),o=r.targetId;n=new qN(o,i)}}return n}function ou(t,e){let n;if(e instanceof mc)n={update:DT(t,e.key,e.value)};else if(e instanceof _c)n={delete:su(t,e.key)};else if(e instanceof Cs)n={update:DT(t,e.key,e.data),updateMask:Z3(e.fieldMask)};else{if(!(e instanceof ow))return Y();n={verify:su(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof ja)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Io)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof To)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof qa)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:H3(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function C_(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ze.updateTime(Ot(s.updateTime)):s.exists!==void 0?Ze.exists(s.exists):Ze.none()}(e.currentDocument):Ze.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)ae(o.setToServerValue==="REQUEST_TIME"),a=new ja;else if("appendMissingElements"in o){const l=o.appendMissingElements.values||[];a=new Io(l)}else if("removeAllFromArray"in o){const l=o.removeAllFromArray.values||[];a=new To(l)}else"increment"in o?a=new qa(i,o.increment):Y();const c=pt.fromServerFormat(o.fieldPath);return new Ku(c,a)}(t,s)):[];if(e.update){e.update.name;const s=Br(t,e.update.name),i=new Wt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const c=a.fieldPaths||[];return new Wn(c.map(l=>pt.fromServerFormat(l)))}(e.updateMask);return new Cs(s,i,o,n,r)}return new mc(s,i,n,r)}if(e.delete){const s=Br(t,e.delete);return new _c(s,n)}if(e.verify){const s=Br(t,e.verify);return new ow(s,n)}return Y()}function z3(t,e){return t&&t.length>0?(ae(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?Ot(r.updateTime):Ot(s);return i.isEqual(ie.min())&&(i=Ot(s)),new P3(i,r.transformResults||[])}(n,e))):[]}function YN(t,e){return{documents:[S_(t,e.path)]}}function XN(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=S_(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=S_(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(c){if(c.length===0)return;const l=c.map(u=>function(h){if(h.op==="=="){if(_T(h.value))return{unaryFilter:{field:Qo(h.field),op:"IS_NAN"}};if(mT(h.value))return{unaryFilter:{field:Qo(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(_T(h.value))return{unaryFilter:{field:Qo(h.field),op:"IS_NOT_NAN"}};if(mT(h.value))return{unaryFilter:{field:Qo(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(h.field),op:Y3(h.op),value:h.value}}}(u));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);s&&(n.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(l=>function(u){return{field:Qo(u.field),direction:Q3(u.dir)}}(l))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(c,l){return c.gt||ju(l)?l:{value:l}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function JN(t){let e=zN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ae(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=ZN(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new ya(sa(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,ju(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(u){const h=!!u.before,d=u.values||[];return new di(d,h)}(n.startAt));let l=null;return n.endAt&&(l=function(u){const h=!u.before,d=u.values||[];return new di(d,h)}(n.endAt)),SN(e,s,o,i,a,"F",c,l)}function G3(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Y()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZN(t){return t?t.unaryFilter!==void 0?[J3(t)]:t.fieldFilter!==void 0?[X3(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>ZN(e)).reduce((e,n)=>e.concat(n)):Y():[]}function Q3(t){return V3[t]}function Y3(t){return j3[t]}function Qo(t){return{fieldPath:t.canonicalString()}}function sa(t){return pt.fromServerFormat(t.fieldPath)}function X3(t){return zt.create(sa(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(t.fieldFilter.op),t.fieldFilter.value)}function J3(t){switch(t.unaryFilter.op){case"IS_NAN":const e=sa(t.unaryFilter.field);return zt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=sa(t.unaryFilter.field);return zt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=sa(t.unaryFilter.field);return zt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=sa(t.unaryFilter.field);return zt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}function Z3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=OT(e)),e=eQ(t.get(n),e);return OT(e)}function eQ(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function OT(t){return t+""}function Fr(t){const e=t.length;if(ae(e>=2),e===2)return ae(t.charAt(0)===""&&t.charAt(1)===""),Te.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&Y(),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Y()}i=o+2}return new Te(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t,e){return[t,In(e)]}function tP(t,e,n){return[t,In(e),n]}const tQ={},nQ=["prefixPath","collectionGroup","readTime","documentId"],rQ=["prefixPath","collectionGroup","documentId"],sQ=["collectionGroup","readTime","prefixPath","documentId"],iQ=["canonicalId","targetId"],oQ=["targetId","path"],aQ=["path","targetId"],cQ=["collectionId","parent"],lQ=["indexId","uid"],uQ=["uid","sequenceNumber"],hQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dQ=["indexId","uid","orderedDocumentKey"],fQ=["userId","collectionPath","documentId"],pQ=["userId","collectionPath","largestBatchId"],gQ=["userId","collectionGroup","largestBatchId"],nP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mQ=[...nP,"documentOverlays"],rP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sP=rP,_Q=[...sP,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends yN{constructor(e,n){super(),this.ie=e,this.currentSequenceNumber=n}}function Vt(t,e){const n=z(t);return mr.O(n.ie,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&D3(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=LN(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,(n,r)=>kT(n,r))&&$a(this.baseMutations,e.baseMutations,(n,r)=>kT(n,r))}}class lw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ae(e.mutations.length===r.length);let s=F3;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new lw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r,s,i=ie.min(),o=ie.min(),a=Tt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.re=e}}function yQ(t,e){let n;if(e.document)n=QN(t.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=H.fromSegments(e.noDocument.path),s=Co(e.noDocument.readTime);n=We.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{const r=H.fromSegments(e.unknownDocument.path),s=Co(e.unknownDocument.version);n=We.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(r){const s=new et(r[0],r[1]);return ie.fromTimestamp(s)}(e.readTime)),n}function LT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:su(s,i.key),fields:i.data.value.mapValue.fields,updateTime:ru(s,i.version.toTimestamp())}}(t.re,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:So(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:n.path.toArray(),version:So(e.version)}}return r}function Hd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function So(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Co(t){const e=new et(t.seconds,t.nanoseconds);return ie.fromTimestamp(e)}function Bi(t,e){const n=(e.baseMutations||[]).map(i=>C_(t.re,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>C_(t.re,i)),s=et.fromMillis(e.localWriteTimeMs);return new cw(e.batchId,s,n,r)}function Qc(t){const e=Co(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Co(t.lastLimboFreeSnapshotVersion):ie.min();let r;var s;return t.query.documents!==void 0?(ae((s=t.query).documents.length===1),r=Un(gc(zN(s.documents[0])))):r=function(i){return Un(JN(i))}(t.query),new Js(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Tt.fromBase64String(t.resumeToken))}function oP(t,e){const n=So(e.snapshotVersion),r=So(e.lastLimboFreeSnapshotVersion);let s;s=Vd(e.target)?YN(t.re,e.target):XN(t.re,e.target);const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bo(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function hw(t){const e=JN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qd(e,e.limit,"L"):e}function Mg(t,e){return new uw(e.largestBatchId,C_(t.re,e.overlayMutation))}function FT(t,e){const n=e.path.lastSegment();return[t,In(e.path.popLast()),n]}function UT(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:So(r.readTime),documentKey:In(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{getBundleMetadata(e,n){return BT(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Co(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return BT(e).put({bundleId:(r=n).id,createTime:So(Ot(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return $T(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:hw(s.bundledQuery),readTime:Co(s.readTime)};var s})}saveNamedQuery(e,n){return $T(e).put(function(r){return{name:r.name,readTime:So(Ot(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function BT(t){return Vt(t,"bundles")}function $T(t){return Vt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.It=e,this.userId=n}static oe(e,n){const r=n.uid||"";return new Cp(e,r)}getOverlay(e,n){return Oc(e).get(FT(this.userId,n)).next(r=>r?Mg(this.It,r):null)}getOverlays(e,n){const r=Lr();return T.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new uw(n,o);s.push(this.ue(e,a))}),T.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(In(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Oc(e).Y("collectionPathOverlayIndex",a))}),T.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Lr(),i=In(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Oc(e).W("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const l=Mg(this.It,c);s.set(l.getKey(),l)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Lr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Oc(e).Z({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{const h=Mg(this.It,l);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>i)}ue(e,n){return Oc(e).put(function(r,s,i){const[o,a,c]=FT(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:ou(r.re,i.mutation)}}(this.It,this.userId,n))}}function Oc(t){return Vt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){}ce(e,n){this.ae(e,n),n.he()}ae(e,n){if("nullValue"in e)this.le(n,5);else if("booleanValue"in e)this.le(n,10),n.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(n,15),n.fe(ot(e.integerValue));else if("doubleValue"in e){const r=ot(e.doubleValue);isNaN(r)?this.le(n,13):(this.le(n,15),eu(r)?n.fe(0):n.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(n,20),typeof r=="string"?n.de(r):(n.de(`${r.seconds||""}`),n.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,n),this.we(n);else if("bytesValue"in e)this.le(n,30),n.me(vo(e.bytesValue)),this.we(n);else if("referenceValue"in e)this.ge(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(n,45),n.fe(r.latitude||0),n.fe(r.longitude||0)}else"mapValue"in e?bN(e)?this.le(n,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,n),this.we(n)):"arrayValue"in e?(this.pe(e.arrayValue,n),this.we(n)):Y()}_e(e,n){this.le(n,25),this.Ie(e,n)}Ie(e,n){n.de(e)}ye(e,n){const r=e.fields||{};this.le(n,55);for(const s of Object.keys(r))this._e(s,n),this.ae(r[s],n)}pe(e,n){const r=e.values||[];this.le(n,50);for(const s of r)this.ae(s,n)}ge(e,n){this.le(n,37),H.fromName(e).path.forEach(r=>{this.le(n,60),this.Ie(r,n)})}le(e,n){e.fe(n)}we(e){e.fe(2)}}$i.Te=new $i;function wQ(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function VT(t){const e=64-function(n){let r=0;for(let s=0;s<8;++s){const i=wQ(255&n[s]);if(r+=i,i!==8)break}return r}(t);return Math.ceil(e/8)}class EQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ae(r.value),r=n.next();this.Re()}be(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Pe(r.value),r=n.next();this.ve()}Ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=n.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=n.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const n=this.Ce(e),r=VT(n);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Ne(e){const n=this.Ce(e),r=VT(n);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ae(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}Pe(e){const n=255&e;n===0?(this.Fe(0),this.Fe(255)):n===255?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class bQ{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class IQ{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Mc{constructor(){this.Be=new EQ,this.Le=new bQ(this.Be),this.Ue=new IQ(this.Be)}seed(e){this.Be.seed(e)}qe(e){return e===0?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Vi(this.indexId,this.documentKey,this.arrayValue,r)}}function Ri(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=jT(t.arrayValue,e.arrayValue),n!==0?n:(n=jT(t.directionalValue,e.directionalValue),n!==0?n:H.comparator(t.documentKey,e.documentKey)))}function jT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TQ{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const n of e.filters){const r=n;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const n=E_(e);if(n!==void 0&&!this.ze(n))return!1;const r=Oi(e);let s=0,i=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(this.je!==void 0){const o=r[s];if(!this.He(this.je,o)||!this.Je(this.Ge[i++],o))return!1;++s}for(;s<r.length;++s){const o=r[s];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}ze(e){for(const n of this.Qe)if(this.He(n,e))return!0;return!1}He(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Je(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(){this.Ye=new dw}addToCollectionParentIndex(e,n){return this.Ye.add(n),T.resolve()}getCollectionParents(e,n){return T.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return T.resolve()}deleteFieldIndex(e,n){return T.resolve()}getDocumentsMatchingTarget(e,n){return T.resolve(null)}getIndexType(e,n){return T.resolve(0)}getFieldIndexes(e,n){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,n){return T.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,n){return T.resolve(Xn.min())}updateCollectionGroup(e,n,r){return T.resolve()}updateIndexEntries(e,n){return T.resolve()}}class dw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Fe(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Fe(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Uint8Array(0);class CQ{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new dw,this.Ze=new Ii(r=>bo(r),(r,s)=>qu(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const i={collectionId:r,parent:In(s)};return qT(e).put(i)}return T.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[fN(n),""],!1,!0);return qT(e).W(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Fr(o.parent))}return r})}addFieldIndex(e,n){const r=bh(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Fc(e);return i.next(a=>{o.put(UT(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=bh(e),s=Fc(e),i=Lc(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Lc(e);let s=!0;const i=new Map;return T.forEach(this.tn(n),o=>this.en(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=ge();const a=[];return T.forEach(i,(c,l)=>{var u;F("IndexedDbIndexManager",`Using index ${u=c,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`} to execute ${bo(n)}`);const h=function(w,I){const k=E_(I);if(k===void 0)return null;for(const x of jd(w,k.fieldPath))switch(x.op){case"array-contains-any":return x.value.arrayValue.values||[];case"array-contains":return[x.value]}return null}(l,c),d=function(w,I){const k=new Map;for(const x of Oi(I))for(const $ of jd(w,x.fieldPath))switch($.op){case"==":case"in":k.set(x.fieldPath.canonicalString(),$.value);break;case"not-in":case"!=":return k.set(x.fieldPath.canonicalString(),$.value),Array.from(k.values())}return null}(l,c),f=function(w,I){const k=[];let x=!0;for(const $ of Oi(I)){const A=$.kind===0?ET(w,$.fieldPath,w.startAt):bT(w,$.fieldPath,w.startAt);k.push(A.value),x&&(x=A.inclusive)}return new di(k,x)}(l,c),p=function(w,I){const k=[];let x=!0;for(const $ of Oi(I)){const A=$.kind===0?bT(w,$.fieldPath,w.endAt):ET(w,$.fieldPath,w.endAt);k.push(A.value),x&&(x=A.inclusive)}return new di(k,x)}(l,c),_=this.nn(c,l,f),v=this.nn(c,l,p),y=this.sn(c,l,d),g=this.rn(c.indexId,h,_,f.inclusive,v,p.inclusive,y);return T.forEach(g,w=>r.J(w,n.limit).next(I=>{I.forEach(k=>{const x=H.fromSegments(k.documentKey);o.has(x)||(o=o.add(x),a.push(x))})}))}).next(()=>a)}return T.resolve(null)})}tn(e){let n=this.Ze.get(e);return n||(n=[e],this.Ze.set(e,n),n)}rn(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),l=c/(n!=null?n.length:1),u=[];for(let h=0;h<c;++h){const d=n?this.on(n[h/l]):Eh,f=this.un(e,d,r[h%l],s),p=this.cn(e,d,i[h%l],o),_=a.map(v=>this.un(e,d,v,!0));u.push(...this.createRange(f,p,_))}return u}un(e,n,r,s){const i=new Vi(e,H.empty(),n,r);return s?i:i.Ke()}cn(e,n,r,s){const i=new Vi(e,H.empty(),n,r);return s?i.Ke():i}en(e,n){const r=new TQ(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;return T.forEach(this.tn(n),s=>this.en(e,s).next(i=>{i?r!==0&&i.fields.length<function(o){let a=new Fe(pt.comparator),c=!1;for(const l of o.filters){const u=l;u.field.isKeyField()||(u.op==="array-contains"||u.op==="array-contains-any"?c=!0:a=a.add(u.field))}for(const l of o.orderBy)l.field.isKeyField()||(a=a.add(l.field));return a.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,n){const r=new Mc;for(const s of Oi(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.qe(s.kind);$i.Te.ce(i,o)}return r.$e()}on(e){const n=new Mc;return $i.Te.ce(e,n.qe(0)),n.$e()}hn(e,n){const r=new Mc;return $i.Te.ce(Eo(this.databaseId,n),r.qe(function(s){const i=Oi(s);return i.length===0?0:i[i.length-1].kind}(e))),r.$e()}sn(e,n,r){if(r===null)return[];let s=[];s.push(new Mc);let i=0;for(const o of Oi(e)){const a=r[i++];for(const c of s)if(this.ln(n,o.fieldPath)&&nu(a))s=this.fn(s,o,a);else{const l=c.qe(o.kind);$i.Te.ce(a,l)}}return this.dn(s)}nn(e,n,r){return this.sn(e,n,r.position)}dn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].$e();return n}fn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new Mc;c.seed(a.$e()),$i.Te.ce(o,c.qe(n.kind)),i.push(c)}return i}ln(e,n){return!!e.filters.find(r=>r instanceof zt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=bh(e),s=Fc(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(i=>{const o=[];return T.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(l,u){const h=u?new $d(u.sequenceNumber,new Xn(Co(u.readTime),new H(Fr(u.documentKey)),u.largestBatchId)):$d.empty(),d=l.fields.map(([f,p])=>new c3(pt.fromServerFormat(f),p));return new pN(l.indexId,l.collectionGroup,d,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:pe(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=bh(e),i=Fc(e);return this._n(e).next(o=>s.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>T.forEach(a,c=>i.put(UT(c.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return T.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?T.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),T.forEach(a,c=>this.wn(e,s,c).next(l=>{const u=this.mn(i,c);return l.isEqual(u)?T.resolve():this.gn(e,i,c,l,u)}))))})}yn(e,n,r,s){return Lc(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,n.key),documentKey:n.key.path.toArray()})}pn(e,n,r,s){return Lc(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=Lc(e);let i=new Fe(Ri);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,n)])},(o,a)=>{i=i.add(new Vi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}mn(e,n){let r=new Fe(Ri);const s=this.an(n,e);if(s==null)return r;const i=E_(n);if(i!=null){const o=e.data.field(i.fieldPath);if(nu(o))for(const a of o.arrayValue.values||[])r=r.add(new Vi(n.indexId,e.key,this.on(a),s))}else r=r.add(new Vi(n.indexId,e.key,Eh,s));return r}gn(e,n,r,s,i){F("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,c,l,u,h){const d=a.getIterator(),f=c.getIterator();let p=Go(d),_=Go(f);for(;p||_;){let v=!1,y=!1;if(p&&_){const g=l(p,_);g<0?y=!0:g>0&&(v=!0)}else p!=null?y=!0:v=!0;v?(u(_),_=Go(f)):y?(h(p),p=Go(d)):(p=Go(d),_=Go(f))}}(s,i,Ri,a=>{o.push(this.yn(e,n,r,a))},a=>{o.push(this.pn(e,n,r,a))}),T.waitFor(o)}_n(e){let n=1;return Fc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ri(o,a)).filter((o,a,c)=>!a||Ri(o,c[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Ri(o,e),c=Ri(o,n);if(a===0)s[0]=e.Ke();else if(a>0&&c<0)s.push(o),s.push(o.Ke());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2)i.push(IDBKeyRange.bound([s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Eh,[]],[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Eh,[]]));return i}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(HT)}getMinOffset(e,n){return T.mapArray(this.tn(n),r=>this.en(e,r).next(s=>s||Y())).next(HT)}}function qT(t){return Vt(t,"collectionParents")}function Lc(t){return Vt(t,"indexEntries")}function bh(t){return Vt(t,"indexConfiguration")}function Fc(t){return Vt(t,"indexState")}function HT(t){ae(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Zv(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Xn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Z({range:o},(u,h,d)=>(a++,d.delete()));i.push(c.next(()=>{ae(a===1)}));const l=[];for(const u of n.mutations){const h=tP(e,u.key.path,n.batchId);i.push(s.delete(h)),l.push(u.key)}return T.waitFor(i).next(()=>l)}function Kd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Y();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(41943040,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class kp{constructor(e,n,r,s){this.userId=e,this.It=n,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,n,r,s){ae(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new kp(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ms(e).Z({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Zo(e),o=Ms(e);return o.add({}).next(a=>{ae(typeof a=="number");const c=new cw(a,n,r,s),l=function(d,f,p){const _=p.baseMutations.map(y=>ou(d.re,y)),v=p.mutations.map(y=>ou(d.re,y));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:_,mutations:v}}(this.It,this.userId,c),u=[];let h=new Fe((d,f)=>pe(d.canonicalString(),f.canonicalString()));for(const d of s){const f=tP(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),u.push(o.put(l)),u.push(i.put(f,tQ))}return h.forEach(d=>{u.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.In[a]=c.keys()}),T.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return Ms(e).get(n).next(r=>r?(ae(r.userId===this.userId),Bi(this.It,r)):null)}Tn(e,n){return this.In[n]?T.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.In[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ms(e).Z({index:"userMutationsIndex",range:s},(o,a,c)=>{a.userId===this.userId&&(ae(a.batchId>=r),i=Bi(this.It,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ms(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ms(e).W("userMutationsIndex",n).next(r=>r.map(s=>Bi(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=jh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Zo(e).Z({range:s},(o,a,c)=>{const[l,u,h]=o,d=Fr(u);if(l===this.userId&&n.path.isEqual(d))return Ms(e).get(h).next(f=>{if(!f)throw Y();ae(f.userId===this.userId),i.push(Bi(this.It,f))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(pe);const s=[];return n.forEach(i=>{const o=jh(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Zo(e).Z({range:a},(l,u,h)=>{const[d,f,p]=l,_=Fr(f);d===this.userId&&i.path.isEqual(_)?r=r.add(p):h.done()});s.push(c)}),T.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=jh(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Fe(pe);return Zo(e).Z({range:o},(c,l,u)=>{const[h,d,f]=c,p=Fr(d);h===this.userId&&r.isPrefixOf(p)?p.length===s&&(a=a.add(f)):u.done()}).next(()=>this.En(e,a))}En(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Ms(e).get(i).next(o=>{if(o===null)throw Y();ae(o.userId===this.userId),r.push(Bi(this.It,o))}))}),T.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return aP(e.ie,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),T.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return T.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Zo(e).Z({range:r},(i,o,a)=>{if(i[0]===this.userId){const c=Fr(i[1]);s.push(c)}else a.done()}).next(()=>{ae(s.length===0)})})}containsKey(e,n){return cP(e,this.userId,n)}Rn(e){return lP(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function cP(t,e,n){const r=jh(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Zo(t).Z({range:i,X:!0},(a,c,l)=>{const[u,h,d]=a;u===e&&h===s&&(o=!0),l.done()}).next(()=>o)}function Ms(t){return Vt(t,"mutations")}function Zo(t){return Vt(t,"documentMutations")}function lP(t){return Vt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ko(0)}static vn(){return new ko(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(e,n){this.referenceDelegate=e,this.It=n}allocateTargetId(e){return this.Vn(e).next(n=>{const r=new ko(n.highestTargetId);return n.highestTargetId=r.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>ie.fromTimestamp(new et(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Sn(e,s)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(n,r),this.Sn(e,r))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Yo(e).delete(n.targetId)).next(()=>this.Vn(e)).next(r=>(ae(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Yo(e).Z((o,a)=>{const c=Qc(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>T.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Yo(e).Z((r,s)=>{const i=Qc(s);n(i)})}Vn(e){return WT(e).get("targetGlobalKey").next(n=>(ae(n!==null),n))}Sn(e,n){return WT(e).put("targetGlobalKey",n)}Dn(e,n){return Yo(e).put(oP(this.It,n))}Cn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=bo(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Yo(e).Z({range:s,index:"queryTargetsIndex"},(o,a,c)=>{const l=Qc(a);qu(n,l.target)&&(i=l,c.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Vs(e);return n.forEach(o=>{const a=In(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),T.waitFor(s)}removeMatchingKeys(e,n,r){const s=Vs(e);return T.forEach(n,i=>{const o=In(i.path);return T.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Vs(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Vs(e);let i=ge();return s.Z({range:r,X:!0},(o,a,c)=>{const l=Fr(o[1]),u=new H(l);i=i.add(u)}).next(()=>i)}containsKey(e,n){const r=In(n.path),s=IDBKeyRange.bound([r],[fN(r)],!1,!0);let i=0;return Vs(e).Z({index:"documentTargetsIndex",X:!0,range:s},([o,a],c,l)=>{o!==0&&(i++,l.done())}).next(()=>i>0)}se(e,n){return Yo(e).get(n).next(r=>r?Qc(r):null)}}function Yo(t){return Vt(t,"targets")}function WT(t){return Vt(t,"targetGlobal")}function Vs(t){return Vt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class AQ{constructor(e){this.xn=e,this.buffer=new Fe(zT),this.Nn=0}kn(){return++this.Nn}Mn(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RQ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.On=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return this.On!==null}Fn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.On=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bi(n)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ei(n)}await this.Fn(3e5)})}}class xQ{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return T.resolve(On.at);const r=new AQ(n);return this.$n.forEachTarget(e,s=>r.Mn(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.Mn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.$n.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),T.resolve(KT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KT):this.Un(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,n){let r,s,i,o,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),w_()<=_e.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),T.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(e,n){this.db=e,this.garbageCollector=function(r,s){return new xQ(r,s)}(this,n)}Bn(e){const n=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}qn(e){let n=0;return this.Ln(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(r,s)=>n(s))}addReference(e,n,r){return Ih(e,r)}removeReference(e,n,r){return Ih(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ih(e,n)}Gn(e,n){return function(r,s){let i=!1;return lP(r).tt(o=>cP(r,o,s).next(a=>(a&&(i=!0),T.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Kn(e,(o,a)=>{if(a<=n){const c=this.Gn(e,o).next(l=>{if(!l)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ie.min()),Vs(e).delete([0,In(o.path)])))});s.push(c)}}).next(()=>T.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ih(e,n)}Kn(e,n){const r=Vs(e);let s,i=On.at;return r.Z({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(i!==On.at&&n(new H(Fr(s)),i),i=l,s=c):i=On.at}).next(()=>{i!==On.at&&n(new H(Fr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ih(t,e){return Vs(t).put(function(n,r){return{targetId:0,path:In(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.changes=new Ii(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,We.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?T.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return xi(e).put(r)}removeEntry(e,n,r){return xi(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Hd(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Qn(e,r)))}getEntry(e,n){let r=We.newInvalidDocument(n);return xi(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Uc(n))},(s,i)=>{r=this.jn(n,i)}).next(()=>r)}Wn(e,n){let r={size:0,document:We.newInvalidDocument(n)};return xi(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Uc(n))},(s,i)=>{r={document:this.jn(n,i),size:Kd(i)}}).next(()=>r)}getEntries(e,n){let r=Mn();return this.zn(e,n,(s,i)=>{const o=this.jn(s,i);r=r.insert(s,o)}).next(()=>r)}Hn(e,n){let r=Mn(),s=new lt(H.comparator);return this.zn(e,n,(i,o)=>{const a=this.jn(i,o);r=r.insert(i,a),s=s.insert(i,Kd(o))}).next(()=>({documents:r,Jn:s}))}zn(e,n,r){if(n.isEmpty())return T.resolve();let s=new Fe(YT);n.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(Uc(s.first()),Uc(s.last())),o=s.getIterator();let a=o.getNext();return xi(e).Z({index:"documentKeyIndex",range:i},(c,l,u)=>{const h=H.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&YT(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?u.j(Uc(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const s=[n.popLast().toArray(),n.lastSegment(),Hd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],i=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xi(e).W(IDBKeyRange.bound(s,i,!0)).next(o=>{let a=Mn();for(const c of o){const l=this.jn(H.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);a=a.insert(l.key,l)}return a})}getAllFromCollectionGroup(e,n,r,s){let i=Mn();const o=QT(n,r),a=QT(n,Xn.max());return xi(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{const h=this.jn(H.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);i=i.insert(h.key,h),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new DQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return GT(e).get("remoteDocumentGlobalKey").next(n=>(ae(!!n),n))}Qn(e,n){return GT(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const r=yQ(this.It,n);if(!(r.isNoDocument()&&r.version.isEqual(ie.min())))return r}return We.newInvalidDocument(e)}}function hP(t){return new PQ(t)}class DQ extends uP{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new Ii(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Fe((i,o)=>pe(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Xn.get(i);if(n.push(this.Yn.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=LT(this.Yn.It,o);s=s.add(i.path.popLast()),r+=Kd(c)-a.size,n.push(this.Yn.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=LT(this.Yn.It,o.convertToNoDocument(ie.min()));n.push(this.Yn.addEntry(e,i,c))}}),s.forEach(i=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Yn.updateMetadata(e,r)),T.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(r=>(this.Xn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:r,Jn:s})=>(s.forEach((i,o)=>{this.Xn.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function GT(t){return Vt(t,"remoteDocumentGlobal")}function xi(t){return Vt(t,"remoteDocumentsV14")}function Uc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QT(t,e){const n=e.documentKey.path.toArray();return[t,Hd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function YT(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=pe(n[i],r[i]),s)return s;return s=pe(n.length,r.length),s||(s=pe(n[n.length-2],r[r.length-2]),s||pe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.getBaseDocument(e,n,r))).next(s=>(r!==null&&fl(r.mutation,s,Wn.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=Lr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Gc();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Mn();const o=pl(),a=pl();return n.forEach((c,l)=>{const u=r.get(l.key);s.has(l.key)&&(u===void 0||u.mutation instanceof Cs)?i=i.insert(l.key,l):u!==void 0&&(o.set(l.key,u.mutation.getFieldMask()),fl(u.mutation,l,u.mutation.getFieldMask(),et.now()))}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new OQ(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=pl();let s=new lt((o,a)=>o-a),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||Wn.empty();u=a.applyToLocalView(l,u),r.set(c,u);const h=(s.get(a.batchId)||ge()).add(c);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=jN();u.forEach(d=>{if(!i.has(d)){const f=LN(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return T.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):T.resolve(Lr());let a=-1,c=i;return o.next(l=>T.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?T.resolve():this.getBaseDocument(e,u,h).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,c,l,ge())).next(u=>({batchId:a,changes:VN(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let s=Gc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Gc();return this.indexManager.getCollectionParents(e,s).next(o=>T.forEach(o,a=>{const c=function(l,u){return new Ss(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r).next(l=>{l.forEach((u,h)=>{i=i.insert(u,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(i=>{i.forEach((a,c)=>{const l=c.getKey();s.get(l)===null&&(s=s.insert(l,We.newInvalidDocument(l)))});let o=Gc();return s.forEach((a,c)=>{const l=i.get(a);l!==void 0&&fl(l.mutation,c,Wn.empty(),et.now()),iw(n,c)&&(o=o.insert(a,c))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):T.resolve(We.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MQ{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return T.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:Ot(r.createTime)}),T.resolve()}getNamedQuery(e,n){return T.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(r){return{name:r.name,query:hw(r.bundledQuery),readTime:Ot(r.readTime)}}(n)),T.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(){this.overlays=new lt(H.comparator),this.es=new Map}getOverlay(e,n){return T.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Lr();return T.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ue(e,n,i)}),T.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.es.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(r)),T.resolve()}getOverlaysForCollection(e,n,r){const s=Lr(),i=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return T.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new lt((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=i.get(l.largestBatchId);u===null&&(u=Lr(),i=i.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=Lr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=s)););return T.resolve(a)}ue(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uw(n,r));let i=this.es.get(n);i===void 0&&(i=ge(),this.es.set(n,i)),this.es.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.ns=new Fe(At.ss),this.rs=new Fe(At.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new At(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new At(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new H(new Te([])),r=new At(n,e),s=new At(n,e+1),i=[];return this.rs.forEachInRange([r,s],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new H(new Te([])),r=new At(n,e),s=new At(n,e+1);let i=ge();return this.rs.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new At(e,0),r=this.ns.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return H.comparator(e.key,n.key)||pe(e._s,n._s)}static os(e,n){return pe(e._s,n._s)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Fe(At.ss)}checkEmpty(e){return T.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cw(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.gs=this.gs.add(new At(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,n){return T.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ps(r),i=s<0?0:s;return T.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),s=new At(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([r,s],o=>{const a=this.ys(o._s);i.push(a)}),T.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(pe);return n.forEach(s=>{const i=new At(s,0),o=new At(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{r=r.add(a._s)})}),T.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const o=new At(new H(i),0);let a=new Fe(pe);return this.gs.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c._s)),!0)},o),T.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const s=this.ys(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ae(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return T.forEach(n.mutations,s=>{const i=new At(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new At(n,0),s=this.gs.firstAfterOrEqual(r);return T.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,T.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{constructor(e){this.Es=e,this.docs=new lt(H.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return T.resolve(r?r.document.mutableCopy():We.newInvalidDocument(n))}getEntries(e,n){let r=Mn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():We.newInvalidDocument(s))}),T.resolve(r)}getAllFromCollection(e,n,r){let s=Mn();const i=new H(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:c}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||Zv(mN(c),r)<=0||(s=s.insert(c.key,c.mutableCopy()))}return T.resolve(s)}getAllFromCollectionGroup(e,n,r,s){Y()}As(e,n){return T.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new BQ(this)}getSize(e){return T.resolve(this.size)}}class BQ extends uP{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),T.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Q{constructor(e){this.persistence=e,this.Rs=new Ii(n=>bo(n),qu),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.bs=0,this.Ps=new fw,this.targetCount=0,this.vs=ko.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,s)=>n(s)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),T.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new ko(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,T.resolve()}updateTargetData(e,n){return this.Dn(n),T.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),T.waitFor(i).next(()=>s)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return T.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),T.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),T.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),T.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return T.resolve(r)}containsKey(e,n){return T.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new On(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new $Q(this),this.indexManager=new SQ,this.remoteDocumentCache=function(r){return new UQ(r)}(r=>this.referenceDelegate.xs(r)),this.It=new iP(n),this.Ns=new MQ(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new FQ(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);const s=new VQ(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(i=>this.referenceDelegate.Ms(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Os(e,n){return T.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class VQ extends yN{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Fs=new fw,this.$s=null}static Bs(e){return new Ap(e)}get Ls(){if(this.$s)return this.$s;throw Y()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),T.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),T.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),T.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ls.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Ms(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.Ls,r=>{const s=H.fromPath(r);return this.Us(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return T.or([()=>T.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Os(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(e){this.It=e}$(e,n,r,s){const i=new bp("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MT,{unique:!0}),a.createObjectStore("documentMutations")}(e),XT(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=T.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),XT(e)),o=o.next(()=>function(a){const c=a.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ie.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(a,c){return c.store("mutations").W().next(l=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MT,{unique:!0});const u=c.store("mutations"),h=l.map(d=>u.put(d));return T.waitFor(h)})}(e,i))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.qs(i))),r<6&&s>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(i)))),r<7&&s>=7&&(o=o.next(()=>this.Gs(i))),r<8&&s>=8&&(o=o.next(()=>this.Qs(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.js(i))),r<11&&s>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:fQ});c.createIndex("collectionPathOverlayIndex",pQ,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",gQ,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:nQ});c.createIndex("documentKeyIndex",rQ),c.createIndex("collectionGroupIndex",sQ)}(e)).next(()=>this.Ws(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.zs(e,i))),r<15&&s>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:lQ}).createIndex("sequenceNumberIndex",uQ,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:hQ}).createIndex("documentKeyIndex",dQ,{unique:!1})}(e))),o}Ks(e){let n=0;return e.store("remoteDocuments").Z((r,s)=>{n+=Kd(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(s=>T.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>T.forEach(a,c=>{ae(c.userId===i.userId);const l=Bi(this.It,c);return aP(e,i.userId,l).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.Z((o,a)=>{const c=new Te(o),l=function(u){return[0,In(u)]}(c);i.push(n.get(l).next(u=>u?T.resolve():(h=>n.put({targetId:0,path:In(h),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>T.waitFor(i))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:cQ});const r=n.store("collectionParents"),s=new dw,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:In(c)})}};return n.store("remoteDocuments").Z({X:!0},(o,a)=>{const c=new Te(o);return i(c.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([o,a,c],l)=>{const u=Fr(a);return i(u.popLast())}))}js(e){const n=e.store("targets");return n.Z((r,s)=>{const i=Qc(s),o=oP(this.It,i);return n.put(o)})}Ws(e,n){const r=n.store("remoteDocuments"),s=[];return r.Z((i,o)=>{const a=n.store("remoteDocumentsV14"),c=(l=o,l.document?new H(Te.fromString(l.document.name).popFirst(5)):l.noDocument?H.fromSegments(l.noDocument.path):l.unknownDocument?H.fromSegments(l.unknownDocument.path):Y()).path.toArray();var l;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>T.waitFor(s))}zs(e,n){const r=n.store("mutations"),s=hP(this.It),i=new fP(Ap.Bs,this.It.re);return r.W().next(o=>{const a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:ge();Bi(this.It,c).keys().forEach(h=>u=u.add(h)),a.set(c.userId,u)}),T.forEach(a,(c,l)=>{const u=new Nt(l),h=Cp.oe(this.It,u),d=i.getIndexManager(u),f=kp.oe(u,this.It,d,i.referenceDelegate);return new dP(s,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new k_(n,On.at),c).next()})})}}function XT(t){t.createObjectStore("targetDocuments",{keyPath:oQ}).createIndex("documentTargetsIndex",aQ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iQ,{unique:!0}),t.createObjectStore("targetGlobal")}const Lg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pw{constructor(e,n,r,s,i,o,a,c,l,u,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Hs=i,this.window=o,this.document=a,this.Js=l,this.Ys=u,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=d=>Promise.resolve(),!pw.C())throw new D(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NQ(this,s),this.ii=n+"main",this.It=new iP(c),this.ri=new mr(this.ii,this.Xs,new jQ(this.It)),this.Cs=new kQ(this.referenceDelegate,this.It),this.remoteDocumentCache=hP(this.It),this.Ns=new vQ,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,u===!1&&ft("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new D(C.FAILED_PRECONDITION,Lg);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new On(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){return this.si=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(async()=>{this.started&&await this.ui()}))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Th(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(bi(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Bc(e).get("owner").next(n=>T.resolve(this.mi(n)))}gi(e){return Th(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Vt(n,"clientMetadata");return r.W().next(s=>{const i=this.Ii(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return T.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.oi)for(const n of e)this.oi.removeItem(this.Ti(n.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?T.resolve(!0):Bc(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new D(C.FAILED_PRECONDITION,Lg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Th(e).W().next(r=>this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&F("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new k_(e,On.at);return this._i(n).next(()=>this.gi(n))}),this.ri.close(),this.Pi()}Ii(e,n){return e.filter(r=>this.pi(r.updateTimeMs,n)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Th(e).W().next(n=>this.Ii(n,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return kp.oe(e,this.It,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new CQ(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Cp.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,n,r){F("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(o=this.Xs)===15?_Q:o===14?sP:o===13?rP:o===12?mQ:o===11?nP:void Y();var o;let a;return this.ri.runTransaction(e,s,i,c=>(a=new k_(c,this.Ss?this.Ss.next():On.at),n==="readwrite-primary"?this.fi(a).next(l=>!!l||this.di(a)).next(l=>{if(!l)throw ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new D(C.FAILED_PRECONDITION,_N);return r(a)}).next(l=>this.wi(a).next(()=>l)):this.Vi(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Vi(e){return Bc(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new D(C.FAILED_PRECONDITION,Lg)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bc(e).put("owner",n)}static C(){return mr.C()}_i(e){const n=Bc(e);return n.get("owner").next(r=>this.mi(r)?(F("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):T.resolve())}pi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ft(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ci(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground=this.document.visibilityState==="visible")}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Zs=()=>{this.Ai(),hB()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const r=((n=this.oi)===null||n===void 0?void 0:n.getItem(this.Ti(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ft("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ft("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bc(t){return Vt(t,"owner")}function Th(t){return Vt(t,"clientMetadata")}function gw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=s}static Ci(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new mw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.ki(e,n).next(i=>i||this.Mi(e,n,s,r)).next(i=>i||this.Oi(e,n))}ki(e,n){if(ST(n))return T.resolve(null);let r=Un(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=qd(n,null,"F"),r=Un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.Fi(n,a);return this.$i(n,l,o,c.readTime)?this.ki(e,qd(n,null,"F")):this.Bi(e,l,n,c)}))})))}Mi(e,n,r,s){return ST(n)||s.isEqual(ie.min())?this.Oi(e,n):this.Ni.getDocuments(e,r).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,r,s)?this.Oi(e,n):(w_()<=_e.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),T_(n)),this.Bi(e,o,n,gN(s,-1)))})}Fi(e,n){let r=new Fe(AN(e));return n.forEach((s,i)=>{iw(e,i)&&(r=r.add(i))}),r}$i(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Oi(e,n){return w_()<=_e.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",T_(n)),this.Ni.getDocumentsMatchingQuery(e,n,Xn.min())}Bi(e,n,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(e,n,r,s){this.persistence=e,this.Li=n,this.It=s,this.Ui=new lt(pe),this.qi=new Ii(i=>bo(i),qu),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dP(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function gP(t,e,n,r){return new qQ(t,e,n,r)}async function mP(t,e){const n=z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=ge();for(const l of s){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({ji:l,removedBatchIds:o,addedBatchIds:a}))})})}function HQ(t,e){const n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){const u=c.batch,h=u.keys();let d=T.resolve();return h.forEach(f=>{d=d.next(()=>l.getEntry(a,f)).next(p=>{const _=c.docVersions.get(f);ae(_!==null),p.version.compareTo(_)<0&&(u.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),l.addEntry(p)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ge();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function _P(t){const e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function KQ(t,e){const n=z(t),r=e.snapshotVersion;let s=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});s=n.Ui;const a=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Cs.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(i,u.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?f=f.withResumeToken(Tt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),s=s.insert(h,f),function(p,_,v){return p.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,f,u)&&a.push(n.Cs.updateTargetData(i,f))});let c=Mn(),l=ge();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(yP(i,o,e.documentUpdates).next(u=>{c=u.Wi,l=u.zi})),!r.isEqual(ie.min())){const u=n.Cs.getLastRemoteSnapshotVersion(i).next(h=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return T.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.Ui=s,i))}function yP(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Mn();return n.forEach((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Wi:o,zi:s}})}function WQ(t,e){const n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ha(t,e){const n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Cs.getTargetData(r,e).next(i=>i?(s=i,T.resolve(s)):n.Cs.allocateTargetId(r).next(o=>(s=new Js(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ui.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(r.targetId,r),n.qi.set(e,r.targetId)),r})}async function Ka(t,e,n){const r=z(t),s=r.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!bi(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}function Wd(t,e,n){const r=z(t);let s=ie.min(),i=ge();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){const u=z(a),h=u.qi.get(l);return h!==void 0?T.resolve(u.Ui.get(h)):u.Cs.getTargetData(c,l)}(r,o,Un(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?i:ge())).next(a=>(EP(r,kN(e),a),{documents:a,Hi:i})))}function vP(t,e){const n=z(t),r=z(n.Cs),s=n.Ui.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.se(i,e).next(o=>o?o.target:null))}function wP(t,e){const n=z(t),r=n.Ki.get(e)||ie.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Gi.getAllFromCollectionGroup(s,e,gN(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(EP(n,e,s),s))}function EP(t,e,n){let r=ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ki.set(e,r)}async function zQ(t,e,n,r){const s=z(t);let i=ge(),o=Mn();for(const l of n){const u=e.Ji(l.metadata.name);l.document&&(i=i.add(u));const h=e.Yi(l);h.setReadTime(e.Xi(l.metadata.readTime)),o=o.insert(u,h)}const a=s.Gi.newChangeBuffer({trackRemovals:!0}),c=await Ha(s,function(l){return Un(gc(Te.fromString(`__bundle__/docs/${l}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",l=>yP(l,a,o).next(u=>(a.apply(l),u)).next(u=>s.Cs.removeMatchingKeysForTargetId(l,c.targetId).next(()=>s.Cs.addMatchingKeys(l,i,c.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(l,u.Wi,u.zi)).next(()=>u.Wi)))}async function GQ(t,e,n=ge()){const r=await Ha(t,Un(hw(e.bundledQuery))),s=z(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=Ot(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ns.saveNamedQuery(i,e);const a=r.withResumeToken(Tt.EMPTY_BYTE_STRING,o);return s.Ui=s.Ui.insert(a.targetId,a),s.Cs.updateTargetData(i,a).next(()=>s.Cs.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Cs.addMatchingKeys(i,n,r.targetId)).next(()=>s.Ns.saveNamedQuery(i,e))})}function JT(t,e){return`firestore_clients_${t}_${e}`}function ZT(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fg(t,e){return`firestore_targets_${t}_${e}`}class zd{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Zi(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new D(s.error.code,s.error.message))),o?new zd(e,n,s.state,i):(ft("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Zi(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new D(r.error.code,r.error.message))),i?new gl(e,r.state,s):(ft("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Sp();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=EN(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Gd(e,i):(ft("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class _w{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new _w(n.clientId,n.onlineState):(ft("SharedClientState",`Failed to parse online state: ${e}`),null)}}class A_{constructor(){this.activeTargetIds=Sp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ug{constructor(e,n,r,s,i){this.window=e,this.Hs=n,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new lt(pe),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ar=JT(this.persistenceKey,this.sr),this.hr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new A_),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.vi();for(const r of e){if(r===this.sr)continue;const s=this.getItem(JT(this.persistenceKey,r));if(s){const i=Gd.Zi(r,s);i&&(this.ur=this.ur.insert(i.clientId,i))}}this.gr();const n=this.storage.getItem(this.wr);if(n){const r=this.yr(n);r&&this.pr(r)}for(const r of this.cr)this.rr(r);this.cr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,r){this.Tr(e,n,r),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Fg(this.persistenceKey,e));if(r){const s=gl.Zi(e,r);s&&(n=s.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Rr(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return F("SharedClientState","READ",e,n),n}setItem(e,n){F("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){const n=e;if(n.storageArea===this.storage){if(F("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void ft("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.lr.test(n.key)){if(n.newValue==null){const r=this.vr(n.key);return this.Vr(r,null)}{const r=this.Sr(n.key,n.newValue);if(r)return this.Vr(r.clientId,r)}}else if(this.dr.test(n.key)){if(n.newValue!==null){const r=this.Dr(n.key,n.newValue);if(r)return this.Cr(r)}}else if(this._r.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(n.key===this.wr){if(n.newValue!==null){const r=this.yr(n.newValue);if(r)return this.pr(r)}}else if(n.key===this.hr){const r=function(s){let i=On.at;if(s!=null)try{const o=JSON.parse(s);ae(typeof o=="number"),i=o}catch(o){ft("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==On.at&&this.sequenceNumberHandler(r)}else if(n.key===this.mr){const r=this.Mr(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Or(s)))}}}else this.cr.push(n)})}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,r){const s=new zd(this.currentUser,e,n,r),i=ZT(this.persistenceKey,this.currentUser,e);this.setItem(i,s.tr())}Er(e){const n=ZT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){const n={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(n))}Rr(e,n,r){const s=Fg(this.persistenceKey,e),i=new gl(e,n,r);this.setItem(s,i.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const r=this.vr(e);return Gd.Zi(r,n)}Dr(e,n){const r=this.dr.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return zd.Zi(new Nt(i),s,n)}Nr(e,n){const r=this._r.exec(e),s=Number(r[1]);return gl.Zi(s,n)}yr(e){return _w.Zi(e)}Mr(e){return JSON.parse(e)}async Cr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Fr(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const r=n?this.ur.insert(e,n):this.ur.remove(e),s=this.Ir(this.ur),i=this.Ir(r),o=[],a=[];return i.forEach(c=>{s.has(c)||o.push(c)}),s.forEach(c=>{i.has(c)||a.push(c)}),this.syncEngine.Br(o,a).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=Sp();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class bP{constructor(){this.Lr=new A_,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,r){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new A_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,r,s,i){const o=this.ao(e,n);F("RestConnection","Sending: ",o,r);const a={};return this.ho(a,s,i),this.lo(e,o,a,r).then(c=>(F("RestConnection","Received: ",c),c),c=>{throw Ba("RestConnection",`${e} failed with error: `,c,"url: ",o,"request:",r),c})}fo(e,n,r,s,i,o){return this.co(e,n,r,s,i)}ho(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+pc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}ao(e,n){const r=YQ[e];return`${this.oo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,n,r,s){return new Promise((i,o)=>{const a=new Y4;a.listenOnce(z4.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Og.NO_ERROR:const l=a.getResponseJson();F("Connection","XHR received:",JSON.stringify(l)),i(l);break;case Og.TIMEOUT:F("Connection",'RPC "'+e+'" timed out'),o(new D(C.DEADLINE_EXCEEDED,"Request time out"));break;case Og.HTTP_ERROR:const u=a.getStatus();if(F("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(p)>=0?p:C.UNKNOWN}(h.status);o(new D(d,h.message))}else o(new D(C.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new D(C.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{F("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(s);a.send(n,"POST",c,r,15)})}_o(e,n,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=K4(),o=W4(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Q4({})),this.ho(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const c=s.join("");F("Connection","Creating WebChannel: "+c,a);const l=i.createWebChannel(c,a);let u=!1,h=!1;const d=new XQ({Hr:p=>{h?F("Connection","Not sending because WebChannel is closed:",p):(u||(F("Connection","Opening WebChannel transport."),l.open(),u=!0),F("Connection","WebChannel sending:",p),l.send(p))},Jr:()=>l.close()}),f=(p,_,v)=>{p.listen(_,y=>{try{v(y)}catch(g){setTimeout(()=>{throw g},0)}})};return f(l,vh.EventType.OPEN,()=>{h||F("Connection","WebChannel transport opened.")}),f(l,vh.EventType.CLOSE,()=>{h||(h=!0,F("Connection","WebChannel transport closed"),d.io())}),f(l,vh.EventType.ERROR,p=>{h||(h=!0,Ba("Connection","WebChannel transport errored:",p),d.io(new D(C.UNAVAILABLE,"The operation could not be completed")))}),f(l,vh.EventType.MESSAGE,p=>{var _;if(!h){const v=p.data[0];ae(!!v);const y=v,g=y.error||((_=y[0])===null||_===void 0?void 0:_.error);if(g){F("Connection","WebChannel received error:",g);const w=g.status;let I=function(x){const $=gt[x];if($!==void 0)return BN($)}(w),k=g.message;I===void 0&&(I=C.INTERNAL,k="Unknown error status: "+w+" with message "+g.message),h=!0,d.io(new D(I,k)),l.close()}else F("Connection","WebChannel received:",v),d.ro(v)}}),f(o,G4.STAT_EVENT,p=>{p.stat===uT.PROXY?F("Connection","Detected buffering proxy"):p.stat===uT.NOPROXY&&F("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.so()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(){return typeof window<"u"?window:null}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){return new q3(t,!0)}class yw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Hs=e,this.timerId=n,this.wo=r,this.mo=s,this.yo=i,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,n-r);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){this.Io!==null&&(this.Io.skipDelay(),this.Io=null)}cancel(){this.Io!==null&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,s,i,o,a,c){this.Hs=e,this.Po=r,this.vo=s,this.Vo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new yw(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Mo()}async stop(){this.No()&&await this.close(0)}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===C.RESOURCE_EXHAUSTED?(ft(n.toString()),ft("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):n&&n.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===n&&this.Go(r,s)},r=>{e(()=>{const s=new D(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Mo(){this.state=5,this.xo.Ao(async()=>{this.state=0,this.start()})}Qo(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZQ extends TP{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.It=i}jo(e,n){return this.Vo._o("Listen",e,n)}onMessage(e){this.xo.reset();const n=W3(this.It,e),r=function(s){if(!("targetChange"in s))return ie.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?ie.min():i.readTime?Ot(i.readTime):ie.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=iu(this.It),n.addTarget=function(s,i){let o;const a=i.target;return o=Vd(a)?{documents:YN(s,a)}:{query:XN(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=KN(s,i.resumeToken):i.snapshotVersion.compareTo(ie.min())>0&&(o.readTime=ru(s,i.snapshotVersion.toTimestamp())),o}(this.It,e);const r=G3(this.It,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=iu(this.It),n.removeTarget=e,this.Bo(n)}}class eY extends TP{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.Vo._o("Write",e,n)}onMessage(e){if(ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=z3(e.writeResults,e.commitTime),r=Ot(e.commitTime);return this.listener.Zo(r,n)}return ae(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=iu(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ou(this.It,r))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.Vo=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new D(C.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.Vo.co(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(C.UNKNOWN,s.toString())})}fo(e,n,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.Vo.fo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new D(C.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class nY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ft(n),this.ou=!1):F("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{r.enqueueAndForget(async()=>{Ti(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=z(a);c._u.add(4),await yc(c),c.gu.set("Unknown"),c._u.delete(4),await Qu(c)}(this))})}),this.gu=new nY(r,s)}}async function Qu(t){if(Ti(t))for(const e of t.wu)await e(!0)}async function yc(t){for(const e of t.wu)await e(!1)}function Rp(t,e){const n=z(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Ew(n)?ww(n):wc(n).ko()&&vw(n,e))}function au(t,e){const n=z(t),r=wc(n);n.du.delete(e),r.ko()&&SP(n,e),n.du.size===0&&(r.ko()?r.Fo():Ti(n)&&n.gu.set("Unknown"))}function vw(t,e){t.yu.Ot(e.targetId),wc(t).zo(e)}function SP(t,e){t.yu.Ot(e),wc(t).Ho(e)}function ww(t){t.yu=new $3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),wc(t).start(),t.gu.uu()}function Ew(t){return Ti(t)&&!wc(t).No()&&t.du.size>0}function Ti(t){return z(t)._u.size===0}function CP(t){t.yu=void 0}async function sY(t){t.du.forEach((e,n)=>{vw(t,e)})}async function iY(t,e){CP(t),Ew(t)?(t.gu.hu(e),ww(t)):t.gu.set("Unknown")}async function oY(t,e,n){if(t.gu.set("Online"),e instanceof HN&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.du.delete(o),r.yu.removeTarget(o))}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qd(t,r)}else if(e instanceof Vh?t.yu.Gt(e):e instanceof qN?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(ie.min()))try{const r=await _P(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.yu.te(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const l=s.du.get(c);l&&s.du.set(c,l.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const c=s.du.get(a);if(!c)return;s.du.set(a,c.withResumeToken(Tt.EMPTY_BYTE_STRING,c.snapshotVersion)),SP(s,a);const l=new Js(c.target,a,1,c.sequenceNumber);vw(s,l)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){F("RemoteStore","Failed to raise snapshot:",r),await Qd(t,r)}}async function Qd(t,e,n){if(!bi(e))throw e;t._u.add(1),await yc(t),t.gu.set("Offline"),n||(n=()=>_P(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await Qu(t)})}function kP(t,e){return e().catch(n=>Qd(t,n,e))}async function vc(t){const e=z(t),n=fi(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;aY(e);)try{const s=await WQ(e.localStore,r);if(s===null){e.fu.length===0&&n.Fo();break}r=s.batchId,cY(e,s)}catch(s){await Qd(e,s)}AP(e)&&RP(e)}function aY(t){return Ti(t)&&t.fu.length<10}function cY(t,e){t.fu.push(e);const n=fi(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function AP(t){return Ti(t)&&!fi(t).No()&&t.fu.length>0}function RP(t){fi(t).start()}async function lY(t){fi(t).eu()}async function uY(t){const e=fi(t);for(const n of t.fu)e.Xo(n.mutations)}async function hY(t,e,n){const r=t.fu.shift(),s=lw.from(r,e,n);await kP(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await vc(t)}async function dY(t,e){e&&fi(t).Yo&&await async function(n,r){if(s=r.code,UN(s)&&s!==C.ABORTED){const i=n.fu.shift();fi(n).Oo(),await kP(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await vc(n)}var s}(t,e),AP(t)&&RP(t)}async function tS(t,e){const n=z(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const r=Ti(n);n._u.add(3),await yc(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await Qu(n)}async function R_(t,e){const n=z(t);e?(n._u.delete(2),await Qu(n)):e||(n._u.add(2),await yc(n),n.gu.set("Unknown"))}function wc(t){return t.pu||(t.pu=function(e,n,r){const s=z(e);return s.su(),new ZQ(n,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(t.datastore,t.asyncQueue,{Yr:sY.bind(null,t),Zr:iY.bind(null,t),Wo:oY.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Oo(),Ew(t)?ww(t):t.gu.set("Unknown")):(await t.pu.stop(),CP(t))})),t.pu}function fi(t){return t.Iu||(t.Iu=function(e,n,r){const s=z(e);return s.su(),new eY(n,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(t.datastore,t.asyncQueue,{Yr:lY.bind(null,t),Zr:dY.bind(null,t),tu:uY.bind(null,t),Zo:hY.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Oo(),await vc(t)):(await t.Iu.stop(),t.fu.length>0&&(F("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Dt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new bw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new D(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ec(t,e){if(ft("AsyncQueue",`${e}: ${t}`),bi(t))return new D(C.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Gc(),this.sortedSet=new lt(this.comparator)}static emptySet(e){return new va(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new va;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.Tu=new lt(H.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(n):e.type===1&&r.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):Y():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wa{constructor(e,n,r,s,i,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,n,r,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new Wa(e,n,va.emptySet(n),i,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(){this.Au=void 0,this.listeners=[]}}class pY{constructor(){this.queries=new Ii(e=>CN(e),Hu),this.onlineState="Unknown",this.Ru=new Set}}async function Iw(t,e){const n=z(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new fY),s)try{i.Au=await n.onListen(r)}catch(o){const a=Ec(o,`Initialization of query '${T_(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&Sw(n)}async function Tw(t,e){const n=z(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function gY(t,e){const n=z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(s)&&(r=!0);o.Au=s}}r&&Sw(n)}function mY(t,e,n){const r=z(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Sw(t){t.Ru.forEach(e=>{e.next()})}class Cw{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{constructor(e,n){this.payload=e,this.byteLength=n}ku(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.It=e}Ji(e){return Br(this.It,e)}Yi(e){return e.metadata.exists?QN(this.It,e.document,!1):We.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ot(e)}}class yY{constructor(e,n,r){this.Mu=e,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xP(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const r=Te.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Fu(e){const n=new Map,r=new rS(this.It);for(const s of e)if(s.metadata.queries){const i=r.Ji(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||ge()).add(i);n.set(o,a)}}return n}async complete(){const e=await zQ(this.localStore,new rS(this.It),this.documents,this.Mu.id),n=this.Fu(this.documents);for(const r of this.queries)await GQ(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,$u:this.collectionGroups,Bu:e}}}function xP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.key=e}}class PP{constructor(e){this.key=e}}class DP{constructor(e,n){this.query=e,this.Lu=n,this.Uu=null,this.current=!1,this.qu=ge(),this.mutatedKeys=ge(),this.Ku=AN(e),this.Gu=new va(this.Ku)}get Qu(){return this.Lu}ju(e,n){const r=n?n.Wu:new nS,s=n?n.Gu:this.Gu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),f=iw(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;d&&f?d.data.isEqual(f.data)?p!==_&&(r.track({type:3,doc:f}),v=!0):this.zu(d,f)||(r.track({type:2,doc:f}),v=!0,(c&&this.Ku(f,c)>0||l&&this.Ku(f,l)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),v=!0):d&&!f&&(r.track({type:1,doc:d}),v=!0,(c||l)&&(a=!0)),v&&(f?(o=o.add(f),i=_?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Gu:o,Wu:r,$i:a,mutatedKeys:i}}zu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const i=e.Wu.Eu();i.sort((l,u)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return f(h)-f(d)}(l.type,u.type)||this.Ku(l.doc,u.doc)),this.Hu(r);const o=n?this.Ju():[],a=this.qu.size===0&&this.current?1:0,c=a!==this.Uu;return this.Uu=a,i.length!==0||c?{snapshot:new Wa(this.query,e.Gu,s,i,e.mutatedKeys,a===0,c,!1),Yu:o}:{Yu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new nS,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(n=>this.Lu=this.Lu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Lu=this.Lu.delete(n)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=ge(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const n=[];return e.forEach(r=>{this.qu.has(r)||n.push(new PP(r))}),this.qu.forEach(r=>{e.has(r)||n.push(new NP(r))}),n}Zu(e){this.Lu=e.Hi,this.qu=ge();const n=this.ju(e.documents);return this.applyChanges(n,!0)}tc(){return Wa.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,this.Uu===0)}}class vY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wY{constructor(e){this.key=e,this.ec=!1}}class EY{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new Ii(a=>CN(a),Hu),this.ic=new Map,this.rc=new Set,this.oc=new lt(H.comparator),this.uc=new Map,this.cc=new fw,this.ac={},this.hc=new Map,this.lc=ko.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return this.fc===!0}}async function bY(t,e){const n=Nw(t);let r,s;const i=n.sc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.tc();else{const o=await Ha(n.localStore,Un(e));n.isPrimaryClient&&Rp(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await kw(n,e,r,a==="current")}return s}async function kw(t,e,n,r){t.dc=(u,h,d)=>async function(f,p,_,v){let y=p.view.ju(_);y.$i&&(y=await Wd(f.localStore,p.query,!1).then(({documents:I})=>p.view.ju(I,y)));const g=v&&v.targetChanges.get(p.targetId),w=p.view.applyChanges(y,f.isPrimaryClient,g);return x_(f,p.targetId,w.Yu),w.snapshot}(t,u,h,d);const s=await Wd(t.localStore,e,!0),i=new DP(e,s.Hi),o=i.ju(s.documents),a=zu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),c=i.applyChanges(o,t.isPrimaryClient,a);x_(t,n,c.Yu);const l=new vY(e,n,i);return t.sc.set(e,l),t.ic.has(n)?t.ic.get(n).push(e):t.ic.set(n,[e]),c.snapshot}async function IY(t,e){const n=z(t),r=n.sc.get(e),s=n.ic.get(r.targetId);if(s.length>1)return n.ic.set(r.targetId,s.filter(i=>!Hu(i,e))),void n.sc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ka(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),au(n.remoteStore,r.targetId),za(n,r.targetId)}).catch(Ei)):(za(n,r.targetId),await Ka(n.localStore,r.targetId,!0))}async function TY(t,e,n){const r=Pw(t);try{const s=await function(i,o){const a=z(i),c=et.now(),l=o.reduce((d,f)=>d.add(f.key),ge());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=Mn(),p=ge();return a.Gi.getEntries(d,l).next(_=>{f=_,f.forEach((v,y)=>{y.isValidDocument()||(p=p.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(_=>{u=_;const v=[];for(const y of o){const g=O3(y,u.get(y.key).overlayedDocument);g!=null&&v.push(new Cs(y.key,g,IN(g.value.mapValue),Ze.exists(!0)))}return a.mutationQueue.addMutationBatch(d,c,v,o)}).next(_=>{h=_;const v=_.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(d,_.batchId,v)})}).then(()=>({batchId:h.batchId,changes:VN(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let c=i.ac[i.currentUser.toKey()];c||(c=new lt(pe)),c=c.insert(o,a),i.ac[i.currentUser.toKey()]=c}(r,s.batchId,n),await ks(r,s.changes),await vc(r.remoteStore)}catch(s){const i=Ec(s,"Failed to persist write");n.reject(i)}}async function OP(t,e){const n=z(t);try{const r=await KQ(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.uc.get(i);o&&(ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ec=!0:s.modifiedDocuments.size>0?ae(o.ec):s.removedDocuments.size>0&&(ae(o.ec),o.ec=!1))}),await ks(n,r,e)}catch(r){await Ei(r)}}function sS(t,e,n){const r=z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.sc.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=z(i);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(const h of u.listeners)h.bu(o)&&(c=!0)}),c&&Sw(a)}(r.eventManager,e),s.length&&r.nc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SY(t,e,n){const r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.uc.get(e),i=s&&s.key;if(i){let o=new lt(H.comparator);o=o.insert(i,We.newNoDocument(i,ie.min()));const a=ge().add(i),c=new Wu(ie.min(),new Map,new Fe(pe),o,a);await OP(r,c),r.oc=r.oc.remove(i),r.uc.delete(e),xw(r)}else await Ka(r.localStore,e,!1).then(()=>za(r,e,n)).catch(Ei)}async function CY(t,e){const n=z(t),r=e.batch.batchId;try{const s=await HQ(n.localStore,e);Rw(n,r,null),Aw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ks(n,s)}catch(s){await Ei(s)}}async function kY(t,e,n){const r=z(t);try{const s=await function(i,o){const a=z(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a.mutationQueue.lookupMutationBatch(c,o).next(u=>(ae(u!==null),l=u.keys(),a.mutationQueue.removeMutationBatch(c,u))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>a.localDocuments.getDocuments(c,l))})}(r.localStore,e);Rw(r,e,n),Aw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ks(r,s)}catch(s){await Ei(s)}}async function AY(t,e){const n=z(t);Ti(n.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=z(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const s=n.hc.get(r)||[];s.push(e),n.hc.set(r,s)}catch(r){const s=Ec(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Aw(t,e){(t.hc.get(e)||[]).forEach(n=>{n.resolve()}),t.hc.delete(e)}function Rw(t,e,n){const r=z(t);let s=r.ac[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function za(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ic.get(e))t.sc.delete(r),n&&t.nc._c(r,n);t.ic.delete(e),t.isPrimaryClient&&t.cc.ls(e).forEach(r=>{t.cc.containsKey(r)||MP(t,r)})}function MP(t,e){t.rc.delete(e.path.canonicalString());const n=t.oc.get(e);n!==null&&(au(t.remoteStore,n),t.oc=t.oc.remove(e),t.uc.delete(n),xw(t))}function x_(t,e,n){for(const r of n)r instanceof NP?(t.cc.addReference(r.key,e),RY(t,r)):r instanceof PP?(F("SyncEngine","Document no longer in limbo: "+r.key),t.cc.removeReference(r.key,e),t.cc.containsKey(r.key)||MP(t,r.key)):Y()}function RY(t,e){const n=e.key,r=n.path.canonicalString();t.oc.get(n)||t.rc.has(r)||(F("SyncEngine","New document in limbo: "+n),t.rc.add(r),xw(t))}function xw(t){for(;t.rc.size>0&&t.oc.size<t.maxConcurrentLimboResolutions;){const e=t.rc.values().next().value;t.rc.delete(e);const n=new H(Te.fromString(e)),r=t.lc.next();t.uc.set(r,new wY(n)),t.oc=t.oc.insert(n,r),Rp(t.remoteStore,new Js(Un(gc(n.path)),r,2,On.at))}}async function ks(t,e,n){const r=z(t),s=[],i=[],o=[];r.sc.isEmpty()||(r.sc.forEach((a,c)=>{o.push(r.dc(c,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),s.push(l);const u=mw.Ci(c.targetId,l);i.push(u)}}))}),await Promise.all(o),r.nc.Wo(s),await async function(a,c){const l=z(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>T.forEach(c,h=>T.forEach(h.Si,d=>l.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>T.forEach(h.Di,d=>l.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!bi(u))throw u;F("LocalStore","Failed to update sequence numbers: "+u)}for(const u of c){const h=u.targetId;if(!u.fromCache){const d=l.Ui.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);l.Ui=l.Ui.insert(h,p)}}}(r.localStore,i))}async function xY(t,e){const n=z(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());const r=await mP(n.localStore,e);n.currentUser=e,function(s,i){s.hc.forEach(o=>{o.forEach(a=>{a.reject(new D(C.CANCELLED,i))})}),s.hc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ks(n,r.ji)}}function NY(t,e){const n=z(t),r=n.uc.get(e);if(r&&r.ec)return ge().add(r.key);{let s=ge();const i=n.ic.get(e);if(!i)return s;for(const o of i){const a=n.sc.get(o);s=s.unionWith(a.view.Qu)}return s}}async function PY(t,e){const n=z(t),r=await Wd(n.localStore,e.query,!0),s=e.view.Zu(r);return n.isPrimaryClient&&x_(n,e.targetId,s.Yu),s}async function DY(t,e){const n=z(t);return wP(n.localStore,e).then(r=>ks(n,r))}async function OY(t,e,n,r){const s=z(t),i=await function(o,a){const c=z(o),l=z(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",u=>l.Tn(u,a).next(h=>h?c.localDocuments.getDocuments(u,h):T.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await vc(s.remoteStore):n==="acknowledged"||n==="rejected"?(Rw(s,e,r||null),Aw(s,e),function(o,a){z(z(o).mutationQueue).An(a)}(s.localStore,e)):Y(),await ks(s,i)):F("SyncEngine","Cannot apply mutation batch with id: "+e)}async function MY(t,e){const n=z(t);if(Nw(n),Pw(n),e===!0&&n.fc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await iS(n,r.toArray());n.fc=!0,await R_(n.remoteStore,!0);for(const i of s)Rp(n.remoteStore,i)}else if(e===!1&&n.fc!==!1){const r=[];let s=Promise.resolve();n.ic.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(za(n,o),Ka(n.localStore,o,!0))),au(n.remoteStore,o)}),await s,await iS(n,r),function(i){const o=z(i);o.uc.forEach((a,c)=>{au(o.remoteStore,c)}),o.cc.fs(),o.uc=new Map,o.oc=new lt(H.comparator)}(n),n.fc=!1,await R_(n.remoteStore,!1)}}async function iS(t,e,n){const r=z(t),s=[],i=[];for(const o of e){let a;const c=r.ic.get(o);if(c&&c.length!==0){a=await Ha(r.localStore,Un(c[0]));for(const l of c){const u=r.sc.get(l),h=await PY(r,u);h.snapshot&&i.push(h.snapshot)}}else{const l=await vP(r.localStore,o);a=await Ha(r.localStore,l),await kw(r,LP(l),o,!1)}s.push(a)}return r.nc.Wo(i),s}function LP(t){return SN(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function LY(t){const e=z(t);return z(z(e.localStore).persistence).vi()}async function FY(t,e,n,r){const s=z(t);if(s.fc)return void F("SyncEngine","Ignoring unexpected query state notification.");const i=s.ic.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await wP(s.localStore,kN(i[0])),a=Wu.createSynthesizedRemoteEventForCurrentChange(e,n==="current");await ks(s,o,a);break}case"rejected":await Ka(s.localStore,e,!0),za(s,e,r);break;default:Y()}}async function UY(t,e,n){const r=Nw(t);if(r.fc){for(const s of e){if(r.ic.has(s)){F("SyncEngine","Adding an already active target "+s);continue}const i=await vP(r.localStore,s),o=await Ha(r.localStore,i);await kw(r,LP(i),o.targetId,!1),Rp(r.remoteStore,o)}for(const s of n)r.ic.has(s)&&await Ka(r.localStore,s,!1).then(()=>{au(r.remoteStore,s),za(r,s)}).catch(Ei)}}function Nw(t){const e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SY.bind(null,e),e.nc.Wo=gY.bind(null,e.eventManager),e.nc._c=mY.bind(null,e.eventManager),e}function Pw(t){const e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kY.bind(null,e),e}function BY(t,e,n){const r=z(t);(async function(s,i,o){try{const a=await i.getMetadata();if(await function(h,d){const f=z(h),p=Ot(d.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",_=>f.Ns.getBundleMetadata(_,d.id)).then(_=>!!_&&_.createTime.compareTo(p)>=0)}(s.localStore,a))return await i.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(xP(a));const c=new yY(a,s.localStore,i.It);let l=await i.wc();for(;l;){const h=await c.Ou(l);h&&o._updateProgress(h),l=await i.wc()}const u=await c.complete();return await ks(s,u.Bu,void 0),await function(h,d){const f=z(h);return f.persistence.runTransaction("Save bundle","readwrite",p=>f.Ns.saveBundleMetadata(p,d))}(s.localStore,a),o._completeWith(u.progress),Promise.resolve(u.$u)}catch(a){return Ba("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class FP{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.mc(e),this.persistence=this.gc(e),await this.persistence.start(),this.localStore=this.yc(e),this.gcScheduler=this.Ic(e,this.localStore),this.indexBackfillerScheduler=this.Tc(e,this.localStore)}Ic(e,n){return null}Tc(e,n){return null}yc(e){return gP(this.persistence,new pP,e.initialUser,this.It)}gc(e){return new fP(Ap.Bs,this.It)}mc(e){return new bP}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class UP extends FP{constructor(e,n,r){super(),this.Ec=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ec.initialize(this,e),await Pw(this.Ec.syncEngine),await vc(this.Ec.remoteStore),await this.persistence.li(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}yc(e){return gP(this.persistence,new pP,e.initialUser,this.It)}Ic(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new RQ(r,e.asyncQueue,n)}Tc(e,n){const r=new d3(n,this.persistence);return new h3(e.asyncQueue,r)}gc(e){const n=gw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new pw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,IP(),qh(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new bP}}class $Y extends UP{constructor(e,n){super(e,n,!1),this.Ec=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ec.syncEngine;this.sharedClientState instanceof Ug&&(this.sharedClientState.syncEngine={Fr:OY.bind(null,n),$r:FY.bind(null,n),Br:UY.bind(null,n),vi:LY.bind(null,n),Or:DY.bind(null,n)},await this.sharedClientState.start()),await this.persistence.li(async r=>{await MY(this.Ec.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}mc(e){const n=IP();if(!Ug.C(n))throw new D(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ug(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Dw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xY.bind(null,this.syncEngine),await R_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pY}createDatastore(e){const n=Gu(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new JQ(s));var s;return function(i,o,a,c){return new tY(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>sS(this.syncEngine,a,0),o=eS.C()?new eS:new QQ,new rY(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,c,l){const u=new EY(r,s,i,o,a,c);return l&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=z(e);F("RemoteStore","RemoteStore shutting down."),n._u.add(5),await yc(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):ft("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VY{constructor(e,n){this.bc=e,this.It=n,this.metadata=new Dt,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}async getMetadata(){return this.metadata.promise}async wc(){return await this.getMetadata(),this.vc()}async vc(){const e=await this.Vc();if(e===null)return null;const n=this.Pc.decode(e),r=Number(n);isNaN(r)&&this.Sc(`length string (${n}) is not valid number`);const s=await this.Dc(r);return new _Y(JSON.parse(s),e.length+r)}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Vc(){for(;this.Cc()<0&&!await this.xc(););if(this.buffer.length===0)return null;const e=this.Cc();e<0&&this.Sc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Dc(e){for(;this.buffer.length<e;)await this.xc()&&this.Sc("Reached the end of bundle when more is expected.");const n=this.Pc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}async xc(){const e=await this.bc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new D(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,s){const i=z(r),o=iu(i.It)+"/documents",a={documents:s.map(h=>su(i.It,h))},c=await i.fo("BatchGetDocuments",o,a,s.length),l=new Map;c.forEach(h=>{const d=K3(i.It,h);l.set(d.key.toString(),d)});const u=[];return s.forEach(h=>{const d=l.get(h.toString());ae(!!d),u.push(d)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _c(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=H.fromPath(r);this.mutations.push(new ow(s,this.precondition(s)))}),await async function(n,r){const s=z(n),i=iu(s.It)+"/documents",o={writes:r.map(a=>ou(s.It,a))};await s.co("Commit",i,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Y();n=ie.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new D(C.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ie.min())?Ze.exists(!1):Ze.updateTime(n):Ze.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ie.min()))throw new D(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ze.updateTime(n)}return Ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.Nc=r.maxAttempts,this.xo=new yw(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){this.xo.Ao(async()=>{const e=new jY(this.datastore),n=this.Mc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Oc(s)}))}).catch(r=>{this.Oc(r)})})}Mc(e){try{const n=this.updateFunction(e);return!ju(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||!UN(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HY{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=dN.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{F("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(F("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ec(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function BP(t,e){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await mP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function $P(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ow(t);F("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>tS(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>tS(e.remoteStore,i)),t.onlineComponents=e}async function Ow(t){return t.offlineComponents||(F("FirestoreClient","Using default OfflineComponentProvider"),await BP(t,new FP)),t.offlineComponents}async function Np(t){return t.onlineComponents||(F("FirestoreClient","Using default OnlineComponentProvider"),await $P(t,new Dw)),t.onlineComponents}function VP(t){return Ow(t).then(e=>e.persistence)}function Mw(t){return Ow(t).then(e=>e.localStore)}function jP(t){return Np(t).then(e=>e.remoteStore)}function Lw(t){return Np(t).then(e=>e.syncEngine)}async function Ga(t){const e=await Np(t),n=e.eventManager;return n.onListen=bY.bind(null,e.syncEngine),n.onUnlisten=IY.bind(null,e.syncEngine),n}function KY(t){return t.asyncQueue.enqueue(async()=>{const e=await VP(t),n=await jP(t);return e.setNetworkEnabled(!0),function(r){const s=z(r);return s._u.delete(0),Qu(s)}(n)})}function WY(t){return t.asyncQueue.enqueue(async()=>{const e=await VP(t),n=await jP(t);return e.setNetworkEnabled(!1),async function(r){const s=z(r);s._u.add(0),await yc(s),s.gu.set("Offline")}(n)})}function zY(t,e){const n=new Dt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,i){try{const o=await function(a,c){const l=z(a);return l.persistence.runTransaction("read document","readonly",u=>l.localDocuments.getDocument(u,c))}(r,s);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new D(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Ec(o,`Failed to get document '${s} from cache`);i.reject(a)}}(await Mw(t),e,n)),n.promise}function qP(t,e,n={}){const r=new Dt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const l=new xp({next:h=>{i.enqueueAndForget(()=>Tw(s,u));const d=h.docs.has(o);!d&&h.fromCache?c.reject(new D(C.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?c.reject(new D(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new Cw(gc(o.path),l,{includeMetadataChanges:!0,Nu:!0});return Iw(s,u)}(await Ga(t),t.asyncQueue,e,n,r)),r.promise}function GY(t,e){const n=new Dt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,i){try{const o=await Wd(r,s,!0),a=new DP(s,o.Hi),c=a.ju(o.documents),l=a.applyChanges(c,!1);i.resolve(l.snapshot)}catch(o){const a=Ec(o,`Failed to execute query '${s} against cache`);i.reject(a)}}(await Mw(t),e,n)),n.promise}function HP(t,e,n={}){const r=new Dt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const l=new xp({next:h=>{i.enqueueAndForget(()=>Tw(s,u)),h.fromCache&&a.source==="server"?c.reject(new D(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new Cw(o,l,{includeMetadataChanges:!0,Nu:!0});return Iw(s,u)}(await Ga(t),t.asyncQueue,e,n,r)),r.promise}function QY(t,e){const n=new xp(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){z(r).Ru.add(s),s.next()}(await Ga(t),n)),()=>{n.Rc(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){z(r).Ru.delete(s)}(await Ga(t),n))}}function YY(t,e,n){const r=new Dt;return t.asyncQueue.enqueueAndForget(async()=>{const s=await function(i){return Np(i).then(o=>o.datastore)}(t);new qY(t.asyncQueue,s,n,e,r).run()}),r.promise}function XY(t,e,n,r){const s=function(i,o){let a;return a=typeof i=="string"?new TextEncoder().encode(i):i,function(c,l){return new VY(c,l)}(function(c,l){if(c instanceof Uint8Array)return oS(c,l);if(c instanceof ArrayBuffer)return oS(new Uint8Array(c),l);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Gu(e));t.asyncQueue.enqueueAndForget(async()=>{BY(await Lw(t),s,r)})}function JY(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const s=z(n);return s.persistence.runTransaction("Get named query","readonly",i=>s.Ns.getNamedQuery(i,r))}(await Mw(t),e))}const aS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e,n){if(!n)throw new D(C.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KP(t,e,n,r){if(e===!0&&r===!0)throw new D(C.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cS(t){if(!H.isDocumentKey(t))throw new D(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lS(t){if(H.isDocumentKey(t))throw new D(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Ce(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pp(t);throw new D(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function WP(t,e){if(e<=0)throw new D(C.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new D(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new D(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,KP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new D(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uS(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Z4;switch(n.type){case"gapi":const r=n.client;return new r3(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new D(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=aS.get(e);n&&(F("ComponentProvider","Removing Datastore"),aS.delete(e),n.terminate())}(this),Promise.resolve()}}function ZY(t,e,n,r={}){var s;const i=(t=Ce(t,Yu))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&Ba("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=Nt.MOCK_USER;else{o=my(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new D(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Nt(c)}t._authCredentials=new e3(new hN(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qe(this.firestore,e,this._key)}}class ln{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ln(this.firestore,e,this._query)}}class $r extends ln{constructor(e,n,r){super(e,n,gc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new H(e))}withConverter(e){return new $r(this.firestore,e,this._path)}}function zP(t,e,...n){if(t=O(t),Fw("collection","path",e),t instanceof Yu){const r=Te.fromString(e,...n);return lS(r),new $r(t,null,r)}{if(!(t instanceof Qe||t instanceof $r))throw new D(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return lS(r),new $r(t.firestore,null,r)}}function e5(t,e){if(t=Ce(t,Yu),Fw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new D(C.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ln(t,null,function(n){return new Ss(Te.emptyPath(),n)}(e))}function Yd(t,e,...n){if(t=O(t),arguments.length===1&&(e=dN.R()),Fw("doc","path",e),t instanceof Yu){const r=Te.fromString(e,...n);return cS(r),new Qe(t,null,new H(r))}{if(!(t instanceof Qe||t instanceof $r))throw new D(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return cS(r),new Qe(t.firestore,t instanceof $r?t.converter:null,new H(r))}}function GP(t,e){return t=O(t),e=O(e),(t instanceof Qe||t instanceof $r)&&(e instanceof Qe||e instanceof $r)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function QP(t,e){return t=O(t),e=O(e),t instanceof ln&&e instanceof ln&&t.firestore===e.firestore&&Hu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new yw(this,"async_queue_retry"),this.jc=()=>{const n=qh();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.bo()};const e=qh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const n=qh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const n=new Dt;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}async Hc(){if(this.Bc.length!==0){try{await this.Bc[0](),this.Bc.shift(),this.xo.reset()}catch(e){if(!bi(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Bc.length>0&&this.xo.Ao(()=>this.Hc())}}zc(e){const n=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{this.qc=r,this.Kc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw ft("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Kc=!1,r))));return this.$c=n,n}enqueueAfterDelay(e,n,r){this.Wc(),this.Qc.indexOf(e)>-1&&(n=0);const s=bw.createAndSchedule(this,e,n,r,i=>this.Jc(i));return this.Uc.push(s),s}Wc(){this.qc&&Y()}verifyOperationInProgress(){}async Yc(){let e;do e=this.$c,await e;while(e!==this.$c)}Xc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function N_(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class n5{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=-1;class ut extends Yu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new t5,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||YP(this),this._firestoreClient.terminate()}}function jt(t){return t._firestoreClient||YP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function YP(t){var e;const n=t._freezeSettings(),r=function(s,i,o,a){return new g3(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new HY(t._authCredentials,t._appCheckCredentials,t._queue,r)}function s5(t,e){JP(t=Ce(t,ut));const n=jt(t),r=t._freezeSettings(),s=new Dw;return XP(n,s,new UP(s,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function i5(t){JP(t=Ce(t,ut));const e=jt(t),n=t._freezeSettings(),r=new Dw;return XP(e,r,new $Y(r,n.cacheSizeBytes))}function XP(t,e,n){const r=new Dt;return t.asyncQueue.enqueue(async()=>{try{await BP(t,n),await $P(t,e),r.resolve()}catch(s){const i=s;if(!function(o){return o.name==="FirebaseError"?o.code===C.FAILED_PRECONDITION||o.code===C.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(i))throw i;Ba("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}}).then(()=>r.promise)}function o5(t){if(t._initialized&&!t._terminated)throw new D(C.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!mr.C())return Promise.resolve();const r=n+"main";await mr.delete(r)}(gw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function a5(t){return function(e){const n=new Dt;return e.asyncQueue.enqueueAndForget(async()=>AY(await Lw(e),n)),n.promise}(jt(t=Ce(t,ut)))}function c5(t){return KY(jt(t=Ce(t,ut)))}function l5(t){return WY(jt(t=Ce(t,ut)))}function u5(t,e){const n=jt(t=Ce(t,ut)),r=new n5;return XY(n,t._databaseId,e,r),r}function h5(t,e){return JY(jt(t=Ce(t,ut)),e).then(n=>n?new ln(t,null,n.query):null)}function JP(t){if(t._initialized||t._terminated)throw new D(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new D(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qr(Tt.fromBase64String(e))}catch(n){throw new D(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qr(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=/^__.*__$/;class f5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new mc(e,this.data,n,this.fieldTransforms)}}class ZP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Op{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ea(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Op(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.sa({path:r,ra:!1});return s.oa(e),s}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.sa({path:r,ra:!1});return s.ea(),s}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return Xd(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(e.length===0)throw this.aa("Document fields must not be empty");if(eD(this.na)&&d5.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class p5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=r||Gu(e)}fa(e,n,r,s=!1){return new Op({na:e,methodName:n,la:r,path:pt.emptyPath(),ra:!1,ha:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Vo(t){const e=t._freezeSettings(),n=Gu(t._databaseId);return new p5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mp(t,e,n,r,s,i={}){const o=t.fa(i.merge||i.mergeFields?2:0,e,n,s);Vw("Data must be an object, but it was:",o,r);const a=rD(r,o);let c,l;if(i.merge)c=new Wn(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const d=P_(e,h,n);if(!o.contains(d))throw new D(C.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);iD(u,d)||u.push(d)}c=new Wn(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new f5(new Wt(a),c,l)}class Xu extends $o{_toFieldTransform(e){if(e.na!==2)throw e.na===1?e.aa(`${this._methodName}() can only appear at the top level of your update data`):e.aa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xu}}function tD(t,e,n){return new Op({na:3,la:e.settings.la,methodName:t._methodName,ra:n},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Uw extends $o{_toFieldTransform(e){return new Ku(e.path,new ja)}isEqual(e){return e instanceof Uw}}class g5 extends $o{constructor(e,n){super(e),this.da=n}_toFieldTransform(e){const n=tD(this,e,!0),r=this.da.map(i=>jo(i,n)),s=new Io(r);return new Ku(e.path,s)}isEqual(e){return this===e}}class m5 extends $o{constructor(e,n){super(e),this.da=n}_toFieldTransform(e){const n=tD(this,e,!0),r=this.da.map(i=>jo(i,n)),s=new To(r);return new Ku(e.path,s)}isEqual(e){return this===e}}class _5 extends $o{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=new qa(e.It,NN(e.It,this._a));return new Ku(e.path,n)}isEqual(e){return this===e}}function Bw(t,e,n,r){const s=t.fa(1,e,n);Vw("Data must be an object, but it was:",s,r);const i=[],o=Wt.empty();Bo(r,(c,l)=>{const u=jw(e,c,n);l=O(l);const h=s.ua(u);if(l instanceof Xu)i.push(u);else{const d=jo(l,h);d!=null&&(i.push(u),o.set(u,d))}});const a=new Wn(i);return new ZP(o,a,s.fieldTransforms)}function $w(t,e,n,r,s,i){const o=t.fa(1,e,n),a=[P_(e,r,n)],c=[s];if(i.length%2!=0)throw new D(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(P_(e,i[d])),c.push(i[d+1]);const l=[],u=Wt.empty();for(let d=a.length-1;d>=0;--d)if(!iD(l,a[d])){const f=a[d];let p=c[d];p=O(p);const _=o.ua(f);if(p instanceof Xu)l.push(f);else{const v=jo(p,_);v!=null&&(l.push(f),u.set(f,v))}}const h=new Wn(l);return new ZP(u,h,o.fieldTransforms)}function nD(t,e,n,r=!1){return jo(n,t.fa(r?4:3,e))}function jo(t,e){if(sD(t=O(t)))return Vw("Unsupported field value:",e,t),rD(t,e);if(t instanceof $o)return function(n,r){if(!eD(r.na))throw r.aa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ra&&e.na!==4)throw e.aa("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=jo(o,r.ca(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=O(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return NN(r.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=et.fromDate(n);return{timestampValue:ru(r.It,s)}}if(n instanceof et){const s=new et(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ru(r.It,s)}}if(n instanceof Dp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Qr)return{bytesValue:KN(r.It,n._byteString)};if(n instanceof Qe){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.aa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:aw(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.aa(`Unsupported field value: ${Pp(n)}`)}(t,e)}function rD(t,e){const n={};return vN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bo(t,(r,s)=>{const i=jo(s,e.ia(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function sD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Dp||t instanceof Qr||t instanceof Qe||t instanceof $o)}function Vw(t,e,n){if(!sD(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Pp(n);throw r==="an object"?e.aa(t+" a custom object"):e.aa(t+" "+r)}}function P_(t,e,n){if((e=O(e))instanceof pi)return e._internalPath;if(typeof e=="string")return jw(t,e);throw Xd("Field path arguments must be of type string or ",t,!1,void 0,n)}const y5=new RegExp("[~\\*/\\[\\]]");function jw(t,e,n){if(e.search(y5)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pi(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new D(C.INVALID_ARGUMENT,a+t+c)}function iD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class v5 extends cu{data(){return super.data()}}function Lp(t,e){return typeof e=="string"?jw(t,e):e instanceof pi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ws extends cu{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ml extends ws{data(e={}){return super.data(e)}}class gi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Gi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ml(this._firestore,this._userDataWriter,r.key,r,new Gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new D(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new ml(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Gi(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:i++}))}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new ml(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Gi(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,l=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),l=i.indexOf(o.doc.key)),{type:w5(o.type),doc:a,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function w5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function oD(t,e){return t instanceof ws&&e instanceof ws?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof gi&&e instanceof gi&&t._firestore===e._firestore&&QP(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new D(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ju{}function Ls(t,...e){for(const n of e)t=n._apply(t);return t}class E5 extends Ju{constructor(e,n,r){super(),this.wa=e,this.ma=n,this.ga=r,this.type="where"}_apply(e){const n=Vo(e.firestore),r=function(s,i,o,a,c,l,u){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new D(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){dS(u,l);const f=[];for(const p of u)f.push(hS(a,s,p));h={arrayValue:{values:f}}}else h=hS(a,s,u)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||dS(u,l),h=nD(o,i,u,l==="in"||l==="not-in");const d=zt.create(c,l,h);return function(f,p){if(p.dt()){const v=rw(f);if(v!==null&&!v.isEqual(p.field))throw new D(C.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${v.toString()}' and '${p.field.toString()}'`);const y=nw(f);y!==null&&dD(f,p.field,y)}const _=function(v,y){for(const g of v.filters)if(y.indexOf(g.op)>=0)return g.op;return null}(f,function(v){switch(v){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(_!==null)throw _===p.op?new D(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`):new D(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${p.op.toString()}' filters with '${_.toString()}' filters.`)}(s,d),d}(e._query,"where",n,e.firestore._databaseId,this.wa,this.ma,this.ga);return new ln(e.firestore,e.converter,function(s,i){const o=s.filters.concat([i]);return new Ss(s.path,s.collectionGroup,s.explicitOrderBy.slice(),o,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function b5(t,e,n){const r=e,s=Lp("where",t);return new E5(s,r,n)}class I5 extends Ju{constructor(e,n){super(),this.wa=e,this.ya=n,this.type="orderBy"}_apply(e){const n=function(r,s,i){if(r.startAt!==null)throw new D(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new D(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new ya(s,i);return function(a,c){if(nw(a)===null){const l=rw(a);l!==null&&dD(a,l,c.field)}}(r,o),o}(e._query,this.wa,this.ya);return new ln(e.firestore,e.converter,function(r,s){const i=r.explicitOrderBy.concat([s]);return new Ss(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function T5(t,e="asc"){const n=e,r=Lp("orderBy",t);return new I5(r,n)}class cD extends Ju{constructor(e,n,r){super(),this.type=e,this.pa=n,this.Ia=r}_apply(e){return new ln(e.firestore,e.converter,qd(e._query,this.pa,this.Ia))}}function S5(t){return WP("limit",t),new cD("limit",t,"F")}function C5(t){return WP("limitToLast",t),new cD("limitToLast",t,"L")}class lD extends Ju{constructor(e,n,r){super(),this.type=e,this.Ta=n,this.Ea=r}_apply(e){const n=hD(e,this.type,this.Ta,this.Ea);return new ln(e.firestore,e.converter,function(r,s){return new Ss(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function k5(...t){return new lD("startAt",t,!0)}function A5(...t){return new lD("startAfter",t,!1)}class uD extends Ju{constructor(e,n,r){super(),this.type=e,this.Ta=n,this.Ea=r}_apply(e){const n=hD(e,this.type,this.Ta,this.Ea);return new ln(e.firestore,e.converter,function(r,s){return new Ss(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function R5(...t){return new uD("endBefore",t,!1)}function x5(...t){return new uD("endAt",t,!0)}function hD(t,e,n,r){if(n[0]=O(n[0]),n[0]instanceof cu)return function(s,i,o,a,c){if(!a)throw new D(C.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const l=[];for(const u of Va(s))if(u.field.isKeyField())l.push(Eo(i,a.key));else{const h=a.data.field(u.field);if(tw(h))throw new D(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=u.field.canonicalString();throw new D(C.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}l.push(h)}return new di(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Vo(t.firestore);return function(i,o,a,c,l,u){const h=i.explicitOrderBy;if(l.length>h.length)throw new D(C.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let f=0;f<l.length;f++){const p=l[f];if(h[f].field.isKeyField()){if(typeof p!="string")throw new D(C.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof p}`);if(!sw(i)&&p.indexOf("/")!==-1)throw new D(C.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${p}' contains a slash.`);const _=i.path.child(Te.fromString(p));if(!H.isDocumentKey(_))throw new D(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const v=new H(_);d.push(Eo(o,v))}else{const _=nD(a,c,p);d.push(_)}}return new di(d,u)}(t._query,t.firestore._databaseId,s,e,n,r)}}function hS(t,e,n){if(typeof(n=O(n))=="string"){if(n==="")throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sw(e)&&n.indexOf("/")!==-1)throw new D(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!H.isDocumentKey(r))throw new D(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Eo(t,new H(r))}if(n instanceof Qe)return Eo(t,n._key);throw new D(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pp(n)}.`)}function dS(t,e){if(!Array.isArray(t)||t.length===0)throw new D(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new D(C.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function dD(t,e,n){if(!n.isEqual(e))throw new D(C.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{convertValue(e,n="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Y()}}convertObject(e,n){const r={};return Bo(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Dp(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wN(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=li(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);ae(eP(r));const s=new ui(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(n)||ft(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class P5 extends qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vo(e)}set(e,n,r){this._verifyNotCommitted();const s=js(e,this._firestore),i=Fp(s.converter,n,r),o=Mp(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ze.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=js(e,this._firestore);let o;return o=typeof(n=O(n))=="string"||n instanceof pi?$w(this._dataReader,"WriteBatch.update",i._key,n,r,s):Bw(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Ze.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=js(e,this._firestore);return this._mutations=this._mutations.concat(new _c(n._key,Ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new D(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function js(t,e){if((t=O(t)).firestore!==e)throw new D(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t){t=Ce(t,Qe);const e=Ce(t.firestore,ut);return qP(jt(e),t._key).then(n=>Hw(e,t,n))}class qo extends qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}function M5(t){t=Ce(t,Qe);const e=Ce(t.firestore,ut),n=jt(e),r=new qo(e);return zY(n,t._key).then(s=>new ws(e,r,t._key,s,new Gi(s!==null&&s.hasLocalMutations,!0),t.converter))}function L5(t){t=Ce(t,Qe);const e=Ce(t.firestore,ut);return qP(jt(e),t._key,{source:"server"}).then(n=>Hw(e,t,n))}function F5(t){t=Ce(t,ln);const e=Ce(t.firestore,ut),n=jt(e),r=new qo(e);return aD(t._query),HP(n,t._query).then(s=>new gi(e,r,t,s))}function U5(t){t=Ce(t,ln);const e=Ce(t.firestore,ut),n=jt(e),r=new qo(e);return GY(n,t._query).then(s=>new gi(e,r,t,s))}function B5(t){t=Ce(t,ln);const e=Ce(t.firestore,ut),n=jt(e),r=new qo(e);return HP(n,t._query,{source:"server"}).then(s=>new gi(e,r,t,s))}function fS(t,e,n){t=Ce(t,Qe);const r=Ce(t.firestore,ut),s=Fp(t.converter,e,n);return Zu(r,[Mp(Vo(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ze.none())])}function pS(t,e,n,...r){t=Ce(t,Qe);const s=Ce(t.firestore,ut),i=Vo(s);let o;return o=typeof(e=O(e))=="string"||e instanceof pi?$w(i,"updateDoc",t._key,e,n,r):Bw(i,"updateDoc",t._key,e),Zu(s,[o.toMutation(t._key,Ze.exists(!0))])}function $5(t){return Zu(Ce(t.firestore,ut),[new _c(t._key,Ze.none())])}function V5(t,e){const n=Ce(t.firestore,ut),r=Yd(t),s=Fp(t.converter,e);return Zu(n,[Mp(Vo(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ze.exists(!1))]).then(()=>r)}function fD(t,...e){var n,r,s;t=O(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||N_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(N_(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let c,l,u;if(t instanceof Qe)l=Ce(t.firestore,ut),u=gc(t._key.path),c={next:h=>{e[o]&&e[o](Hw(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Ce(t,ln);l=Ce(h.firestore,ut),u=h._query;const d=new qo(l);c={next:f=>{e[o]&&e[o](new gi(l,d,h,f))},error:e[o+1],complete:e[o+2]},aD(t._query)}return function(h,d,f,p){const _=new xp(p),v=new Cw(d,_,f);return h.asyncQueue.enqueueAndForget(async()=>Iw(await Ga(h),v)),()=>{_.Rc(),h.asyncQueue.enqueueAndForget(async()=>Tw(await Ga(h),v))}}(jt(l),u,a,c)}function j5(t,e){return QY(jt(t=Ce(t,ut)),N_(e)?e:{next:e})}function Zu(t,e){return function(n,r){const s=new Dt;return n.asyncQueue.enqueueAndForget(async()=>TY(await Lw(n),r,s)),s.promise}(jt(t),e)}function Hw(t,e,n){const r=n.docs.get(e._key),s=new qo(t);return new ws(t,s,e._key,r,new Gi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5 extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Vo(e)}get(e){const n=js(e,this._firestore),r=new P5(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Y();const i=s[0];if(i.isFoundDocument())return new cu(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new cu(this._firestore,r,n._key,null,n.converter);throw Y()})}set(e,n,r){const s=js(e,this._firestore),i=Fp(s.converter,n,r),o=Mp(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=js(e,this._firestore);let o;return o=typeof(n=O(n))=="string"||n instanceof pi?$w(this._dataReader,"Transaction.update",i._key,n,r,s):Bw(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=js(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=js(e,this._firestore),r=new qo(this._firestore);return super.get(e).then(s=>new ws(this._firestore,r,n._key,s._document,new Gi(!1,!1),n.converter))}}function H5(t,e,n){t=Ce(t,ut);const r=Object.assign(Object.assign({},N5),n);return function(s){if(s.maxAttempts<1)throw new D(C.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),YY(jt(t),s=>e(new q5(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(){return new Xu("deleteField")}function W5(){return new Uw("serverTimestamp")}function z5(...t){return new g5("arrayUnion",t)}function G5(...t){return new m5("arrayRemove",t)}function Q5(t){return new _5("increment",t)}(function(t,e=!0){(function(n){pc=n})(Jr),ct(new ke("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new ut(new t3(n.getProvider("auth-internal")),new i3(n.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new D(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ui(a.options.projectId,c)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),qe(hT,"3.5.0",t),qe(hT,"3.5.0","esm2017")})();const Y5="@firebase/firestore-compat",X5="0.1.25";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new D("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(){if(typeof Uint8Array>"u")throw new D("unimplemented","Uint8Arrays are not available in this environment.")}function mS(){if(!f3())throw new D("unimplemented","Blobs are unavailable in Firestore in this environment.")}class lu{constructor(e){this._delegate=e}static fromBase64String(e){return mS(),new lu(Qr.fromBase64String(e))}static fromUint8Array(e){return gS(),new lu(Qr.fromUint8Array(e))}toBase64(){return mS(),this._delegate.toBase64()}toUint8Array(){return gS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t){return J5(t,["next","error","complete"])}function J5(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{enableIndexedDbPersistence(e,n){return s5(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return i5(e._delegate)}clearIndexedDbPersistence(e){return o5(e._delegate)}}class pD{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ui||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ba("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){ZY(this._delegate,e,n,r)}enableNetwork(){return c5(this._delegate)}disableNetwork(){return l5(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,KP("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return a5(this._delegate)}onSnapshotsInSync(e){return j5(this._delegate,e)}get app(){if(!this._appCompat)throw new D("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qa(this,zP(this._delegate,e))}catch(n){throw pn(n,"collection()","Firestore.collection()")}}doc(e){try{return new ir(this,Yd(this._delegate,e))}catch(n){throw pn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new dn(this,e5(this._delegate,e))}catch(n){throw pn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return H5(this._delegate,n=>e(new gD(this,n)))}batch(){return jt(this._delegate),new mD(new D5(this._delegate,e=>Zu(this._delegate,e)))}loadBundle(e){return u5(this._delegate,e)}namedQuery(e){return h5(this._delegate,e).then(n=>n?new dn(this,n):null)}}class Up extends qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(new Qr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ir.forKey(n,this.firestore,null)}}function e9(t){X4(t)}class gD{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Up(e)}get(e){const n=Qi(e);return this._delegate.get(n).then(r=>new uu(this._firestore,new ws(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=Qi(e);return r?(Kw("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Qi(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Qi(e);return this._delegate.delete(n),this}}class mD{constructor(e){this._delegate=e}set(e,n,r){const s=Qi(e);return r?(Kw("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Qi(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Qi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ao{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new ml(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new hu(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ao.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new Ao(e,new Up(e),n),s.set(n,i)),i}}Ao.INSTANCES=new WeakMap;class ir{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Up(e)}static forPath(e,n,r){if(e.length%2!==0)throw new D("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ir(n,new Qe(n._delegate,r,new H(e)))}static forKey(e,n,r){return new ir(n,new Qe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qa(this.firestore,zP(this._delegate,e))}catch(n){throw pn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=O(e),e instanceof Qe?GP(this._delegate,e):!1}set(e,n){n=Kw("DocumentReference.set",n);try{return n?fS(this._delegate,e,n):fS(this._delegate,e)}catch(r){throw pn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?pS(this._delegate,e):pS(this._delegate,e,n,...r)}catch(s){throw pn(s,"updateDoc()","DocumentReference.update()")}}delete(){return $5(this._delegate)}onSnapshot(...e){const n=_D(e),r=yD(e,s=>new uu(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return fD(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=M5(this._delegate):(e==null?void 0:e.source)==="server"?n=L5(this._delegate):n=O5(this._delegate),n.then(r=>new uu(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ir(this.firestore,e?this._delegate.withConverter(Ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function pn(t,e,n){return t.message=t.message.replace(e,n),t}function _D(t){for(const e of t)if(typeof e=="object"&&!D_(e))return e;return{}}function yD(t,e){var n,r;let s;return D_(t[0])?s=t[0]:D_(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:i=>{s.next&&s.next(e(i))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class uu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ir(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return oD(this._delegate,e._delegate)}}class hu extends uu{data(e){const n=this._delegate.data(e);return J4(n!==void 0),n}}class dn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Up(e)}where(e,n,r){try{return new dn(this.firestore,Ls(this._delegate,b5(e,n,r)))}catch(s){throw pn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new dn(this.firestore,Ls(this._delegate,T5(e,n)))}catch(r){throw pn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new dn(this.firestore,Ls(this._delegate,S5(e)))}catch(n){throw pn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new dn(this.firestore,Ls(this._delegate,C5(e)))}catch(n){throw pn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new dn(this.firestore,Ls(this._delegate,k5(...e)))}catch(n){throw pn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new dn(this.firestore,Ls(this._delegate,A5(...e)))}catch(n){throw pn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new dn(this.firestore,Ls(this._delegate,R5(...e)))}catch(n){throw pn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new dn(this.firestore,Ls(this._delegate,x5(...e)))}catch(n){throw pn(n,"endAt()","Query.endAt()")}}isEqual(e){return QP(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=U5(this._delegate):(e==null?void 0:e.source)==="server"?n=B5(this._delegate):n=F5(this._delegate),n.then(r=>new O_(this.firestore,new gi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=_D(e),r=yD(e,s=>new O_(this.firestore,new gi(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return fD(this._delegate,n,r)}withConverter(e){return new dn(this.firestore,e?this._delegate.withConverter(Ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class t9{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new hu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class O_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new dn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new hu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new t9(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new hu(this._firestore,r))})}isEqual(e){return oD(this._delegate,e._delegate)}}class Qa extends dn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ir(this.firestore,e):null}doc(e){try{return e===void 0?new ir(this.firestore,Yd(this._delegate)):new ir(this.firestore,Yd(this._delegate,e))}catch(n){throw pn(n,"doc()","CollectionReference.doc()")}}add(e){return V5(this._delegate,e).then(n=>new ir(this.firestore,n))}isEqual(e){return GP(this._delegate,e._delegate)}withConverter(e){return new Qa(this.firestore,e?this._delegate.withConverter(Ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qi(t){return Ce(t,Qe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(...e){this._delegate=new pi(...e)}static documentId(){return new Ww(pt.keyField().canonicalString())}isEqual(e){return e=O(e),e instanceof pi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this._delegate=e}static serverTimestamp(){const e=W5();return e._methodName="FieldValue.serverTimestamp",new ji(e)}static delete(){const e=K5();return e._methodName="FieldValue.delete",new ji(e)}static arrayUnion(...e){const n=z5(...e);return n._methodName="FieldValue.arrayUnion",new ji(n)}static arrayRemove(...e){const n=G5(...e);return n._methodName="FieldValue.arrayRemove",new ji(n)}static increment(e){const n=Q5(e);return n._methodName="FieldValue.increment",new ji(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9={Firestore:pD,GeoPoint:Dp,Timestamp:et,Blob:lu,Transaction:gD,WriteBatch:mD,DocumentReference:ir,DocumentSnapshot:uu,Query:dn,QueryDocumentSnapshot:hu,QuerySnapshot:O_,CollectionReference:Qa,FieldPath:Ww,FieldValue:ji,setLogLevel:e9,CACHE_SIZE_UNLIMITED:r5};function r9(t,e){t.INTERNAL.registerComponent(new ke("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},n9)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(t){r9(t,(e,n)=>new pD(e,n,new Z5)),t.registerVersion(Y5,X5)}s9(je);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9="type.googleapis.com/google.protobuf.Int64Value",o9="type.googleapis.com/google.protobuf.UInt64Value";function vD(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function M_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>M_(e));if(typeof t=="function"||typeof t=="object")return vD(t,e=>M_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Jd(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case i9:case o9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Jd(e)):typeof t=="function"||typeof t=="object"?vD(t,e=>Jd(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wa extends st{constructor(e,n,r){super(`${wD}/${e}`,n||""),this.details=r}}function a9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function c9(t,e){let n=a9(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!_S[o])return new wa("internal","internal");n=_S[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Jd(s))}}catch{}return n==="ok"?null:new wa(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(!!this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(){if(this.appCheck){const e=await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(){const e=await this.getAuthToken(),n=await this.getMessagingToken(),r=await this.getAppCheckToken();return{authToken:e,messagingToken:n,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="us-central1";function u9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new wa("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class h9{constructor(e,n,r,s,i=yS,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new l9(n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin,this.region=yS}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function d9(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function f9(t,e,n){return r=>m9(t,e,r,n||{})}function p9(t,e,n){return r=>ED(t,e,r,n||{})}async function g9(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function m9(t,e,n,r){const s=t._url(e);return ED(t,s,n,r)}async function ED(t,e,n,r){n=M_(n);const s={data:n},i={},o=await t.contextProvider.getContext();o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const a=r.timeout||7e4,c=u9(a),l=await Promise.race([g9(e,s,i,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!l)throw new wa("cancelled","Firebase Functions instance was deleted.");const u=c9(l.status,l.json);if(u)throw u;if(!l.json)throw new wa("internal","Response is not valid JSON object.");let h=l.json.data;if(typeof h>"u"&&(h=l.json.result),typeof h>"u")throw new wa("internal","Response is missing data field.");return{data:Jd(h)}}const vS="@firebase/functions",wS="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="auth-internal",y9="app-check-internal",v9="messaging-internal";function w9(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(_9),a=r.getProvider(v9),c=r.getProvider(y9);return new h9(i,o,a,c,s,t)};ct(new ke(wD,n,"PUBLIC").setMultipleInstances(!0)),qe(vS,wS,e),qe(vS,wS,"esm2017")}function ES(t,e,n){d9(O(t),e,n)}function E9(t,e,n){return f9(O(t),e,n)}function b9(t,e,n){return p9(O(t),e,n)}w9(fetch.bind(self));const I9="@firebase/functions-compat",T9="0.2.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n){this.app=e,this._delegate=n,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,n){return E9(this._delegate,e,n)}httpsCallableFromURL(e,n){return b9(this._delegate,e,n)}useFunctionsEmulator(e){const n=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(n==null)throw new st("functions","No origin provided to useFunctionsEmulator()");if(n[2]==null)throw new st("functions","Port missing in origin provided to useFunctionsEmulator()");return ES(this._delegate,n[1],Number(n[2]))}useEmulator(e,n){return ES(this._delegate,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="us-central1",C9=(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("functions").getImmediate({identifier:e!=null?e:S9});return new bD(n,r)};function k9(){const t={Functions:bD};je.INTERNAL.registerComponent(new ke("functions-compat",C9,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */k9();je.registerVersion(I9,T9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9="/firebase-messaging-sw.js",R9="/firebase-cloud-messaging-push-scope",ID="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",x9="https://fcmregistrations.googleapis.com/v1",TD="google.c.a.c_id",N9="google.c.a.c_l",P9="google.c.a.ts",D9="google.c.a.e";var bS;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(bS||(bS={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var du;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(du||(du={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function O9(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="fcm_token_details_db",M9=5,IS="fcm_token_object_Store";async function L9(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Bg))return null;let e=null;return(await rc(Bg,M9,{upgrade:async(r,s,i,o)=>{var a;if(s<2||!r.objectStoreNames.contains(IS))return;const c=o.objectStore(IS),l=await c.index("fcmSenderId").get(t);if(await c.clear(),!!l){if(s===2){const u=l;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:rs(u.vapidKey)}}}else if(s===3){const u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:rs(u.auth),p256dh:rs(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:rs(u.vapidKey)}}}else if(s===4){const u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:rs(u.auth),p256dh:rs(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:rs(u.vapidKey)}}}}}})).close(),await ha(Bg),await ha("fcm_vapid_details_db"),await ha("undefined"),F9(e)?e:null}function F9(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="firebase-messaging-database",B9=1,Ro="firebase-messaging-store";let $g=null;function zw(){return $g||($g=rc(U9,B9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ro)}}})),$g}async function SD(t){const e=Qw(t),r=await(await zw()).transaction(Ro).objectStore(Ro).get(e);if(r)return r;{const s=await L9(t.appConfig.senderId);if(s)return await Gw(t,s),s}}async function Gw(t,e){const n=Qw(t),s=(await zw()).transaction(Ro,"readwrite");return await s.objectStore(Ro).put(e,n),await s.done,e}async function $9(t){const e=Qw(t),r=(await zw()).transaction(Ro,"readwrite");await r.objectStore(Ro).delete(e),await r.done}function Qw({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Tn=new Sn("messaging","Messaging",V9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t,e){var n;const r=await Xw(t),s=kD(e),i={method:"POST",headers:r,body:JSON.stringify(s)};let o;try{o=await(await fetch(Yw(t.appConfig),i)).json()}catch(a){throw Tn.create("token-subscribe-failed",{errorInfo:(n=a)===null||n===void 0?void 0:n.toString()})}if(o.error){const a=o.error.message;throw Tn.create("token-subscribe-failed",{errorInfo:a})}if(!o.token)throw Tn.create("token-subscribe-no-token");return o.token}async function q9(t,e){var n;const r=await Xw(t),s=kD(e.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(s)};let o;try{o=await(await fetch(`${Yw(t.appConfig)}/${e.token}`,i)).json()}catch(a){throw Tn.create("token-update-failed",{errorInfo:(n=a)===null||n===void 0?void 0:n.toString()})}if(o.error){const a=o.error.message;throw Tn.create("token-update-failed",{errorInfo:a})}if(!o.token)throw Tn.create("token-update-no-token");return o.token}async function CD(t,e){var n;const r=await Xw(t),s={method:"DELETE",headers:r};try{const o=await(await fetch(`${Yw(t.appConfig)}/${e}`,s)).json();if(o.error){const a=o.error.message;throw Tn.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw Tn.create("token-unsubscribe-failed",{errorInfo:(n=i)===null||n===void 0?void 0:n.toString()})}}function Yw({projectId:t}){return`${x9}/projects/${t}/registrations`}async function Xw({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function kD({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==ID&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=7*24*60*60*1e3;async function K9(t){const e=await z9(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:rs(e.getKey("auth")),p256dh:rs(e.getKey("p256dh"))},r=await SD(t.firebaseDependencies);if(r){if(G9(r.subscriptionOptions,n))return Date.now()>=r.createTime+H9?W9(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await CD(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return TS(t.firebaseDependencies,n)}else return TS(t.firebaseDependencies,n)}async function AD(t){const e=await SD(t.firebaseDependencies);e&&(await CD(t.firebaseDependencies,e.token),await $9(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function W9(t,e){try{const n=await q9(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Gw(t.firebaseDependencies,r),n}catch(n){throw await AD(t),n}}async function TS(t,e){const r={token:await j9(t,e),createTime:Date.now(),subscriptionOptions:e};return await Gw(t,r),r.token}async function z9(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:O9(e)})}function G9(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Q9(e,t),Y9(e,t),X9(e,t),e}function Q9(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s)}function Y9(t,e){!e.data||(t.data=e.data)}function X9(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&&(t.fcmOptions.link=a);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t){return typeof t=="object"&&!!t&&TD in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */RD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");RD("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function RD(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t){if(!t||!t.options)throw Vg("App Configuration Object");if(!t.name)throw Vg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Vg(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Vg(t){return Tn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=Z9(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(t){var e;try{t.swRegistration=await navigator.serviceWorker.register(A9,{scope:R9}),t.swRegistration.update().catch(()=>{})}catch(n){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:(e=n)===null||e===void 0?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(t,e){if(!e&&!t.swRegistration&&await xD(t),!(!e&&!!t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=ID)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e){if(!navigator)throw Tn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Tn.create("permission-blocked");return await n8(t,e==null?void 0:e.vapidKey),await t8(t,e==null?void 0:e.serviceWorkerRegistration),K9(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(t,e,n){const r=s8(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[TD],message_name:n[N9],message_time:n[P9],message_device_time:Math.floor(Date.now()/1e3)})}function s8(t){switch(t){case du.NOTIFICATION_CLICKED:return"notification_open";case du.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===du.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(SS(n)):t.onMessageHandler.next(SS(n)));const r=n.data;J9(r)&&r[D9]==="1"&&await r8(t,n.messageType,r)}const CS="@firebase/messaging",kS="0.9.16";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=t=>{const e=new e8(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>i8(e,n)),e},a8=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>ND(e,r)}};function c8(){ct(new ke("messaging",o8,"PUBLIC")),ct(new ke("messaging-internal",a8,"PRIVATE")),qe(CS,kS),qe(CS,kS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l8(t){if(!navigator)throw Tn.create("only-available-in-window");return t.swRegistration||await xD(t),AD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(t,e){if(!navigator)throw Tn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}async function h8(t,e){return t=O(t),ND(t,e)}function d8(t){return t=O(t),l8(t)}function f8(t,e){return t=O(t),u8(t,e)}c8();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",p8="https://fcmregistrations.googleapis.com/v1",DD="FCM_MSG",g8="google.c.a.c_id",m8=3,_8=1;var Zd;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Zd||(Zd={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ef;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(ef||(ef={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y8(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="fcm_token_details_db",v8=5,AS="fcm_token_object_Store";async function w8(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(jg))return null;let e=null;return(await rc(jg,v8,{upgrade:async(r,s,i,o)=>{var a;if(s<2||!r.objectStoreNames.contains(AS))return;const c=o.objectStore(AS),l=await c.index("fcmSenderId").get(t);if(await c.clear(),!!l){if(s===2){const u=l;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:ss(u.vapidKey)}}}else if(s===3){const u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:ss(u.auth),p256dh:ss(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:ss(u.vapidKey)}}}else if(s===4){const u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:ss(u.auth),p256dh:ss(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:ss(u.vapidKey)}}}}}})).close(),await ha(jg),await ha("fcm_vapid_details_db"),await ha("undefined"),E8(e)?e:null}function E8(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8="firebase-messaging-database",I8=1,xo="firebase-messaging-store";let qg=null;function Jw(){return qg||(qg=rc(b8,I8,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xo)}}})),qg}async function Zw(t){const e=tE(t),r=await(await Jw()).transaction(xo).objectStore(xo).get(e);if(r)return r;{const s=await w8(t.appConfig.senderId);if(s)return await eE(t,s),s}}async function eE(t,e){const n=tE(t),s=(await Jw()).transaction(xo,"readwrite");return await s.objectStore(xo).put(e,n),await s.done,e}async function T8(t){const e=tE(t),r=(await Jw()).transaction(xo,"readwrite");await r.objectStore(xo).delete(e),await r.done}function tE({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Vr=new Sn("messaging","Messaging",S8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C8(t,e){var n;const r=await rE(t),s=MD(e),i={method:"POST",headers:r,body:JSON.stringify(s)};let o;try{o=await(await fetch(nE(t.appConfig),i)).json()}catch(a){throw Vr.create("token-subscribe-failed",{errorInfo:(n=a)===null||n===void 0?void 0:n.toString()})}if(o.error){const a=o.error.message;throw Vr.create("token-subscribe-failed",{errorInfo:a})}if(!o.token)throw Vr.create("token-subscribe-no-token");return o.token}async function k8(t,e){var n;const r=await rE(t),s=MD(e.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(s)};let o;try{o=await(await fetch(`${nE(t.appConfig)}/${e.token}`,i)).json()}catch(a){throw Vr.create("token-update-failed",{errorInfo:(n=a)===null||n===void 0?void 0:n.toString()})}if(o.error){const a=o.error.message;throw Vr.create("token-update-failed",{errorInfo:a})}if(!o.token)throw Vr.create("token-update-no-token");return o.token}async function OD(t,e){var n;const r=await rE(t),s={method:"DELETE",headers:r};try{const o=await(await fetch(`${nE(t.appConfig)}/${e}`,s)).json();if(o.error){const a=o.error.message;throw Vr.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw Vr.create("token-unsubscribe-failed",{errorInfo:(n=i)===null||n===void 0?void 0:n.toString()})}}function nE({projectId:t}){return`${p8}/projects/${t}/registrations`}async function rE({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function MD({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==PD&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=7*24*60*60*1e3;async function R8(t){const e=await N8(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ss(e.getKey("auth")),p256dh:ss(e.getKey("p256dh"))},r=await Zw(t.firebaseDependencies);if(r){if(P8(r.subscriptionOptions,n))return Date.now()>=r.createTime+A8?x8(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await OD(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return RS(t.firebaseDependencies,n)}else return RS(t.firebaseDependencies,n)}async function L_(t){const e=await Zw(t.firebaseDependencies);e&&(await OD(t.firebaseDependencies,e.token),await T8(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function x8(t,e){try{const n=await k8(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await eE(t.firebaseDependencies,r),n}catch(n){throw await L_(t),n}}async function RS(t,e){const r={token:await C8(t,e),createTime:Date.now(),subscriptionOptions:e};return await eE(t,r),r.token}async function N8(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:y8(e)})}function P8(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return O8(e,t),M8(e,t),L8(e,t),e}function O8(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s)}function M8(t,e){!e.data||(t.data=e.data)}function L8(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&&(t.fcmOptions.link=a);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(t){return typeof t=="object"&&!!t&&g8 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");LD("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");async function B8(t,e){const n=$8(e,await t.firebaseDependencies.installations.getId());V8(t,n)}function $8(t,e){var n,r;const s={};return t.from&&(s.project_number=t.from),t.fcmMessageId&&(s.message_id=t.fcmMessageId),s.instance_id=e,t.notification?s.message_type=Zd.DISPLAY_NOTIFICATION.toString():s.message_type=Zd.DATA_MESSAGE.toString(),s.sdk_platform=m8.toString(),s.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(s.collapse_key=t.collapse_key),s.event=_8.toString(),!((n=t.fcmOptions)===null||n===void 0)&&n.analytics_label&&(s.analytics_label=(r=t.fcmOptions)===null||r===void 0?void 0:r.analytics_label),s}function V8(t,e){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(e),t.logEvents.push(n)}function LD(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(t,e){var n,r;const{newSubscription:s}=t;if(!s){await L_(e);return}const i=await Zw(e.firebaseDependencies);await L_(e),e.vapidKey=(r=(n=i==null?void 0:i.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:PD,await R8(e)}async function q8(t,e){const n=W8(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await B8(e,n);const r=await FD();if(G8(r))return Q8(r,n);if(n.notification&&await Y8(K8(n)),!!e&&e.onBackgroundMessageHandler){const s=D8(n);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(s):e.onBackgroundMessageHandler.next(s)}}async function H8(t){var e,n;const r=(n=(e=t.notification)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[DD];if(r){if(t.action)return}else return;t.stopImmediatePropagation(),t.notification.close();const s=X8(r);if(!s)return;const i=new URL(s,self.location.href),o=new URL(self.location.origin);if(i.host!==o.host)return;let a=await z8(i);if(a?a=await a.focus():(a=await self.clients.openWindow(s),await U8(3e3)),!!a)return r.messageType=ef.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)}function K8(t){const e=Object.assign({},t.notification);return e.data={[DD]:t},e}function W8({data:t}){if(!t)return null;try{return t.json()}catch{return null}}async function z8(t){const e=await FD();for(const n of e){const r=new URL(n.url,self.location.href);if(t.host===r.host)return n}return null}function G8(t){return t.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function Q8(t,e){e.isFirebaseMessaging=!0,e.messageType=ef.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function FD(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Y8(t){var e;const{actions:n}=t,{maxActions:r}=Notification;return n&&r&&n.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=t.title)!==null&&e!==void 0?e:"",t)}function X8(t){var e,n,r;const s=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return s||(F8(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(t){if(!t||!t.options)throw Hg("App Configuration Object");if(!t.name)throw Hg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Hg(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Hg(t){return Vr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=J8(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eX=t=>{const e=new Z8(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",n=>{n.waitUntil(q8(n,e))}),self.addEventListener("pushsubscriptionchange",n=>{n.waitUntil(j8(n,e))}),self.addEventListener("notificationclick",n=>{n.waitUntil(H8(n))}),e};function tX(){ct(new ke("messaging-sw",eX,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nX(t,e){if(self.document!==void 0)throw Vr.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}function rX(t,e){return t=O(t),nX(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tX();const sX="@firebase/messaging-compat",iX="0.1.16";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oX(){return self&&"ServiceWorkerGlobalScope"in self?cX():aX()}function aX(){return typeof window<"u"&&Fn()&&Sf()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function cX(){return Fn()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class xS{constructor(e,n){this.app=e,this._delegate=n,this.app=e,this._delegate=n}async getToken(e){return h8(this._delegate,e)}async deleteToken(){return d8(this._delegate)}onMessage(e){return f8(this._delegate,e)}onBackgroundMessage(e){return rX(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lX=t=>self&&"ServiceWorkerGlobalScope"in self?new xS(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new xS(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),uX={isSupported:oX};function hX(){je.INTERNAL.registerComponent(new ke("messaging-compat",lX,"PUBLIC").setServiceProps(uX))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hX();je.registerVersion(sX,iX);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="firebasestorage.googleapis.com",BD="storageBucket",dX=2*60*1e3,fX=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht extends st{constructor(e,n){super(Kg(e),`Firebase Storage: ${n} (${Kg(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ht.prototype)}_codeEquals(e){return Kg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function Kg(t){return"storage/"+t}function sE(){const t="An unknown error occurred, please check the error payload for server response.";return new ht("unknown",t)}function pX(t){return new ht("object-not-found","Object '"+t+"' does not exist.")}function gX(t){return new ht("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mX(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ht("unauthenticated",t)}function _X(){return new ht("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function yX(t){return new ht("unauthorized","User does not have permission to access '"+t+"'.")}function vX(){return new ht("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function $D(){return new ht("canceled","User canceled the upload/download.")}function wX(t){return new ht("invalid-url","Invalid URL '"+t+"'.")}function EX(t){return new ht("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function bX(){return new ht("no-default-bucket","No default bucket found. Did you set the '"+BD+"' property when initializing the app?")}function VD(){return new ht("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function IX(){return new ht("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function TX(){return new ht("no-download-url","The given file does not have any download URLs.")}function Ea(t){return new ht("invalid-argument",t)}function jD(){return new ht("app-deleted","The Firebase app was deleted.")}function qD(t){return new ht("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _l(t,e){return new ht("invalid-format","String does not match format '"+t+"': "+e)}function $c(t){throw new ht("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=sn.makeFromUrl(e,n)}catch{return new sn(e,"")}if(r.path==="")return r;throw EX(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function l(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${s}/o${d}`,"i"),p={bucket:1,path:3},_=n===UD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",y=new RegExp(`^https?://${_}/${s}/${v}`,"i"),w=[{regex:a,indices:c,postModify:i},{regex:f,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let I=0;I<w.length;I++){const k=w[I],x=k.regex.exec(e);if(x){const $=x[k.indices.bucket];let A=x[k.indices.path];A||(A=""),r=new sn($,A),k.postModify(r);break}}if(r==null)throw wX(e);return r}}class SX{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CX(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...v){l||(l=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(f,c())},v)}function d(){i&&clearTimeout(i)}function f(v,...y){if(l){d();return}if(v){d(),u.call(null,v,...y);return}if(c()||o){d(),u.call(null,v,...y);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let p=!1;function _(v){p||(p=!0,d(),!l&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function kX(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(t){return t!==void 0}function RX(t){return typeof t=="function"}function xX(t){return typeof t=="object"&&!Array.isArray(t)}function Bp(t){return typeof t=="string"||t instanceof String}function NS(t){return iE()&&t instanceof Blob}function iE(){return typeof Blob<"u"}function F_(t,e,n,r){if(r<e)throw Ea(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ea(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function HD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oo||(oo={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NX{constructor(e,n,r,s,i,o,a,c,l,u,h){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,f)=>{this.resolve_=d,this.reject_=f,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Sh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===oo.NO_ERROR,c=i.getStatus();if(!a||this.isRetryStatusCode_(c)){const u=i.getErrorCode()===oo.ABORT;r(!1,new Sh(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;r(!0,new Sh(l,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());AX(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=sE();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?jD():$D();o(c)}else{const c=vX();o(c)}};this.canceled_?n(!1,new Sh(!1,null,!0)):this.backoffId_=CX(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kX(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,i=this.additionalRetryCodes_.indexOf(e)!==-1;return n||s||i}}class Sh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function PX(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function DX(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function OX(t,e){e&&(t["X-Firebase-GMPID"]=e)}function MX(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function LX(t,e,n,r,s,i){const o=HD(t.urlParams),a=t.url+o,c=Object.assign({},t.headers);return OX(c,e),PX(c,n),DX(c,i),MX(c,r),new NX(a,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FX(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UX(...t){const e=FX();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(iE())return new Blob(t);throw new ht("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function BX(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $X(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wg{constructor(e,n){this.data=e,this.contentType=n||null}}function KD(t,e){switch(t){case or.RAW:return new Wg(WD(e));case or.BASE64:case or.BASE64URL:return new Wg(zD(t,e));case or.DATA_URL:return new Wg(jX(e),qX(e))}throw sE()}function WD(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function VX(t){let e;try{e=decodeURIComponent(t)}catch{throw _l(or.DATA_URL,"Malformed data URL.")}return WD(e)}function zD(t,e){switch(t){case or.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw _l(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case or.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw _l(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$X(e)}catch{throw _l(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class GD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _l(or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=HX(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function jX(t){const e=new GD(t);return e.base64?zD(or.BASE64,e.rest):VX(e.rest)}function qX(t){return new GD(t).contentType}function HX(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){let r=0,s="";NS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(NS(this.data_)){const r=this.data_,s=BX(r,e,n);return s===null?null:new is(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new is(r,!0)}}static getBlob(...e){if(iE()){const n=e.map(r=>r instanceof is?r.data_:r);return new is(UX.apply(null,n))}else{const n=e.map(o=>Bp(o)?KD(or.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new is(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){let e;try{e=JSON.parse(t)}catch{return null}return xX(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KX(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function WX(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function QD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zX(t,e){return e}class un{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||zX}}let Ch=null;function GX(t){return!Bp(t)||t.length<2?t:QD(t)}function $p(){if(Ch)return Ch;const t=[];t.push(new un("bucket")),t.push(new un("generation")),t.push(new un("metageneration")),t.push(new un("name","fullPath",!0));function e(i,o){return GX(o)}const n=new un("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new un("size");return s.xform=r,t.push(s),t.push(new un("timeCreated")),t.push(new un("updated")),t.push(new un("md5Hash",null,!0)),t.push(new un("cacheControl",null,!0)),t.push(new un("contentDisposition",null,!0)),t.push(new un("contentEncoding",null,!0)),t.push(new un("contentLanguage",null,!0)),t.push(new un("contentType",null,!0)),t.push(new un("metadata","customMetadata",!0)),Ch=t,Ch}function QX(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new sn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function YX(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return QX(r,t),r}function YD(t,e,n){const r=oE(e);return r===null?null:YX(t,r,n)}function XX(t,e,n,r){const s=oE(e);if(s===null||!Bp(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(l=>{const u=t.bucket,h=t.fullPath,d="/b/"+o(u)+"/o/"+o(h),f=Si(d,n,r),p=HD({alt:"media",token:l});return f+p})[0]}function aE(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="prefixes",DS="items";function JX(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[PS])for(const s of n[PS]){const i=s.replace(/\/$/,""),o=t._makeStorageReference(new sn(e,i));r.prefixes.push(o)}if(n[DS])for(const s of n[DS]){const i=t._makeStorageReference(new sn(e,s.name));r.items.push(i)}return r}function ZX(t,e,n){const r=oE(n);return r===null?null:JX(t,e,r)}class As{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t){if(!t)throw sE()}function Vp(t,e){function n(r,s){const i=YD(t,s,e);return jr(i!==null),i}return n}function eJ(t,e){function n(r,s){const i=ZX(t,e,s);return jr(i!==null),i}return n}function tJ(t,e){function n(r,s){const i=YD(t,s,e);return jr(i!==null),XX(i,s,t.host,t._protocol)}return n}function bc(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=_X():s=mX():n.getStatus()===402?s=gX(t.bucket):n.getStatus()===403?s=yX(t.path):s=r,s.serverResponse=r.serverResponse,s}return e}function jp(t){const e=bc(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=pX(t.path)),i.serverResponse=s.serverResponse,i}return n}function XD(t,e,n){const r=e.fullServerUrl(),s=Si(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new As(s,i,Vp(t,n),o);return a.errorHandler=jp(e),a}function nJ(t,e,n,r,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const o=e.bucketOnlyServerUrl(),a=Si(o,t.host,t._protocol),c="GET",l=t.maxOperationRetryTime,u=new As(a,c,eJ(t,e.bucket),l);return u.urlParams=i,u.errorHandler=bc(e),u}function rJ(t,e,n){const r=e.fullServerUrl(),s=Si(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new As(s,i,tJ(t,n),o);return a.errorHandler=jp(e),a}function sJ(t,e,n,r){const s=e.fullServerUrl(),i=Si(s,t.host,t._protocol),o="PATCH",a=aE(n,r),c={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,u=new As(i,o,Vp(t,r),l);return u.headers=c,u.body=a,u.errorHandler=jp(e),u}function iJ(t,e){const n=e.fullServerUrl(),r=Si(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(c,l){}const a=new As(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=jp(e),a}function oJ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function JD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=oJ(null,e)),r}function aJ(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let I=0;I<2;I++)w=w+Math.random().toString().slice(2);return w}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=JD(e,r,s),u=aE(l,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+c+"--",f=is.getBlob(h,r,d);if(f===null)throw VD();const p={name:l.fullPath},_=Si(i,t.host,t._protocol),v="POST",y=t.maxUploadRetryTime,g=new As(_,v,Vp(t,n),y);return g.urlParams=p,g.headers=o,g.body=f.uploadData(),g.errorHandler=bc(e),g}class tf{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function cE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{jr(!1)}return jr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function cJ(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=JD(e,r,s),a={name:o.fullPath},c=Si(i,t.host,t._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=aE(o,n),d=t.maxUploadRetryTime;function f(_){cE(_);let v;try{v=_.getResponseHeader("X-Goog-Upload-URL")}catch{jr(!1)}return jr(Bp(v)),v}const p=new As(c,l,f,d);return p.urlParams=a,p.headers=u,p.body=h,p.errorHandler=bc(e),p}function lJ(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(l){const u=cE(l,["active","final"]);let h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{jr(!1)}h||jr(!1);const d=Number(h);return jr(!isNaN(d)),new tf(d,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,c=new As(n,o,i,a);return c.headers=s,c.errorHandler=bc(e),c}const OS=256*1024;function uJ(t,e,n,r,s,i,o,a){const c=new tf(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw IX();const l=c.total-c.current;let u=l;s>0&&(u=Math.min(u,s));const h=c.current,d=h+u,p={"X-Goog-Upload-Command":u===l?"upload, finalize":"upload","X-Goog-Upload-Offset":`${c.current}`},_=r.slice(h,d);if(_===null)throw VD();function v(I,k){const x=cE(I,["active","final"]),$=c.current+u,A=r.size();let K;return x==="final"?K=Vp(e,i)(I,k):K=null,new tf($,A,x==="final",K)}const y="POST",g=e.maxUploadRetryTime,w=new As(n,y,v,g);return w.headers=p,w.body=_.uploadData(),w.progressCallback=a||null,w.errorHandler=bc(t),w}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hJ={STATE_CHANGED:"state_changed"},gn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zg(t){switch(t){case"running":case"pausing":case"canceling":return gn.RUNNING;case"paused":return gn.PAUSED;case"success":return gn.SUCCESS;case"canceled":return gn.CANCELED;case"error":return gn.ERROR;default:return gn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dJ{constructor(e,n,r){if(RX(e)||n!=null||r!=null)this.next=e,this.error=n!=null?n:void 0,this.complete=r!=null?r:void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class fJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw $c("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $c("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $c("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $c("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $c("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class pJ extends fJ{initXhr(){this.xhr_.responseType="text"}}function Or(){return new pJ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=$p(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=cJ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Or,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=lJ(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Or,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=OS*this._chunkMultiplier,n=new tf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=uJ(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Or,s,i);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){OS*this._chunkMultiplier<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=XD(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Or,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=aJ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Or,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=$D(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=zg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new dJ(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(zg(this._state)){case gn.SUCCESS:Xo(this._resolve.bind(null,this.snapshot))();break;case gn.CANCELED:case gn.ERROR:const n=this._reject;Xo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(zg(this._state)){case gn.RUNNING:case gn.PAUSED:e.next&&Xo(e.next.bind(e,this.snapshot))();break;case gn.SUCCESS:e.complete&&Xo(e.complete.bind(e))();break;case gn.CANCELED:case gn.ERROR:e.error&&Xo(e.error.bind(e,this._error))();break;default:e.error&&Xo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){this._service=e,n instanceof sn?this._location=n:this._location=sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new No(e,n)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QD(this._location.path)}get storage(){return this._service}get parent(){const e=KX(this._location.path);if(e===null)return null;const n=new sn(this._location.bucket,e);return new No(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qD(e)}}function gJ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ZD(t,new is(e),n)}function mJ(t){const e={prefixes:[],items:[]};return eO(t,e).then(()=>e)}async function eO(t,e,n){const s=await tO(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await eO(t,e,s.nextPageToken)}function tO(t,e){e!=null&&typeof e.maxResults=="number"&&F_("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=nJ(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Or)}function _J(t){t._throwIfRoot("getMetadata");const e=XD(t.storage,t._location,$p());return t.storage.makeRequestWithTokens(e,Or)}function yJ(t,e){t._throwIfRoot("updateMetadata");const n=sJ(t.storage,t._location,e,$p());return t.storage.makeRequestWithTokens(n,Or)}function vJ(t){t._throwIfRoot("getDownloadURL");const e=rJ(t.storage,t._location,$p());return t.storage.makeRequestWithTokens(e,Or).then(n=>{if(n===null)throw TX();return n})}function wJ(t){t._throwIfRoot("deleteObject");const e=iJ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Or)}function nO(t,e){const n=WX(t._location.path,e),r=new sn(t._location.bucket,n);return new No(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(t){return/^[A-Za-z]+:\/\//.test(t)}function bJ(t,e){return new No(t,e)}function rO(t,e){if(t instanceof lE){const n=t;if(n._bucket==null)throw bX();const r=new No(n,n._bucket);return e!=null?rO(r,e):r}else return e!==void 0?nO(t,e):t}function IJ(t,e){if(e&&EJ(e)){if(t instanceof lE)return bJ(t,e);throw Ea("To use ref(service, url), the first argument must be a Storage instance.")}else return rO(t,e)}function MS(t,e){const n=e==null?void 0:e[BD];return n==null?null:sn.makeFromBucketSpec(n,t)}function TJ(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:my(s,t.app.options.projectId))}class lE{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=UD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dX,this._maxUploadRetryTime=fX,this._requests=new Set,s!=null?this._bucket=sn.makeFromBucketSpec(s,this._host):this._bucket=MS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=MS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){F_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){F_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new No(this,e)}_makeRequest(e,n,r,s){if(this._deleted)return new SX(jD());{const i=LX(e,this._appId,r,s,n,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const LS="@firebase/storage",FS="0.9.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SJ="storage";function CJ(t,e,n){return t=O(t),gJ(t,e,n)}function kJ(t){return t=O(t),_J(t)}function AJ(t,e){return t=O(t),yJ(t,e)}function RJ(t,e){return t=O(t),tO(t,e)}function xJ(t){return t=O(t),mJ(t)}function NJ(t){return t=O(t),vJ(t)}function PJ(t){return t=O(t),wJ(t)}function US(t,e){return t=O(t),IJ(t,e)}function DJ(t,e){return nO(t,e)}function OJ(t,e,n,r={}){TJ(t,e,n,r)}function MJ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new lE(n,r,s,e,Jr)}function LJ(){ct(new ke(SJ,MJ,"PUBLIC").setMultipleInstances(!0)),qe(LS,FS,""),qe(LS,FS,"esm2017")}LJ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new kh(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new kh(r,this,this._ref))},n)}on(e,n,r,s){let i;return n&&(typeof n=="function"?i=o=>n(new kh(o,this,this._ref)):i={next:n.next?o=>n.next(new kh(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,i,r||void 0,s||void 0)}}class $S{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new ps(e,this._service))}get items(){return this._delegate.items.map(e=>new ps(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=DJ(this._delegate,e);return new ps(n,this.storage)}get root(){return new ps(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new ps(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new BS(CJ(this._delegate,e,n),this)}putString(e,n=or.RAW,r){this._throwIfRoot("putString");const s=KD(n,e),i=Object.assign({},r);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),new BS(new ZD(this._delegate,new is(s.data,!0),i),this)}listAll(){return xJ(this._delegate).then(e=>new $S(e,this.storage))}list(e){return RJ(this._delegate,e||void 0).then(n=>new $S(n,this.storage))}getMetadata(){return kJ(this._delegate)}updateMetadata(e){return AJ(this._delegate,e)}getDownloadURL(){return NJ(this._delegate)}delete(){return this._throwIfRoot("delete"),PJ(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw qD(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(VS(e))throw Ea("ref() expected a child path but got a URL, use refFromURL instead.");return new ps(US(this._delegate,e),this)}refFromURL(e){if(!VS(e))throw Ea("refFromURL() expected a full URL but got a child path, use ref() instead.");try{sn.makeFromUrl(e,this._delegate.host)}catch{throw Ea("refFromUrl() expected a valid full URL but got an invalid one.")}return new ps(US(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){OJ(this._delegate,e,n,r)}}function VS(t){return/^[A-Za-z]+:\/\//.test(t)}const FJ="@firebase/storage-compat",UJ="0.1.17";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ="storage-compat";function $J(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new sO(n,r)}function VJ(t){const e={TaskState:gn,TaskEvent:hJ,StringFormat:or,Storage:sO,Reference:ps};t.INTERNAL.registerComponent(new ke(BJ,$J,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(FJ,UJ)}VJ(je);const jS="@firebase/performance",U_="0.5.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=U_,jJ="FB-PERF-TRACE-START",qJ="FB-PERF-TRACE-STOP",B_="FB-PERF-TRACE-MEASURE",oO="_wt_",aO="_fp",cO="_fcp",lO="_fid",uO="@firebase/performance/config",hO="@firebase/performance/configexpire",HJ="performance",dO="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KJ={["trace started"]:"Trace {$traceName} was started before.",["trace stopped"]:"Trace {$traceName} is not running.",["nonpositive trace startTime"]:"Trace {$traceName} startTime should be positive.",["nonpositive trace duration"]:"Trace {$traceName} duration should be positive.",["no window"]:"Window is not available.",["no app id"]:"App id is not available.",["no project id"]:"Project id is not available.",["no api key"]:"Api key is not available.",["invalid cc log"]:"Attempted to queue invalid cc event",["FB not default"]:"Performance can only start when Firebase app instance is the default one.",["RC response not ok"]:"RC response is not ok",["invalid attribute name"]:"Attribute name {$attributeName} is invalid.",["invalid attribute value"]:"Attribute value {$attributeValue} is invalid.",["invalid custom metric name"]:"Custom metric name {$customMetricName} is invalid",["invalid String merger input"]:"Input for String merger is invalid, contact support team to resolve.",["already initialized"]:"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},nn=new Sn(HJ,dO,KJ);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new Xr(dO);Yr.logLevel=_e.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gg,fO;class Mt{constructor(e){if(this.window=e,!e)throw nn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Sf()?(Yr.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Fn()?!0:(Yr.info("IndexedDB is not supported by current browswer"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(s=>{for(const i of s.getEntries())n(i)}).observe({entryTypes:[e]})}static getInstance(){return Gg===void 0&&(Gg=new Mt(fO)),Gg}}function WJ(t){fO=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pO;function zJ(t){const e=t.getId();return e.then(n=>{pO=n}),e}function uE(){return pO}function GJ(t){const e=t.getToken();return e.then(n=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e){const n=t.length-e.length;if(n<0||n>1)throw nn.create("invalid String merger input");const r=[];for(let s=0;s<t.length;s++)r.push(t.charAt(s)),e.length>s&&r.push(e.charAt(s));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qg;class Kn{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=qS("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=qS("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Qg===void 0&&(Qg=new Kn),Qg}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ba;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"})(ba||(ba={}));const QJ=["firebase_","google_","ga_"],YJ=new RegExp("^[a-zA-Z]\\w*$"),XJ=40,JJ=100;function ZJ(){const t=Mt.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function gO(){switch(Mt.getInstance().document.visibilityState){case"visible":return ba.VISIBLE;case"hidden":return ba.HIDDEN;default:return ba.UNKNOWN}}function e7(){const e=Mt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function t7(t){return t.length===0||t.length>XJ?!1:!QJ.some(n=>t.startsWith(n))&&!!t.match(YJ)}function n7(t){return t.length!==0&&t.length<=JJ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.appId;if(!n)throw nn.create("no app id");return n}function r7(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!n)throw nn.create("no project id");return n}function s7(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!n)throw nn.create("no api key");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="0.0.1",fr={loggingEnabled:!0},o7="FIREBASE_INSTALLATIONS_AUTH";function a7(t,e){const n=c7();return n?(HS(n),Promise.resolve()):h7(t,e).then(HS).then(r=>l7(r),()=>{})}function c7(){const t=Mt.getInstance().localStorage;if(!t)return;const e=t.getItem(hO);if(!e||!d7(e))return;const n=t.getItem(uO);if(!!n)try{return JSON.parse(n)}catch{return}}function l7(t){const e=Mt.getInstance().localStorage;!t||!e||(e.setItem(uO,JSON.stringify(t)),e.setItem(hO,String(Date.now()+Kn.getInstance().configTimeToLive*60*60*1e3)))}const u7="Could not fetch config, will use default configs";function h7(t,e){return GJ(t.installations).then(n=>{const r=r7(t.app),s=s7(t.app),i=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${s}`,o=new Request(i,{method:"POST",headers:{Authorization:`${o7} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:mO(t.app),app_version:iO,sdk_version:i7})});return fetch(o).then(a=>{if(a.ok)return a.json();throw nn.create("RC response not ok")})}).catch(()=>{Yr.info(u7)})}function HS(t){if(!t)return t;const e=Kn.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=fr.loggingEnabled,n.fpr_log_source?e.logSource=Number(n.fpr_log_source):fr.logSource&&(e.logSource=fr.logSource),n.fpr_log_endpoint_url?e.logEndPointUrl=n.fpr_log_endpoint_url:fr.logEndPointUrl&&(e.logEndPointUrl=fr.logEndPointUrl),n.fpr_log_transport_key?e.transportKey=n.fpr_log_transport_key:fr.transportKey&&(e.transportKey=fr.transportKey),n.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):fr.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=fr.networkRequestsSamplingRate),n.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):fr.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=fr.tracesSamplingRate),e.logTraceAfterSampling=KS(e.tracesSamplingRate),e.logNetworkAfterSampling=KS(e.networkRequestsSamplingRate),t}function d7(t){return Number(t)>Date.now()}function KS(t){return Math.random()<=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hE=1,Yg;function _O(t){return hE=2,Yg=Yg||p7(t),Yg}function f7(){return hE===3}function p7(t){return g7().then(()=>zJ(t.installations)).then(e=>a7(t,e)).then(()=>WS(),()=>WS())}function g7(){const t=Mt.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){const n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function WS(){hE=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=10*1e3,m7=5.5*1e3,yO=3,_7=1e3;let nf=yO,Zs=[],zS=!1;function y7(){zS||(qp(m7),zS=!0)}function qp(t){setTimeout(()=>{if(nf!==0){if(!Zs.length)return qp(dE);v7()}},t)}function v7(){const t=Zs.splice(0,_7),e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Kn.getInstance().logSource,log_event:e};w7(n,t).catch(()=>{Zs=[...t,...Zs],nf--,Yr.info(`Tries left: ${nf}.`),qp(dE)})}function w7(t,e){return E7(t).then(n=>(n.ok||Yr.info("Call to Firebase backend failed."),n.json())).then(n=>{const r=Number(n.nextRequestWaitMillis);let s=dE;isNaN(r)||(s=Math.max(r,s));const i=n.logResponseDetails;Array.isArray(i)&&i.length>0&&i[0].responseAction==="RETRY_REQUEST_LATER"&&(Zs=[...e,...Zs],Yr.info("Retry transport request later.")),nf=yO,qp(s)})}function E7(t){const e=Kn.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function b7(t){if(!t.eventTime||!t.message)throw nn.create("invalid cc log");Zs=[...Zs,t]}function I7(t){return(...e)=>{const n=t(...e);b7({message:n,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg;function vO(t,e){Xg||(Xg=I7(S7)),Xg(t,e)}function Ah(t){const e=Kn.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||!Mt.getInstance().requiredApisAvailable()||t.isAuto&&gO()!==ba.VISIBLE||(f7()?Jg(t):_O(t.performanceController).then(()=>Jg(t),()=>Jg(t)))}function Jg(t){if(!uE())return;const e=Kn.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>vO(t,1),0)}function T7(t){const e=Kn.getInstance();if(!e.instrumentationEnabled)return;const n=t.url,r=e.logEndPointUrl.split("?")[0],s=e.flTransportEndpointUrl.split("?")[0];n===r||n===s||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>vO(t,0),0)}function S7(t,e){return e===0?C7(t):k7(t)}function C7(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:wO(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function k7(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);const n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);const r={application_info:wO(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function wO(t){return{google_app_id:mO(t),app_instance_id:uE(),web_app_info:{sdk_version:iO,page_url:Mt.getInstance().getUrl(),service_worker_status:ZJ(),visibility_state:gO(),effective_connection_type:e7()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=100,R7="_",x7=[aO,cO,lO];function N7(t,e){return t.length===0||t.length>A7?!1:e&&e.startsWith(oO)&&x7.indexOf(t)>-1||!t.startsWith(R7)}function P7(t){const e=Math.floor(t);return e<t&&Yr.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r=!1,s){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Mt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${jJ}-${this.randomId}-${this.name}`,this.traceStopMark=`${qJ}-${this.randomId}-${this.name}`,this.traceMeasure=s||`${B_}-${this.randomId}-${this.name}`,s&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw nn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw nn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Ah(this)}record(e,n,r){if(e<=0)throw nn.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw nn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const s of Object.keys(r.metrics))isNaN(Number(r.metrics[s]))||(this.counters[s]=Math.floor(Number(r.metrics[s])));Ah(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(N7(e,this.name))this.counters[e]=P7(n!=null?n:0);else throw nn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){const r=t7(e),s=n7(n);if(r&&s){this.customAttributes[e]=n;return}if(!r)throw nn.create("invalid attribute name",{attributeName:e});if(!s)throw nn.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,s){const i=Mt.getInstance().getUrl();if(!i)return;const o=new ei(e,oO+i,!0),a=Math.floor(Mt.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),n&&n[0]&&(o.setDuration(Math.floor(n[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));const c="first-paint",l="first-contentful-paint";if(r){const u=r.find(d=>d.name===c);u&&u.startTime&&o.putMetric(aO,Math.floor(u.startTime*1e3));const h=r.find(d=>d.name===l);h&&h.startTime&&o.putMetric(cO,Math.floor(h.startTime*1e3)),s&&o.putMetric(lO,Math.floor(s*1e3))}Ah(o)}static createUserTimingTrace(e,n){const r=new ei(e,n,!1,n);Ah(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t,e){const n=e;if(!n||n.responseStart===void 0)return;const r=Mt.getInstance().getTimeOrigin(),s=Math.floor((n.startTime+r)*1e3),i=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],c={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:s,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};T7(c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=5e3;function QS(t){!uE()||(setTimeout(()=>M7(t),0),setTimeout(()=>O7(t),0),setTimeout(()=>L7(t),0))}function O7(t){const e=Mt.getInstance(),n=e.getEntriesByType("resource");for(const r of n)GS(t,r);e.setupObserver("resource",r=>GS(t,r))}function M7(t){const e=Mt.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let s=setTimeout(()=>{ei.createOobTrace(t,n,r),s=void 0},D7);e.onFirstInputDelay(i=>{s&&(clearTimeout(s),ei.createOobTrace(t,n,r,i))})}else ei.createOobTrace(t,n,r)}function L7(t){const e=Mt.getInstance(),n=e.getEntriesByType("measure");for(const r of n)YS(t,r);e.setupObserver("measure",r=>YS(t,r))}function YS(t,e){const n=e.name;n.substring(0,B_.length)!==B_&&ei.createUserTimingTrace(t,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),Mt.getInstance().requiredApisAvailable()?_u().then(n=>{n&&(y7(),_O(this).then(()=>QS(this),()=>QS(this)),this.initialized=!0)}).catch(n=>{Yr.info(`Environment doesn't support IndexedDB: ${n}`)}):Yr.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Kn.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Kn.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Kn.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Kn.getInstance().dataCollectionEnabled}}const U7="[DEFAULT]";function B7(t,e){return t=O(t),new ei(t,e)}const $7=(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==U7)throw nn.create("FB not default");if(typeof window>"u")throw nn.create("no window");WJ(window);const s=new F7(n,r);return s._init(e),s};function V7(){ct(new ke("performance",$7,"PUBLIC")),qe(jS,U_),qe(jS,U_,"esm2017")}V7();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e,n){this.app=e,this._delegate=n}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return B7(this._delegate,e)}}const q7="@firebase/performance-compat",H7="0.1.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(t){t.INTERNAL.registerComponent(new ke("performance-compat",W7,"PUBLIC")),t.registerVersion(q7,H7)}function W7(t){const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("performance").getImmediate();return new j7(e,n)}K7(je);const Zg="@firebase/remote-config",XS="0.3.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7="remote-config";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7={["registration-window"]:"Undefined window object. This SDK only supports usage in a browser environment.",["registration-project-id"]:"Undefined project identifier. Check Firebase app initialization.",["registration-api-key"]:"Undefined API key. Check Firebase app initialization.",["registration-app-id"]:"Undefined app identifier. Check Firebase app initialization.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",["fetch-client-network"]:"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-timeout"]:'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',["fetch-throttle"]:'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',["fetch-client-parse"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["indexed-db-unavailable"]:"Indexed DB is not supported by current browser"},Pn=new Sn("remoteconfig","Remote Config",Q7);function Y7(t,e){return t instanceof st&&t.code.indexOf(e)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=!1,J7="",JS=0,Z7=["1","true","t","yes","y","on"];class em{constructor(e,n=J7){this._source=e,this._value=n}asString(){return this._value}asBoolean(){return this._source==="static"?X7:Z7.indexOf(this._value.toLowerCase())>=0}asNumber(){if(this._source==="static")return JS;let e=Number(this._value);return isNaN(e)&&(e=JS),e}getSource(){return this._source}}async function EO(t){const e=O(t),[n,r]=await Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()]);return!n||!n.config||!n.eTag||n.eTag===r?!1:(await Promise.all([e._storageCache.setActiveConfig(n.config),e._storage.setActiveConfigEtag(n.eTag)]),!0)}function bO(t){const e=O(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}async function IO(t){const e=O(t),n=new z7;setTimeout(async()=>{n.abort()},e.settings.fetchTimeoutMillis);try{await e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:n}),await e._storageCache.setLastFetchStatus("success")}catch(r){const s=Y7(r,"fetch-throttle")?"throttle":"failure";throw await e._storageCache.setLastFetchStatus(s),r}}function eZ(t){const e=O(t);return iZ(e._storageCache.getActiveConfig(),e.defaultConfig).reduce((n,r)=>(n[r]=eh(t,r),n),{})}function tZ(t,e){return eh(O(t),e).asBoolean()}function nZ(t,e){return eh(O(t),e).asNumber()}function rZ(t,e){return eh(O(t),e).asString()}function eh(t,e){const n=O(t);n._isInitializationComplete||n._logger.debug(`A value was requested for key "${e}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const r=n._storageCache.getActiveConfig();return r&&r[e]!==void 0?new em("remote",r[e]):n.defaultConfig&&n.defaultConfig[e]!==void 0?new em("default",String(n.defaultConfig[e])):(n._logger.debug(`Returning static value for key "${e}". Define a default or remote value if this is unintentional.`),new em("static"))}function sZ(t,e){const n=O(t);switch(e){case"debug":n._logger.logLevel=_e.DEBUG;break;case"silent":n._logger.logLevel=_e.SILENT;break;default:n._logger.logLevel=_e.ERROR}}function iZ(t={},e={}){return Object.keys(Object.assign(Object.assign({},t),e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(e,n,r,s){this.client=e,this.storage=n,this.storageCache=r,this.logger=s}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,s=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${s}.`),s}async fetch(e){const[n,r]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const s=await this.client.fetch(e),i=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return s.status===200&&i.push(this.storage.setLastSuccessfulFetchResponse(s)),await Promise.all(i),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(t=navigator){return t.languages&&t.languages[0]||t.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(e,n,r,s,i,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=s,this.apiKey=i,this.appId=o}async fetch(e){var n,r,s;const[i,o]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,l={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:i,app_instance_id_token:o,app_id:this.appId,language_code:aZ()},h={method:"POST",headers:l,body:JSON.stringify(u)},d=fetch(c,h),f=new Promise((w,I)=>{e.signal.addEventListener(()=>{const k=new Error("The operation was aborted.");k.name="AbortError",I(k)})});let p;try{await Promise.race([d,f]),p=await d}catch(w){let I="fetch-client-network";throw((n=w)===null||n===void 0?void 0:n.name)==="AbortError"&&(I="fetch-timeout"),Pn.create(I,{originalErrorMessage:(r=w)===null||r===void 0?void 0:r.message})}let _=p.status;const v=p.headers.get("ETag")||void 0;let y,g;if(p.status===200){let w;try{w=await p.json()}catch(I){throw Pn.create("fetch-client-parse",{originalErrorMessage:(s=I)===null||s===void 0?void 0:s.message})}y=w.entries,g=w.state}if(g==="INSTANCE_STATE_UNSPECIFIED"?_=500:g==="NO_CHANGE"?_=304:(g==="NO_TEMPLATE"||g==="EMPTY_CONFIG")&&(y={}),_!==304&&_!==200)throw Pn.create("fetch-status",{httpStatus:_});return{status:_,eTag:v,config:y}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lZ(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uZ(t){if(!(t instanceof st)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class hZ{constructor(e,n){this.client=e,this.storage=n}async fetch(e){const n=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)}async attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){await lZ(e.signal,n);try{const s=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),s}catch(s){if(!uZ(s))throw s;const i={throttleEndTimeMillis:Date.now()+ad(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(i),this.attemptFetch(e,i)}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dZ=60*1e3,fZ=12*60*60*1e3;class pZ{constructor(e,n,r,s,i){this.app=e,this._client=n,this._storageCache=r,this._storage=s,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:dZ,minimumFetchIntervalMillis:fZ},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t,e){var n;const r=t.target.error||void 0;return Pn.create(e,{originalErrorMessage:r&&((n=r)===null||n===void 0?void 0:n.message)})}const Mi="app_namespace_store",gZ="firebase_remote_config",mZ=1;function _Z(){return new Promise((t,e)=>{var n;try{const r=indexedDB.open(gZ,mZ);r.onerror=s=>{e(Hh(s,"storage-open"))},r.onsuccess=s=>{t(s.target.result)},r.onupgradeneeded=s=>{const i=s.target.result;switch(s.oldVersion){case 0:i.createObjectStore(Mi,{keyPath:"compositeKey"})}}}catch(r){e(Pn.create("storage-open",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message}))}})}class yZ{constructor(e,n,r,s=_Z()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=s}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(e){const n=await this.openDbPromise;return new Promise((r,s)=>{var i;const a=n.transaction([Mi],"readonly").objectStore(Mi),c=this.createCompositeKey(e);try{const l=a.get(c);l.onerror=u=>{s(Hh(u,"storage-get"))},l.onsuccess=u=>{const h=u.target.result;r(h?h.value:void 0)}}catch(l){s(Pn.create("storage-get",{originalErrorMessage:(i=l)===null||i===void 0?void 0:i.message}))}})}async set(e,n){const r=await this.openDbPromise;return new Promise((s,i)=>{var o;const c=r.transaction([Mi],"readwrite").objectStore(Mi),l=this.createCompositeKey(e);try{const u=c.put({compositeKey:l,value:n});u.onerror=h=>{i(Hh(h,"storage-set"))},u.onsuccess=()=>{s()}}catch(u){i(Pn.create("storage-set",{originalErrorMessage:(o=u)===null||o===void 0?void 0:o.message}))}})}async delete(e){const n=await this.openDbPromise;return new Promise((r,s)=>{var i;const a=n.transaction([Mi],"readwrite").objectStore(Mi),c=this.createCompositeKey(e);try{const l=a.delete(c);l.onerror=u=>{s(Hh(u,"storage-delete"))},l.onsuccess=()=>{r()}}catch(l){s(Pn.create("storage-delete",{originalErrorMessage:(i=l)===null||i===void 0?void 0:i.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),s=await e;s&&(this.lastFetchStatus=s);const i=await n;i&&(this.lastSuccessfulFetchTimestampMillis=i);const o=await r;o&&(this.activeConfig=o)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wZ(){ct(new ke(G7,t,"PUBLIC").setMultipleInstances(!0)),qe(Zg,XS),qe(Zg,XS,"esm2017");function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pn.create("registration-window");if(!Fn())throw Pn.create("indexed-db-unavailable");const{projectId:i,apiKey:o,appId:a}=r.options;if(!i)throw Pn.create("registration-project-id");if(!o)throw Pn.create("registration-api-key");if(!a)throw Pn.create("registration-app-id");n=n||"firebase";const c=new yZ(a,r.name,n),l=new vZ(c),u=new Xr(Zg);u.logLevel=_e.ERROR;const h=new cZ(s,Jr,n,i,o,a),d=new hZ(h,c),f=new oZ(d,c,l,u),p=new pZ(r,f,l,c,u);return bO(p),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EZ(t){return t=O(t),await IO(t),EO(t)}async function bZ(){if(!Fn())return!1;try{return await _u()}catch{return!1}}wZ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ{constructor(e,n){this.app=e,this._delegate=n}get defaultConfig(){return this._delegate.defaultConfig}set defaultConfig(e){this._delegate.defaultConfig=e}get fetchTimeMillis(){return this._delegate.fetchTimeMillis}get lastFetchStatus(){return this._delegate.lastFetchStatus}get settings(){return this._delegate.settings}set settings(e){this._delegate.settings=e}activate(){return EO(this._delegate)}ensureInitialized(){return bO(this._delegate)}fetch(){return IO(this._delegate)}fetchAndActivate(){return EZ(this._delegate)}getAll(){return eZ(this._delegate)}getBoolean(e){return tZ(this._delegate,e)}getNumber(e){return nZ(this._delegate,e)}getString(e){return rZ(this._delegate,e)}getValue(e){return eh(this._delegate,e)}setLogLevel(e){sZ(this._delegate,e)}}const TZ="@firebase/remote-config-compat",SZ="0.1.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CZ(t){t.INTERNAL.registerComponent(new ke("remoteConfig-compat",kZ,"PUBLIC").setMultipleInstances(!0).setServiceProps({isSupported:bZ})),t.registerVersion(TZ,SZ)}function kZ(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("remote-config").getImmediate({identifier:e});return new IZ(n,r)}CZ(je);var AZ="firebase",RZ="9.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */je.registerVersion(AZ,RZ,"app-compat");var xZ="firebase",NZ="9.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);je.registerVersion(xZ,NZ,"compat");class fE{static ofCredentials(e){const n=new fE;return n.uid=e.user.uid,n.displayName=e.user.displayName,n.email=e.user.email,n.isAdmin=!1,n.isOperator=!1,n.photoUrl=e.user.photoURL,n.creationTime=new Date(e.user.metadata.creationTime),n.lastSignInTime=new Date(e.user.metadata.lastSignInTime),n}get(){return{uid:this.uid,displayName:this.displayName,email:this.email,photoUrl:this.photoUrl,creationTime:this.creationTime,lastSignInTime:this.lastSignInTime,isOperator:this.isOperator,isAdmin:this.isAdmin}}}const uee=()=>{const t=new je.auth.GoogleAuthProvider;je.auth().signInWithPopup(t).then(e=>{DZ(e)}).catch(e=>{console.log(e)})},PZ=async()=>{const t=je.firestore(),e=oB();je.auth().currentUser&&(e.value=(await t.doc(`users/${je.auth().currentUser}`).get()).data()),je.auth().onAuthStateChanged(async n=>{console.log(n),n?(e.value=(await t.doc(`users/${n.uid}`).get()).data(),console.log(e.value)):e.value=null})},DZ=t=>{const e=je.firestore(),n=fE.ofCredentials(t),r=e.doc(`users/${t.user.uid}`);r.get().then(s=>{if(!s.exists)return r.set(n.get())})},hee=()=>{je.auth().signOut().then(t=>{window.location.href="/"})};const OZ=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},Rh=void 0,xh=void 0,Nh=void 0;/**
 * Vue 3 Carousel 0.1.46
 * (c) 2022
 * @license MIT
 */const kn={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,snapAlign:"center",wrapAround:!1,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,dir:"ltr",breakpoints:void 0},ZS={itemsToShow:{default:kn.itemsToShow,type:Number},itemsToScroll:{default:kn.itemsToScroll,type:Number},wrapAround:{default:kn.wrapAround,type:Boolean},snapAlign:{default:kn.snapAlign,validator(t){return["start","end","center","center-even","center-odd"].includes(t)}},transition:{default:kn.transition,type:Number},breakpoints:{default:kn.breakpoints,type:Object},autoplay:{default:kn.autoplay,type:Number},pauseAutoplayOnHover:{default:kn.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:kn.mouseDrag,type:Boolean},touchDrag:{default:kn.touchDrag,type:Boolean},dir:{default:kn.dir,validator(t){return["rtl","ltr"].includes(t)}},settings:{default(){return{}},type:Object}};function MZ(t,e){let n;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>{t(...r),n=null},e)}}function LZ(t,e){let n;return function(...r){const s=this;n||(t.apply(s,r),n=!0,setTimeout(()=>n=!1,e))}}function FZ(t){var e,n,r;return t?((n=(e=t[0])===null||e===void 0?void 0:e.type)===null||n===void 0?void 0:n.name)==="CarouselSlide"?t:((r=t[0])===null||r===void 0?void 0:r.children)||[]:[]}function UZ(t,e){if(t.wrapAround)return e-1;switch(t.snapAlign){case"start":return e-t.itemsToShow;case"end":return e-1;case"center":case"center-odd":return e-Math.ceil(t.itemsToShow/2);case"center-even":return e-Math.ceil(t.itemsToShow/2);default:return 0}}function BZ(t){if(t.wrapAround)return 0;switch(t.snapAlign){case"start":return 0;case"end":return t.itemsToShow-1;case"center":case"center-odd":return Math.floor((t.itemsToShow-1)/2);case"center-even":return Math.floor((t.itemsToShow-2)/2);default:return 0}}function e0(t,e,n,r){return t.wrapAround?e:Math.min(Math.max(e,r),n)}function $Z({slidesBuffer:t,currentSlide:e,snapAlign:n,itemsToShow:r,wrapAround:s,slidesCount:i}){let o=t.indexOf(e);if(o===-1&&(o=t.indexOf(Math.ceil(e))),n==="center"||n==="center-odd"?o-=(r-1)/2:n==="center-even"?o-=(r-2)/2:n==="end"&&(o-=r-1),!s){const a=i-r,c=0;o=Math.max(Math.min(o,a),c)}return o}var dee=yt({name:"Carousel",props:ZS,setup(t,{slots:e,emit:n,expose:r}){var s;const i=xe(null),o=xe([]),a=xe([]),c=xe(0),l=xe(1);let u,h,d=xe({}),f=Object.assign({},kn);const p=En(Object.assign({},f)),_=xe((s=p.modelValue)!==null&&s!==void 0?s:0),v=xe(0),y=xe(0),g=xe(0),w=xe(0);fn("config",p),fn("slidesBuffer",a),fn("slidesCount",l),fn("currentSlide",_),fn("maxSlide",g),fn("minSlide",w);function I(){const b=Object.assign(Object.assign({},t),t.settings);d=xe(Object.assign({},b.breakpoints)),f=Object.assign(Object.assign({},b),{settings:void 0,breakpoints:void 0}),x(f)}function k(){const b=Object.keys(d.value).map(j=>Number(j)).sort((j,L)=>+L-+j);let P=Object.assign({},f);b.some(j=>window.matchMedia(`(min-width: ${j}px)`).matches?(P=Object.assign(Object.assign({},P),d.value[j]),!0):!1),x(P)}function x(b){for(let P in b)p[P]=b[P]}const $=MZ(()=>{d.value&&(k(),K()),A()},16);function A(){if(!i.value)return;const b=i.value.getBoundingClientRect();c.value=b.width/p.itemsToShow}function K(){l.value=Math.max(o.value.length,1),!(l.value<=0)&&(y.value=Math.ceil((l.value-1)/2),g.value=UZ(p,l.value),w.value=BZ(p),_.value=e0(p,_.value,g.value,w.value))}function Q(){const b=[...Array(l.value).keys()];if(p.wrapAround&&p.itemsToShow+1<=l.value){let L=(p.itemsToShow!==1?Math.round((l.value-p.itemsToShow)/2):0)-_.value;if(p.snapAlign==="end"?L+=Math.floor(p.itemsToShow-1):(p.snapAlign==="center"||p.snapAlign==="center-odd")&&L++,L<0)for(let V=L;V<0;V++)b.push(Number(b.shift()));else for(let V=0;V<L;V++)b.unshift(Number(b.pop()))}a.value=b}gu(()=>{d.value&&(k(),K()),uf(()=>setTimeout(A,16)),Jn(),window.addEventListener("resize",$,{passive:!0})}),oy(()=>{h&&clearTimeout(h),u&&clearInterval(u)});let X=!1;const W={x:0,y:0},le={x:0,y:0},G=En({x:0,y:0}),dt=xe(!1),Ee=()=>{dt.value=!0},Le=()=>{dt.value=!1};function Pe(b){X=b.type==="touchstart",!(!X&&b.button!==0||Ct.value)&&(X||b.preventDefault(),W.x=X?b.touches[0].clientX:b.clientX,W.y=X?b.touches[0].clientY:b.clientY,document.addEventListener(X?"touchmove":"mousemove",tn,!0),document.addEventListener(X?"touchend":"mouseup",Zr,!0))}const tn=LZ(b=>{le.x=X?b.touches[0].clientX:b.clientX,le.y=X?b.touches[0].clientY:b.clientY;const P=le.x-W.x,j=le.y-W.y;G.y=j,G.x=P},16);function Zr(){const b=p.dir==="rtl"?-1:1,P=Math.sign(G.x)*.4,j=Math.round(G.x/c.value+P)*b;let L=e0(p,_.value-j,g.value,w.value);if(j&&!X){const V=M=>{M.stopPropagation(),window.removeEventListener("click",V,!0)};window.addEventListener("click",V,!0)}Cn(L),G.x=0,G.y=0,document.removeEventListener(X?"touchmove":"mousemove",tn,!0),document.removeEventListener(X?"touchend":"mouseup",Zr,!0)}function Jn(){!p.autoplay||p.autoplay<=0||(u=setInterval(()=>{p.pauseAutoplayOnHover&&dt.value||R()},p.autoplay))}function $n(){u&&(clearInterval(u),u=null),Jn()}const Ct=xe(!1);function Cn(b,P=!1){if(_.value===b||Ct.value)return;$n();const j=l.value-1;if(b>j)return Cn(b-l.value);if(b<0)return Cn(b+l.value);Ct.value=!0,v.value=_.value,_.value=b,P||n("update:modelValue",_.value),h=setTimeout(()=>{p.wrapAround&&Q(),Ct.value=!1},p.transition)}function R(){let b=_.value+p.itemsToScroll;p.wrapAround||(b=Math.min(b,g.value)),Cn(b)}function J(){let b=_.value-p.itemsToScroll;p.wrapAround||(b=Math.max(b,w.value)),Cn(b)}const q={slideTo:Cn,next:R,prev:J};fn("nav",q);const ee=at(()=>$Z({slidesBuffer:a.value,itemsToShow:p.itemsToShow,snapAlign:p.snapAlign,wrapAround:Boolean(p.wrapAround),currentSlide:_.value,slidesCount:l.value}));fn("slidesToScroll",ee);const Re=at(()=>{const b=p.dir==="rtl"?-1:1,P=ee.value*c.value*b;return{transform:`translateX(${G.x-P}px)`,transition:`${Ct.value?p.transition:0}ms`}});function Oe(){I()}function me(){I(),k(),K(),Q(),A(),$n()}function ue(){K(),Q()}Object.keys(ZS).forEach(b=>{["modelValue"].includes(b)||Xi(()=>t[b],me)}),Oe(),am(()=>{const b=l.value!==o.value.length;t.modelValue!==void 0&&_.value!==t.modelValue&&Cn(Number(t.modelValue),!0),b&&ue()});const m={config:p,slidesBuffer:a,slidesCount:l,slideWidth:c,currentSlide:_,maxSlide:g,minSlide:w,middleSlide:y};r({updateBreakpointsConfigs:k,updateSlidesData:K,updateSlideWidth:A,updateSlidesBuffer:Q,initCarousel:Oe,restartCarousel:me,updateCarousel:ue,slideTo:Cn,next:R,prev:J,nav:q,data:m});const E=e.default||e.slides,S=e.addons,N=En(m);return()=>{const b=FZ(E==null?void 0:E(N)),P=(S==null?void 0:S(N))||[];o.value=b,b.forEach((V,M)=>V.props.index=M);const j=Ve("ol",{class:"carousel__track",style:Re.value,onMousedown:p.mouseDrag?YE(Pe,["capture"]):null,onTouchstart:p.touchDrag?YE(Pe,["capture"]):null},b),L=Ve("div",{class:"carousel__viewport"},j);return Ve("section",{ref:i,class:{carousel:!0,"carousel--rtl":p.dir==="rtl"},dir:p.dir,"aria-label":"Gallery",onMouseenter:Ee,onMouseleave:Le},[L,P])}}});const VZ={arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"},$_=t=>{const e=t.name;if(!e||typeof e!="string")return;const n=VZ[e],r=Ve("path",{d:n}),s=t.title||e,i=Ve("title",s);return Ve("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img",ariaLabel:s},[i,r])};$_.props={name:String,title:String};const fee=(t,{slots:e,attrs:n})=>{const{next:r,prev:s}=e||{},i=nt("config",En(Object.assign({},kn))),o=nt("maxSlide",xe(1)),a=nt("minSlide",xe(1)),c=nt("currentSlide",xe(1)),l=nt("nav",{}),u=i.dir==="rtl",h=Ve("button",{type:"button",class:["carousel__prev",!i.wrapAround&&c.value<=a.value&&"carousel__prev--in-active",n==null?void 0:n.class],"aria-label":"Navigate to previous slide",onClick:l.prev},(s==null?void 0:s())||Ve($_,{name:u?"arrowRight":"arrowLeft"})),d=Ve("button",{type:"button",class:["carousel__next",!i.wrapAround&&c.value>=o.value&&"carousel__next--in-active",n==null?void 0:n.class],"aria-label":"Navigate to next slide",onClick:l.next},(r==null?void 0:r())||Ve($_,{name:u?"arrowLeft":"arrowRight"}));return[h,d]};var pee=yt({name:"CarouselSlide",props:{index:{type:Number,default:1}},setup(t,{slots:e}){const n=nt("config",En(Object.assign({},kn))),r=nt("slidesBuffer",xe([])),s=nt("currentSlide",xe(0)),i=nt("slidesToScroll",xe(0)),o=xe(t.index);n.wrapAround&&(a(),Xi(r,a));function a(){o.value=r.value.indexOf(t.index)}const c=at(()=>{const f=n.itemsToShow;return{width:`${1/f*100}%`,order:o.value.toString()}}),l=()=>t.index===s.value,u=()=>{const f=Math.ceil(i.value),p=Math.floor(i.value+n.itemsToShow);return r.value.slice(f,p).includes(t.index)},h=()=>t.index===r.value[Math.ceil(i.value)-1],d=()=>t.index===r.value[Math.floor(i.value+n.itemsToShow)];return()=>{var f;return Ve("li",{style:c.value,class:{carousel__slide:!0,"carousel__slide--active":l(),"carousel__slide--visible":u(),"carousel__slide--prev":h(),"carousel__slide--next":d()}},(f=e.default)===null||f===void 0?void 0:f.call(e))}}});const gee=()=>{const t=nt("maxSlide",xe(1)),e=nt("minSlide",xe(1)),n=nt("currentSlide",xe(1)),r=nt("nav",{});function s(a){r.slideTo(a)}const i=a=>{const c=n.value;return c===a||c>t.value&&a>=t.value||c<e.value&&a<=e.value},o=[];for(let a=e.value;a<t.value+1;a++){const c=Ve("button",{type:"button",class:{"carousel__pagination-button":!0,"carousel__pagination-button--active":i(a)},"aria-label":`Navigate to slide ${a+1}`,onClick:()=>s(a)}),l=Ve("li",{class:"carousel__pagination-item",key:a},c);o.push(l)}return Ve("ol",{class:"carousel__pagination"},o)};var Kh=(t=>(t.OFFENSIVE="OFFENSIVE",t.DEFENSIVE="DEFENSIVE",t.UTILITY="UTILITY",t))(Kh||{});var ea=(t=>(t.E="E",t.D="D",t.C="C",t.B="B",t.A="A",t.S="S",t.Splus="S+",t))(ea||{});const mee=[{id:"29252155-82df-4ef9-bb7d-0609f51bb626",chakra:100,description:`A kawarimi alapvet\u0151 chakrair\xE1ny\xEDt\xE1si m\u0171velete: chakra testen k\xEDv\xFCli \xF6n\xE1ll\xF3 ir\xE1ny\xEDt\xE1sa + chakra testen k\xEDv\xFCli ir\xE1ny\xEDt\xE1s\xE1val val\xF3 mozgat\xE1s
A technika l\xE9trehoz\xE1sa k\xE9t chakrair\xE1ny\xEDt\xE1si Alapm\u0171velet kombin\xE1ci\xF3j\xE1val j\xF6n l\xE9tre. A Chakra testen k\xEDv\xFCli \xF6n\xE1ll\xF3 ir\xE1ny\xEDt\xE1sa (Bunshin no Jutsu alapm\u0171velete) valamint a Chakra testen k\xEDv\xFCli ir\xE1ny\xEDt\xE1s\xE1val val\xF3 mozgat\xE1s (Kugutsu no Jutsu alapm\u0171velete) A technik\xE1hoz sz\xFCks\xE9g van egy, a haszn\xE1l\xF3val nagyj\xE1b\xF3l egy m\xE9ret\u0171 \xE9s s\xFAly\xFA t\xE1rgyra, valamint egy kis chakrafelhaszn\xE1l\xE1sra. Az alkalmaz\xE1skor a haszn\xE1l\xF3 keres egy, a m\xE9ret\xE9vel \xE9s s\xFAly\xE1val megegyez\u0151 t\xE1rgyat ami lehet ak\xE1r egy far\xF6nk, vagy egy zs\xE1k - vagy b\xE1rmely m\xE1s dolog - \xE9s a t\xE1rgyba koncentr\xE1lja a chakr\xE1j\xE1t. Amint teljesen \xE1tj\xE1rta vele, kiterjeszti azt a t\xE1rgy fel\xFClet\xE9re, majd chakr\xE1ja seg\xEDts\xE9g\xE9vel a t\xE1rgy k\xF6r\xFCl l\xE9trehoz egy chakram\xE1solatot \xF6nmag\xE1r\xF3l, csak\xFAgy, mint a Bunshin no Jutsun\xE1l. Ezut\xE1n, a chakr\xE1ja seg\xEDts\xE9g\xE9vel k\xE9pes lesz ir\xE1ny\xEDtani azt.
Ezzel az elj\xE1r\xE1ssal egy olyan kl\xF3nt hoz l\xE9tre a haszn\xE1l\xF3, ami l\xE9nyegesen t\xF6bb ideig marad fent mint a sima Bunshin, valamint a kl\xF3n s\xFAllyal \xE9s testtel is rendelkezik, \xEDgy a haszn\xE1l\xF3val helyet cser\xE9lve (\xE9s "teleport\xE1lva" egyik helyr\u0151l a m\xE1sikra, hanem a haszn\xE1l\xF3 elb\xFAjik a kl\xF3n \xE1tveszi a hely\xE9t) remek\xFCl haszn\xE1latos megt\xE9veszt\xE9s gyan\xE1nt. Azonban, az \xEDgy l\xE9trehozott m\xE1solat addig tartja meg form\xE1j\xE1t, am\xEDg fizikai vagy chakrahat\xE1s nem \xE9ri, ekkor pedig a chakramassza sz\xE9toszl\xE1s\xE1val csak a t\xE1rgy vagy l\xE9ny marad a helysz\xEDnen. \xC9l\u0151l\xE9nyek -\xE1llatok \xE9s emberek- eset\xE9n a technika csak addig marad fenn, am\xEDg a l\xE9ny hagyja, azaz nem mozdul meg, \xEDgy \xE9l\u0151l\xE9nyekkel legt\xF6bbsz\xF6r nem, vagy csak egy pillanatnyi v\xE9szhelyzet megold\xE1s\xE1ra alkalmazhat\xF3.`,huName:"Testhelyettes\xEDt\u0151 Technika",jpName:"Kawarimi no Jutsu",jutsuRequirement:[{huName:"F\xE1c\xE1n Vad\xE1szat",jpName:"Kijigari"},{huName:"Er\u0151szakos R\xE9msz\xE9l Csap\xE1s",jpName:"Juuha Reppushou"}],images:["https://vignette1.wikia.nocookie.net/naruto/images/e/eb/Body_Replacement.PNG/revision/latest/scale-to-width-down/320?cb=20150504131249","https://i.stack.imgur.com/kEe8Q.jpg"],kanji:"\u5FCD",rank:ea.E,restrictions:[],type:{parentType:{name:"Ninjutsu",parentType:null,secondaryColor:"",primaryColor:""},primaryColor:"#968468",secondaryColor:"#968468",name:"Akad\xE9mista Ninjutsu"},users:[],info:[{name:"Figyelmeztet\xE9s",color:"#EF5F5F",order:0,text:"A Kawarimi no Jutsu NEM egy t\xE9rid\u0151 technika, teh\xE1t NEM lehet vele t\xE9ren \xE9s id\u0151n \xE1t kicser\xE9lni magad semmivel! Magyar\xE1zat lejjebb."}],functionality:Kh.UTILITY},{id:"5e4a3967-5615-4b83-a24b-fc9d8fe4d2d9",chakra:400,description:"A technika sor\xE1n a haszn\xE1l\xF3 egy m\xE9retesebb rep\xFCl\u0151 f\xE1c\xE1nt hoz l\xE9tre l\xE1ngokb\xF3l, mely azt\xE1n a c\xE9lpont fel\xE9 rep\xFCl \xE9s akad\xE1lyozza a mozg\xE1sban, vagy \xE9pp a haszn\xE1l\xF3 akarata szerint megt\xE1madja azt. A f\xE1c\xE1n igen magas h\u0151vel rendelkezik, \xEDgy cs\xFAnya \xE9g\xE9si s\xE9r\xFCl\xE9seket k\xE9pes okozni a c\xE9lpontnak, \xE9s mivel fizikailag \xFAgy viselkedik, mint egy f\xE1c\xE1n, a csapkod\xF3 sz\xE1rnyai v\xE9gett k\xF6nnyen megh\xE1tr\xE1l\xE1sra k\xE9nyszer\xEDthetj\xFCk ellenfel\xFCnk, vagy csak egyszer\u0171en csak beleir\xE1ny\xEDtjuk az ellenf\xE9lbe, mely nyom\xE1n a f\xE1c\xE1n belrobban. B\xE1r kib\xEDr n\xE9h\xE1ny csap\xE1st, a technika nem arra lett kital\xE1lva, hogy sok\xE1ig b\xEDrja a t\xE1mad\xE1sokat.",huName:"F\xE1c\xE1n Vad\xE1szat",jpName:"Kijigari",jutsuRequirement:[],images:["https://i33.servimg.com/u/f33/18/17/45/35/kijiga10.jpg"],kanji:"\u706B",rank:ea.B,restrictions:[],type:{parentType:{name:"Ninjutsu",parentType:null,secondaryColor:"",primaryColor:""},primaryColor:"#a10a02",secondaryColor:"#EF5F5F",name:"Akad\xE9mista Ninjutsu"},users:[],info:[],functionality:Kh.OFFENSIVE},{id:"17c69735-bd01-4668-a0a7-6322a11f86fa",chakra:500,description:"A haszn\xE1l\xF3 sz\xE9l chakra seg\xEDts\xE9g\xE9vel egy karom form\xE1j\xFA sz\xE9ll\xF6k\xE9st hoz l\xE9tre, amely a technika l\xE9trehoz\xE1s\xE1ra felhaszn\xE1lt chakr\xE1t\xF3l v\xE1lik l\xE1that\xF3v\xE1. A jutsu k\xE9pes szikl\xE1kat rombolni.",huName:"Er\u0151szakos R\xE9msz\xE9l Csap\xE1s",jpName:"Juuha Reppushou ",jutsuRequirement:[],images:["https://i.servimg.com/u/f33/18/17/45/35/juuha_11.jpg"],kanji:"\u98A8",rank:ea.A,restrictions:[],type:{parentType:{name:"Ninjutsu",parentType:null,secondaryColor:"",primaryColor:""},primaryColor:"#048c10",secondaryColor:"#68f274",name:"Akad\xE9mista Ninjutsu"},users:[],info:[],functionality:Kh.DEFENSIVE},{id:"e129b9bb-716e-41c9-9cef-5a2ab493725a",chakra:900,description:`A Naruton haszn\xE1lt N\xE9gy pecs\xE9t ellent\xE9te: ez a pecs\xE9t nem a testbe z\xE1rt chakr\xE1t engedi kivonni, \xE9s \xE1talakulni/felhaszn\xE1lni a haszn\xE1l\xF3 akarata szerint: A technika a haszn\xE1l\xF3 test\xE9be, avagy abba a testbe, amire a pecs\xE9tet k\xE9sz\xEDtette, z\xE1r mindent, ami a pecs\xE9t k\xF6rnyezet\xE9ben van (a pecs\xE9t hat\xF3sugara a k\xE9sz\xEDt\xE9s\xE9hez felhaszn\xE1lt chakra mennyis\xE9gt\u0151l f\xFCgg).
A pecs\xE9t elk\xE9sz\xEDt\xE9se: rajzolat k\xE9sz\xEDt\xE9se a hordoz\xF3ra, majd a pecs\xE9tbe foglalt chakra pecs\xE9tbe \xE1ramoltat\xE1sa, v\xE9g\xFCl a pecs\xE9t lez\xE1r\xE1sa - ezt a haszn\xE1l\xF3 megteheti \xFAgy, hogy a felold\xE1st csak maga ind\xEDthatja el, de a megpecs\xE9teltnek is meghagyhatja ezt a lehet\u0151s\xE9get.`,huName:"Ford\xEDtott N\xE9gy Pecs\xE9t",jpName:"Ura Shishou Fuuinjutsu ",jutsuRequirement:[],images:["https://images2.imgbox.com/6b/a8/aamYiwx0_o.png"],kanji:"\u5C01",rank:ea.S,restrictions:[],type:{parentType:{name:"Ninjutsu",parentType:null,secondaryColor:"",primaryColor:""},primaryColor:"#26272e",secondaryColor:"#313a7d",name:"Akad\xE9mista Ninjutsu"},users:[],info:[]},{id:"1efbaf13-b26d-45b9-a847-c6ac1c30a9b0",chakra:120,description:"Ez egy egyszer\u0171nek nevezhet\u0151 Kenjutsu, mivel nem t\xFAl er\u0151s. A l\xE9nyege, hogy mikor k\xE9t kard \xF6sszecsap, nagy f\xE9ny keletkezik az \xF6sszeakad\xE1s hely\xE9n, \xEDgy kicsit gyeng\xEDti az ellenf\xE9l l\xE1t\xE1s\xE1t, m\xEDg a Ninja szem\xE9be nem megy a f\xE9ny. Nem olyan neh\xE9z elsaj\xE1t\xEDtani, mint a t\xF6bbi Kenjutsut. \xC9s nem is ker\xFCl annyi chakr\xE1ba.",huName:"Napf\xE9ny",jpName:"Hikage ",jutsuRequirement:[],images:[],kanji:"\u5263",rank:ea.D,restrictions:[],type:{parentType:{name:"Ninjutsu",parentType:null,secondaryColor:"",primaryColor:""},primaryColor:"#312a4a",secondaryColor:"#ccc5e6",name:"Akad\xE9mista Ninjutsu"},users:[],info:[]}],Ph=void 0,t0=[{name:"admin-jutsu-comments",path:"/admin/jutsu/comments",file:"C:/Development/gundan/jutsu/pages/admin/jutsu/comments.vue",children:[],meta:lh,alias:(lh==null?void 0:lh.alias)||[],component:()=>$s(()=>import("./comments.d6f94bc2.js"),[],import.meta.url).then(t=>t.default||t)},{name:"admin-jutsu",path:"/admin/jutsu",file:"C:/Development/gundan/jutsu/pages/admin/jutsu/index.vue",children:[],meta:uh,alias:(uh==null?void 0:uh.alias)||[],component:()=>$s(()=>import("./index.9bc31f1d.js"),[],import.meta.url).then(t=>t.default||t)},{name:"admin-jutsu-styles",path:"/admin/jutsu/styles",file:"C:/Development/gundan/jutsu/pages/admin/jutsu/styles.vue",children:[],meta:Rh,alias:(Rh==null?void 0:Rh.alias)||[],component:()=>$s(()=>import("./styles.6498745d.js"),["styles.6498745d.js","JutsuNav.d08e3751.js"],import.meta.url).then(t=>t.default||t)},{name:"admin-users",path:"/admin/users",file:"C:/Development/gundan/jutsu/pages/admin/users/index.vue",children:[],meta:xh,alias:(xh==null?void 0:xh.alias)||[],component:()=>$s(()=>import("./index.3d5c5b8a.js"),[],import.meta.url).then(t=>t.default||t)},{name:"index",path:"/",file:"C:/Development/gundan/jutsu/pages/index.vue",children:[],meta:Nh,alias:(Nh==null?void 0:Nh.alias)||[],component:()=>$s(()=>import("./index.12939da6.js"),["index.12939da6.js","index.387d8afe.css","JutsuNav.d08e3751.js"],import.meta.url).then(t=>t.default||t)},{name:"jutsu-list",path:"/jutsu/list",file:"C:/Development/gundan/jutsu/pages/jutsu/list.vue",children:[],meta:Ph,alias:(Ph==null?void 0:Ph.alias)||[],component:()=>$s(()=>import("./list.8a3d3e57.js"),["list.8a3d3e57.js","list.8b118098.css"],import.meta.url).then(t=>t.default||t)}],jZ={},ts={...jZ},qZ=[],tm={};function HZ(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){const a=s.includes(t.slice(i))?t.slice(i).length:1;let c=s.slice(a);return c[0]!=="/"&&(c="/"+c),JE(c,"")}return JE(n,t)+r+s}const KZ=tc(async t=>{var p,_,v,y;let e,n;t.vueApp.component("NuxtPage",og),t.vueApp.component("NuxtNestedPage",og),t.vueApp.component("NuxtChild",og);let r=rF().app.baseURL;ts.hashMode&&!r.includes("#")&&(r+="#");const s=(_=(p=ts.history)==null?void 0:p.call(ts,r))!=null?_:ts.hashMode?EF(r):bC(r),i=(y=(v=ts.routes)==null?void 0:v.call(ts,t0))!=null?y:t0,o=HZ(r,window.location),a=sU({...ts,history:s,routes:i});t.vueApp.use(a);const c=Gh(a.currentRoute.value);a.afterEach((g,w)=>{c.value=w}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const l=Gh(a.resolve(o)),u=()=>{l.value=a.currentRoute.value};t.hook("page:finish",u),a.afterEach((g,w)=>{var I,k,x,$;((k=(I=g.matched[0])==null?void 0:I.components)==null?void 0:k.default)===(($=(x=w.matched[0])==null?void 0:x.components)==null?void 0:$.default)&&u()});const h={};for(const g in l.value)h[g]=at(()=>l.value[g]);t._route=En(h),t._middleware=t._middleware||{global:[],named:{}};const d=wf();try{[e,n]=XL(()=>a.isReady()),await e,n()}catch(g){Us(t,qc,[g])}const f=DC("_layout");return a.beforeEach(async(g,w)=>{var k,x;g.meta=En(g.meta),t.isHydrating&&(g.meta.layout=(k=f.value)!=null?k:g.meta.layout),t._processingMiddleware=!0;const I=new Set([...qZ,...t._middleware.global]);for(const $ of g.matched){const A=$.meta.middleware;if(!!A)if(Array.isArray(A))for(const K of A)I.add(K);else I.add(A)}for(const $ of I){const A=typeof $=="string"?t._middleware.named[$]||await((x=tm[$])==null?void 0:x.call(tm).then(Q=>Q.default||Q)):$;if(!A)throw new Error(`Unknown route middleware: '${$}'.`);const K=await Us(t,A,[g,w]);if(!t.payload.serverRendered&&t.isHydrating&&(K===!1||K instanceof Error)){const Q=K||Sm({statusMessage:`Route navigation aborted: ${o}`});return Us(t,qc,[Q])}if(K||K===!1)return K}}),a.afterEach(async g=>{delete t._processingMiddleware,!t.isHydrating&&d.value&&await Us(t,aU),g.matched.length===0&&Us(t,qc,[Sm({statusCode:404,fatal:!1,statusMessage:`Page not found: ${g.fullPath}`})])}),t.hooks.hookOnce("app:created",async()=>{try{await a.replace({...a.resolve(o),name:void 0,force:!0})}catch(g){Us(t,qc,[g])}}),{provide:{router:a}}}),WZ=tc(t=>{!mU()||(t.hooks.hook("link:prefetch",e=>wb(e)),Ef().beforeResolve(async(e,n)=>{if(e.path===n.path)return;const r=await wb(e.path);!r||Object.assign(t.payload.data,r.data)}))}),zZ=tc(t=>{const e={apiKey:"AIzaSyBIQ745b4yyUCkbaM8Is6YXS3S-of13zp8",authDomain:"gundan-jutsu.firebaseapp.com",projectId:"gundan-jutsu",storageBucket:"gundan-jutsu.appspot.com",messagingSenderId:"1083124517666",appId:"1:1083124517666:web:9a714edd8909490b6d337b",measurementId:"G-5V1X7CNYPC"};je.initializeApp(e),PZ().then()}),GZ=[AU,UU,tB,KZ,WZ,zZ],n0={__name:"nuxt-root",setup(t){const e=P1(()=>$s(()=>import("./error-component.fb52343a.js"),[],import.meta.url).then(i=>i.default||i)),n=Jt(),r=()=>n.callHook("app:suspense:resolve");fn("_route",OC()),n.hooks.callHookWith(i=>i.map(o=>o()),"vue:setup");const s=wf();return q0((i,o,a)=>{n.hooks.callHook("vue:error",i,o,a).catch(c=>console.error("[nuxt] Error in `vue:error` hook",c)),cU(i)&&(i.fatal||i.unhandled)&&Us(n,qc,[i])}),(i,o)=>{const a=ay("App");return Zi(),ua(M0,{onResolve:r},{default:ny(()=>[mn(s)?(Zi(),ua(mn(e),{key:0,error:mn(s)},null,8,["error"])):(Zi(),ua(a,{key:1}))]),_:1})}}},r0={},QZ=yt({props:{name:{type:[String,Boolean,Object],default:null}},setup(t,e){const n=OC();return()=>{var o,a,c;const r=(a=(o=It(t.name)?t.name.value:t.name)!=null?o:n.meta.layout)!=null?a:"default",s=r&&r in r0,i=(c=n.meta.layoutTransition)!=null?c:XU;return km(mf,s&&i,{default:()=>km(r0[r],s,e.slots).default()}).default()}}}),YZ={};function XZ(t,e){const n=ay("NuxtPage"),r=QZ;return Zi(),ua(r,null,{default:ny(()=>[rt(n)]),_:1})}const JZ=OZ(YZ,[["render",XZ]]);globalThis.$fetch||(globalThis.$fetch=UL.create({baseURL:$L()}));let s0;const ZZ=nF(GZ);s0=async function(){var s;const n=Boolean((s=window.__NUXT__)==null?void 0:s.serverRendered)?YM(n0):QM(n0);n.component("App",JZ);const r=ZL({vueApp:n});r.hooks.hookOnce("app:suspense:resolve",()=>{r.isHydrating=!1});try{await tF(r,ZZ)}catch(i){await r.callHook("app:error",i),r.payload.error=r.payload.error||i}try{await r.hooks.callHook("app:created",n),await r.hooks.callHook("app:beforeMount",n),n.mount("#__nuxt"),await r.hooks.callHook("app:mounted",n),await uf()}catch(i){await r.callHook("app:error",i),r.payload.error=r.payload.error||i}},s0().catch(t=>{console.error("Error while mounting app:",t)});export{mee as A,gy as B,dee as C,Nn as F,Kh as J,fee as N,gee as P,pee as S,$s as _,OZ as a,oee as b,ua as c,P1 as d,rt as e,sC as f,uM as g,lee as h,aee as i,oB as j,cee as k,iC as l,uee as m,eee as n,Zi as o,nee as p,ree as q,En as r,hee as s,tee as t,mn as u,rf as v,ny as w,ay as x,see as y,iee as z};
